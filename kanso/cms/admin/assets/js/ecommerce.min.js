!function(){var e=Modules.get("JSHelper"),o=e.$('.js-writer-form select[name="type"]'),t=e.$(".js-add-product-offer"),n=e.$(".js-product-options"),a=e.$(".js-product-options .js-tab-panels-wrap"),l=e.$(".js-product-options .js-tab-nav"),r=e.$All(".js-product-options .js-remove-offer");function s(o){o=o||window.event;var t=e.parentUntillClass(this,"tab-panel"),n=e.$('li a[data-tab="'+t.dataset.tabPanel+'"]',l).parentNode;e.removeFromDOM(n),e.removeFromDOM(t),c();var a=e.$("li:first-child a",l);e.nodeExists(a)&&e.triggerEvent(a,"click")}function c(){for(var o=e.$All("li a",l),t=e.$All(".tab-panel",a),n=0;n<o.length;n++)o[n].dataset.tab="offer-"+(n+1),o[n].innerHTML="Offer "+(n+1);for(var r=0;r<t.length;r++)t[r].dataset.tabPanel="offer-"+(r+1)}e.nodeExists(n)&&(e.addEventListener(o,"change",function(t){t=t||window.event,"product"===o.options[o.selectedIndex].value?e.addClass(n,"active"):e.removeClass(n,"active")}),e.addEventListener(t,"click",function(o){var t=e.count(e.$All(".tab-panel",a))+1,n='<a href="#" data-tab="offer-'+t+'">Offer '+t+"</a>",r=e.clean_inner_html(['<div class="form-field row floor-xs">','<label>ID</label><input type="text" name="product_offer_'+t+'_id" value="" autocomplete="off" placeholder="SKU001">',"</div>",'<div class="form-field row floor-xs">','<label>Name</label><input type="text" name="product_offer_'+t+'_name" value="" autocomplete="off" placeholder="XXS">',"</div>",'<div class="form-field row floor-xs">','<label>Price</label><input type="text" name="product_offer_'+t+'_price" value="" autocomplete="off" placeholder="19.95">',"</div>",'<div class="form-field row floor-xs">','<label>Sale Price</label><input type="text" name="product_offer_'+t+'_sale_price" value="" autocomplete="off" placeholder="9.95">',"</div>",'<div class="form-field row floor-xs">','<span class="checkbox checkbox-primary">','<input type="checkbox" name="product_offer_'+t+'_instock" id="product_offer_'+t+'_instock" checked>','<label for="product_offer_'+t+'_instock">In Stock</label>',"</span>","</div>",'<button class="btn btn-danger js-remove-offer" type="button">Remove Offer</button>']),i=e.newNode("DIV","tab-panel",null,r,a);i.dataset.tabPanel="offer-"+t;e.newNode("LI",null,null,n,l);Modules.refresh("TabNav"),e.triggerEvent(e.$("li:last-of-type > a",l),"click"),e.addEventListener(e.$(".js-remove-offer",i),"click",s),c()}),function(){for(var o=0;o<r.length;o++)e.addEventListener(r[o],"click",s)}())}(),function(){var e=Modules.get("JSHelper");function o(o){(o=o||window.event).preventDefault(),e.removeFromDOM(e.parentUntillClass(this,"js-coupon-row"))}function t(t){(t=t||window.event).preventDefault();var n=e.$(".js-coupon-entries"),a=document.createElement("DIV");a.className="row roof-xs js-coupon-row",a.innerHTML=['<div class="form-field floor-xs">',"<label>Key</label>",'<input type="text" name="coupon_keys[]" value="" autocomplete="off" size="20">','</div>&nbsp;&nbsp;&nbsp;<div class="form-field floor-xs">',"<label>Value</label>",'<input type="text" name="coupon_values[]" value="" autocomplete="off" size="60">','</div>&nbsp;&nbsp;&nbsp;<button class="btn btn-danger js-rmv-coupon-code" type="button">Remove</button>','<div class="row clearfix"></div>'].join(""),n.appendChild(a),e.addEventListener(e.$(".js-rmv-coupon-code",a),"click",o)}e.nodeExists(e.$(".js-add-coupon-btn"))&&function(){for(var n=e.$(".js-add-coupon-btn"),a=e.$All(".js-rmv-coupon-code"),l=0;l<a.length;l++)e.addEventListener(a[l],"click",o);e.addEventListener(n,"click",t)}()}();