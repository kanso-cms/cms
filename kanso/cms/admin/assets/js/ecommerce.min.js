!function(){var e=Modules.get("JSHelper"),t=e.$('.js-writer-form select[name="type"]'),o=e.$(".js-add-product-offer"),a=e.$(".js-product-options"),l=e.$(".js-product-options .js-tab-panels-wrap"),r=e.$(".js-product-options .js-tab-nav"),n=e.$All(".js-product-options .js-remove-offer");function f(t){t=t||window.event;var o=e.parentUntillClass(this,"tab-panel"),a=e.$('li a[data-tab="'+o.dataset.tabPanel+'"]',r).parentNode;e.removeFromDOM(a),e.removeFromDOM(o),i();var l=e.$("li:first-child a",r);e.nodeExists(l)&&e.triggerEvent(l,"click")}function i(){for(var t=e.$All("li a",r),o=e.$All(".tab-panel",l),a=0;a<t.length;a++)t[a].dataset.tab="offer-"+(a+1),t[a].innerHTML="Offer "+(a+1);for(var n=0;n<o.length;n++)o[n].dataset.tabPanel="offer-"+(n+1)}e.nodeExists(a)&&(e.addEventListener(t,"change",function(o){o=o||window.event,"product"===t.options[t.selectedIndex].value?e.addClass(a,"active"):e.removeClass(a,"active")}),e.addEventListener(o,"click",function(t){var o=e.count(e.$All(".tab-panel",l))+1,a='<a href="#" data-tab="offer-'+o+'">Offer '+o+"</a>",n=e.clean_inner_html(['<div class="form-field row floor-xs">','<label>ID</label><input type="text" name="product_offer_'+o+'_id" value="" autocomplete="off" placeholder="SKU001">',"</div>",'<div class="form-field row floor-xs">','<label>Name</label><input type="text" name="product_offer_'+o+'_name" value="" autocomplete="off" placeholder="XXS">',"</div>",'<div class="form-field row floor-xs">','<label>Price</label><input type="text" name="product_offer_'+o+'_price" value="" autocomplete="off" placeholder="19.95">',"</div>",'<div class="form-field row floor-xs">','<label>Sale Price</label><input type="text" name="product_offer_'+o+'_sale_price" value="" autocomplete="off" placeholder="9.95">',"</div>",'<div class="form-field row floor-xs">','<span class="checkbox checkbox-primary">','<input type="checkbox" name="product_offer_'+o+'_instock" id="product_offer_'+o+'_instock" checked>','<label for="product_offer_'+o+'_instock">In Stock</label>',"</span>","</div>",'<button class="btn btn-danger js-remove-offer" type="button">Remove Offer</button>']),c=e.newNode("DIV","tab-panel",null,n,l);c.dataset.tabPanel="offer-"+o;e.newNode("LI",null,null,a,r);Modules.refresh("TabNav"),e.triggerEvent(e.$("li:last-of-type > a",r),"click"),e.addEventListener(e.$(".js-remove-offer",c),"click",f),i()}),function(){for(var t=0;t<n.length;t++)e.addEventListener(n[t],"click",f)}())}();