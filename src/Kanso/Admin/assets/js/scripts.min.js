function closest(c,b){b=b.toLowerCase();if(typeof c==="undefined"){return null}if(c.nodeName.toLowerCase()===b){return c}if(c.parentNode&&c.parentNode.nodeName.toLowerCase()===b){return c.parentNode}var a=c.parentNode;while(a!==document.body&&typeof a!=="undefined"&&a!==null){a=a.parentNode;if(a&&a.nodeName.toLowerCase()===b){return a}}return null}function parentUntillClass(b,c){if(hasClass(b,c)){return b}if(hasClass(b.parentNode,c)){return b.parentNode}var a=b.parentNode;while(a!==document.body){a=a.parentNode;if(hasClass(a,c)){return a}}return null}function nextUntillType(c,b){b=b.toLowerCase();if(c.nextSibling&&c.nextSibling.nodeName.toLowerCase===b){return c.nextSibling}var a=c.nextSibling;while(a!==document.body&&typeof a!=="undefined"&&a!==null){a=a.nextSibling;if(a&&a.nodeName.toLowerCase()===b){return a}}return null}function isJSON(c){var b;try{b=JSON.parse(c)}catch(a){return false}return b}function newNode(c,b,a,e,f){var d=document.createElement(c);b=(typeof b==="undefined"?null:b);a=(typeof a==="undefined"?null:a);e=(typeof e==="undefined"?null:e);if(b!==null){d.className=b}if(a!==null){d.id=a}if(e!==null){d.innerHTML=e}f.appendChild(d);return d}function nodeExists(a){if(typeof(a)!=="undefined"&&a!==null){if(typeof(a.parentNode)!=="undefined"&&a.parentNode!==null){return true}}return false}function makeid(c){var d="";var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var b=0;b<c;b++){d+=a.charAt(Math.floor(Math.random()*a.length))}return d}function removeFromDOM(a){if(nodeExists(a)){a.parentNode.removeChild(a)}}function addClass(c,b){if(!nodeExists(c)){return}if(Object.prototype.toString.call(b)==="[object Array]"){for(var a=0;a<b.length;a++){c.classList.add(b[a])}return}c.classList.add(b)}function removeClass(c,b){if(!nodeExists(c)){return}if(Object.prototype.toString.call(b)==="[object Array]"){for(var a=0;a<b.length;a++){c.classList.remove(b[a])}return}c.classList.remove(b)}function hasClass(c,b){if(!nodeExists(c)){return false}if(Object.prototype.toString.call(b)==="[object Array]"){for(var a=0;a<b.length;a++){if(c.classList.contains(b[a])){return true}}return false}return c.classList.contains(b)}function removeClassNodeList(a,c,b){[].forEach.call(a,function(d){typeof b==="undefined"?d.classList.remove(c):d.classList[d==b?"add":"remove"](c)})}function addClassNodeList(a,c,b){[].forEach.call(a,function(d){typeof b==="undefined"?d.classList.add(c):d.classList[d==b?"remove":"add"](c)})}function isNodeType(b,a){return b.tagName.toUpperCase()===a.toUpperCase()}function getCoords(e){var h=e.getBoundingClientRect();var j=document.body;var b=document.documentElement;var c=window.pageYOffset||b.scrollTop||j.scrollTop;var f=window.pageXOffset||b.scrollLeft||j.scrollLeft;var g=b.clientTop||j.clientTop||0;var k=b.clientLeft||j.clientLeft||0;var l=h.top+c-g;var d=h.left+f-k;var a=parseInt(getStyleVal(e,"width"));var m=parseInt(getStyleVal(e,"height"));return{top:Math.round(l),left:Math.round(d),right:Math.round(d+a),bottom:Math.round(l+m)}}function getStyle(a,b){if(window.getComputedStyle){return window.getComputedStyle(a,null).getPropertyValue(b)}else{if(a.currentStyle){return a.currentStyle[b]}}}function triggerEvent(c,b){if("createEvent" in document){var a=document.createEvent("HTMLEvents");a.initEvent(b,false,true);c.dispatchEvent(a)}else{c.fireEvent(b)}}function fadeOut(a){if(nodeExists(a)){addClass(a,"animated");addClass(a,"fadeOut")}}function fadeOutAndRemove(b){if(nodeExists(b)){addClass(b,"animated");addClass(b,"fadeOut")}b.addEventListener("animationend",function a(c){removeFromDOM(b);b.removeEventListener("animationend",a,false)},false)}function cloneObj(a){var c={};for(var b in a){if(a.hasOwnProperty(b)){c[b]=a[b]}}return c}function getFormInputs(c){var d=$All("input, textarea, select",c);var b=d.length;while(b--){var a=d[b];if(a.type=="radio"&&a.checked!==true){d.splice(b,1)}}return d}function getInputValue(a){if(a.type=="checkbox"){return a.checked}if(a.type=="select"){return a.options[a.selectedIndex].value}return a.value}function is_numeric(b){var a=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";return(typeof b==="number"||(typeof b==="string"&&a.indexOf(b.slice(-1))===-1))&&b!==""&&!isNaN(b)}function isCallable(a){return Object.prototype.toString.call(a)==="[object Function]"}function count(c,d){var b,a=0;if(c===null||typeof c==="undefined"){return 0}else{if(c.constructor!==Array&&c.constructor!==Object){return 1}}if(d==="COUNT_RECURSIVE"){d=1}if(d!=1){d=0}for(b in c){if(c.hasOwnProperty(b)){a++;if(d==1&&c[b]&&(c[b].constructor===Array||c[b].constructor===Object)){a+=this.count(c[b],1)}}}return a}function in_array(e,d,c){var b="",a=!!c;if(a){for(b in d){if(d[b]===e){return true}}}else{for(b in d){if(d[b]==e){return true}}}return false}function ltrim(c,b){b=!b?" \\s\u00A0":(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1");var a=new RegExp("^["+b+"]+","g");return(c+"").replace(a,"")}function rtrim(c,b){b=!b?" \\s\u00A0":(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"\\$1");var a=new RegExp("["+b+"]+$","g");return(c+"").replace(a,"")}function preg_quote(b,a){return String(b).replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(a||"")+"-]","g"),"\\$&")}function str_replace(d,c,b,e){e=typeof e==="undefined"?1:e;for(var a=0;a<e;a++){b=b.replace(d,c)}return b}function preg_match_all(f,c){if(typeof f==="string"){try{f=new RegExp(f)}catch(d){return null}}var e=[];var a=f.exec(c);if(a!==null){var b=0;while(a=f.exec(c)){c=str_split_index(c,(a.index+a[0].length-1))[1];a.index=b>0?(a.index+(a[0].length-1)):a.index-1;e.push(a);b++}return e}return null}function str_split_index(b,a){return[b.substring(0,a+1),b.substring(a+1)]}function closest_number(a,d){var c=a[0];for(var b=0;b<a.length;b++){var e=a[b];if(Math.abs(d-e)<Math.abs(d-c)){c=e}}return c}function cleanInnerHTML(a){return a.join("")}function bool(a){a=(typeof a==="undefined"?false:a);if(typeof a==="boolean"){return a}if(typeof a==="number"){return a>0}if(typeof a==="string"){if(a.toLowerCase()==="false"){return false}if(a.toLowerCase()==="true"){return true}if(a.toLowerCase()==="on"){return true}if(a.toLowerCase()==="off"){return false}if(a.toLowerCase()==="undefined"){return false}if(is_numeric(a)){return Number(a)>0}if(a===""){return false}}return false}function ucfirst(a){return a.charAt(0).toUpperCase()+a.slice(1)}function strReduce(b,c,d,a){a=(typeof a==="undefined"?true:false);d=(typeof d==="undefined"?"":d);if(a){return(b.length>c)?b.substring(0,c)+d:b}var e=b.split(" ");if(count(e)>c){return fruits.slice(0,c).join(" ").suffix}return b}function arrReduce(b,a){return array_slice(b,0,a)}function implode(d,a,b){var c="";for(i=0;i<d.length;i++){if(i===d.length-1){c+=a+d[i]}else{c+=a+d[i]+b}}return c}function array_slice(f,j,d,b){var k="";if(Object.prototype.toString.call(f)!=="[object Array]"||(b&&j!==0)){var g=0,l={};for(k in f){g+=1;l[k]=f[k]}f=l;j=(j<0)?g+j:j;d=d===undefined?g:(d<0)?g+d-j:d;var h={};var a=false,e=-1,m=0,c=0;for(k in f){++e;if(m>=d){break}if(e==j){a=true}if(!a){continue}++m;if(this.is_int(k)&&!b){h[c++]=f[k]}else{h[k]=f[k]}}return h}if(d===undefined){return f.slice(j)}else{if(d>=0){return f.slice(j,j+d)}else{return f.slice(j,d)}}}function timeAgo(f,a){a=(typeof a==="undefined"?false:true);f=isValidTimeStamp(f)?parseInt(f):strtotime(f);var b=[{name:"second",limit:60,in_seconds:1},{name:"minute",limit:3600,in_seconds:60},{name:"hour",limit:86400,in_seconds:3600},{name:"day",limit:604800,in_seconds:86400},{name:"week",limit:2629743,in_seconds:604800},{name:"month",limit:31556926,in_seconds:2629743},{name:"year",limit:null,in_seconds:31556926}];var e=(new Date()-new Date(f*1000))/1000;if(e<5){return"now"}var c=0,d;while(d=b[c++]){if(e<d.limit||!d.limit){var e=Math.floor(e/d.in_seconds);if(a){return{unit:d.name+(e>1?"s":""),time:e}}return e+" "+d.name+(e>1?"s":"")}}}function isValidTimeStamp(a){return is_numeric(a)&&parseInt(a)==a}function strtotime(a){return Math.round(new Date(a).getTime()/1000)}function is_numeric(b){var a=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";return(typeof b==="number"||(typeof b==="string"&&a.indexOf(b.slice(-1))===-1))&&b!==""&&!isNaN(b)}function isset(){var c=arguments,b=c.length,d=0,e;if(b===0){throw new Error("Empty isset")}while(d!==b){if(c[d]===e||c[d]===null){return false}d++}return true}function empty(a){a=(typeof a==="undefined"?false:a);if(typeof a==="boolean"){return a!==true}if(typeof a==="number"){return a<1}if(typeof a==="string"){if(a.toLowerCase()==="undefined"){return true}if(is_numeric(a)){return Number(a)<1}if(a===""){return true}if(a!==""){return false}}if(Object.prototype.toString.call(a)==="[object Array]"){return a.length<1}if(Object.prototype.toString.call(a)==="[object Object]"){return(Object.getOwnPropertyNames(a).length===0)}return false}function paginate(g,h,c){h=(h===false||h===0?1:h);c=(c?c:10);var j=count(g);var b=Math.ceil((j/c));var e=(h-1)*c;var a=e+1;var d=Math.min((e+c),j);var k=[];if(h>b){return false}for(var f=0;f<b;f++){e=f*c;k.push(g.slice(e,c))}return k}function $All(a,b){b=(typeof b==="undefined"?document:b);return Array.prototype.slice.call(b.querySelectorAll(a))}function $(a,b){b=(typeof b==="undefined"?document:b);return b.querySelector(a)}var formValidator=function(a){if(!(this instanceof formValidator)){return new formValidator(a)}this.inputs=a;this.validationIndex=[];this.validForm=true;this.invalids=[];this.formObj={};this.inputsIndex={};this.indexInputs();this.generateForm()};formValidator.prototype={indexInputs:function(){for(var b=0;b<this.inputs.length;b++){var a=this.inputs[b].name;this.inputsIndex[a]=this.inputs[b];this.validationIndex.push({node:this.inputs[b],isRequired:this.inputs[b].dataset.jsRequired||null,validationMinLength:this.inputs[b].dataset.jsMinLegnth||null,validationMaxLength:this.inputs[b].dataset.jsMaxLegnth||null,validationType:this.inputs[b].dataset.jsValidation||null,isValid:true})}},validateForm:function(){this.invalids=[];this.validForm=true;for(var a=0;a<this.validationIndex.length;a++){this.validationIndex[a].isValid=true;var d=this.validationIndex[a];var b=getInputValue(d.node);if(!d.isRequired&&b===""){continue}else{if(d.isRequired&&!this.validateEmpty(b)){this.devalidate(a)}else{if(d.validationMinLength&&!this.validateMinLength(b,d.validationMinLength)){this.devalidate(a)}else{if(d.validationMaxLength&&!this.validateMaxLength(b,d.validationMaxLength)){this.devalidate(a)}else{if(d.validationType){var c=true;if(d.validationType==="email"){c=this.validateEmail(b)}if(d.validationType==="name"){c=this.validateName(b)}if(d.validationType==="password"){c=this.validatePassword(b)}if(d.validationType==="website"){c=this.validateWebsite(b)}if(d.validationType==="plain-text"){c=this.validatePlainText(b)}if(d.validationType==="numbers"){c=this.validateNumbers(b)}if(d.validationType==="list"){c=this.validateList(b)}if(d.validationType==="no-spaces-text"){c=this.validatePlainTextNoSpace(b)}if(d.validationType==="slug"){c=this.validateSlug(b)}if(d.validationType==="creditcard"){c=this.validateCreditCard(b)}if(d.validationType==="cvv"){c=this.validateCVV(b)}if(d.validationType==="permalinks"){c=this.validatePermalinks(b)}if(d.validationType==="comma-list-numbers"){c=this.validateCommaListNumbers(b)}if(d.validationType==="url-path"){c=this.validateURLPath(b)}if(!c){this.devalidate(a)}}}}}}}return this},getInput:function(a){if(a in this.inputsIndex){return this.inputsIndex[a]}return null},generateForm:function(){for(var a=0;a<this.inputs.length;a++){var b=getInputValue(this.inputs[a]);if(is_numeric(b)){b=parseInt(b)}this.formObj[this.inputs[a].name]=b}this.formAppend("public_key",GLOBAL_PUBLIC_KEY);this.formAppend("referer",window.location.href);return this.formObj},formAppend:function(a,b){this.formObj[a]=b;return this.formObj},getForm:function(){return this.formObj},devalidate:function(a){this.validationIndex[a].isValid=false;this.validForm=false;this.invalids.push(this.validationIndex[a].node)},validateEmpty:function(b){b=b.trim();var a=/^\s*$/;return a.test(b)?false:true},validateEmail:function(b){var a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(b)},validateName:function(b){var a=/^[A-z \-]+$/;return a.test(b)},validateNumbers:function(b){var a=/^[\d]+$/;return a.test(b)},validatePassword:function(b){var a=/^(?=.*[^a-zA-Z]).{6,40}$/;return a.test(b)},validateWebsite:function(a){re=/^(www\.|[A-z]|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/;return re.test(a)},validateMinLength:function(b,a){return b.length>=a},validateMaxLength:function(b,a){return b.length<a},validatePlainText:function(b){var a=/^[A-z _-]+$/;return a.test(b)},validatePlainTextNoSpace:function(b){var a=/^[A-z_-]+$/;return a.test(b)},validateList:function(b){var a=/^[-\w\s]+(?:,[-\w\s]*)*$/;return a.test(b)},validateSlug:function(b){var a=/^[A-z\/\-\_]+$/;return a.test(b)},validateCreditCard:function(c){c=c.replace(/ /g,"");var b=/^[0-9]+$/;var a=b.test(c);if(a===false){return false}if(c.length!==16){return false}return true},validateCVV:function(b){if(b.length>4){return false}var a=/^[0-9]+$/;return a.test(b)},validatePermalinks:function(b){var a=/^((year|month|postname|category|author|day|hour|minute|second)\/)+$/;return a.test(b)},validateCommaListNumbers:function(b){var a=/^((\d+),\s)+(\d+)$/;if(a.test(b)){return true}var c=/^(((\d+)\s*(\d+),)\s*)(((\d+)\s*(\d+),)\s*)(((\d+)\s*(\d+))\s*)$/;if(c.test(b)){return true}return false},validateURLPath:function(b){var a=/[A-z-_ \.\/]+/;return a.test(b)}};var ImageResizer=function(b,a,c){if(!(this instanceof ImageResizer)){return new ImageResizer(b,a,c)}this.original_w=b;this.original_h=a;this.allow_enlarge=c;this.dest_x=0;this.dest_y=0;this.source_x;this.source_y;this.source_w;this.source_h;this.dest_w;this.dest_h};ImageResizer.prototype={resizeToHeight:function(a){var c=a/this.getSourceHeight();var b=this.getSourceWidth()*c;this.resize(b,a);return this},resizeToWidth:function(c){var b=c/this.getSourceWidth();var a=this.getSourceHeight()*b;this.resize(c,a);return this},scale:function(c){var b=this.getSourceWidth()*c/100;var a=this.getSourceHeight()*c/100;this.resize(b,a);return this},resize:function(b,a){if(!this.allow_enlarge){if(b>this.getSourceWidth()||a>this.getSourceHeight()){b=this.getSourceWidth();a=this.getSourceHeight()}}this.source_x=0;this.source_y=0;this.dest_w=b;this.dest_h=a;this.source_w=this.getSourceWidth();this.source_h=this.getSourceHeight();return this},crop:function(d,a){if(!this.allow_enlarge){if(d>this.getSourceWidth()){d=this.getSourceWidth()}if(a>this.getSourceHeight()){a=this.getSourceHeight()}}var b=this.getSourceWidth()/this.getSourceHeight();var e=d/a;if(e<b){this.resizeToHeight(a);var f=(this.getDestWidth()-d)/this.getDestWidth()*this.getSourceWidth();this.source_w=this.getSourceWidth()-f;this.source_x=f/2;this.dest_w=d}else{this.resizeToWidth(d);var c=(this.getDestHeight()-a)/this.getDestHeight()*this.getSourceHeight();this.source_h=this.getSourceHeight()-c;this.source_y=c/2;this.dest_h=a}return this},getSourceWidth:function(){return this.original_w},getSourceHeight:function(){return this.original_h},getDestWidth:function(){return this.dest_w},getDestHeight:function(){return this.dest_h}};var Uploader=function(a,b,c,d){if(!(this instanceof Uploader)){return new Uploader(a,b,c,d)}this.files=a.files;this.acceptedMime=b;this.maxFiles=(typeof c==="undefined"?1:c);this.formObj=new FormData;this.maxFileSize=(typeof d==="undefined"?5000000:d);return this};Uploader.prototype={init:function(){for(var b=0;b<this.files.length;b++){var a=this.files[b];if(in_array(a.type,this.acceptedMime)){this.formObj.append("file[]",a,a.name)}}return this},validateMime:function(){for(var b=0;b<this.files.length;b++){var a=this.files[b];if(!in_array(a.type,this.acceptedMime)){return false}}return true},validateMaxFiles:function(){return this.files.length<=this.maxFiles},validateFileSizes:function(){for(var b=0;b<this.files.length;b++){var a=this.files[b];if(a.size>this.maxFileSize){return false}}return true},append:function(a,b){this.formObj.append(a,b);return this},upload:function(c,f,b,d){var a=this;var e=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");e.open("POST",c,true);e.setRequestHeader("X_REQUESTED_WITH","XMLHttpRequest");e.upload.onprogress=function(h){if(h.lengthComputable){var g=(h.loaded/h.total)*100;if(isCallable(d)){d(g)}}};e.onload=function(){if(e.readyState==4){if(e.status>=200&&e.status<300||e.status===304){var g=e.responseXML||e.responseText;if(isCallable(f)){f(g,e)}}else{if(isCallable(b)){b(e,e.status)}}}};e.send(this.formObj)}};(function(a,b){a.pluralize=b()})(this,function(){function m(q,p){p=(typeof p==="undefined"?2:p);if(p===1){return q}m.word=q;m.lowercase=q.toLowerCase();m.upperCase=q.toUpperCase();m.sentenceCase=b(q);m.casing=g();m.sibilants=["x","s","z","s"];m.vowels=["a","e","i","o","u"];m.consonants=["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"];if(e()){return q}var n=a();if(n){return d(n,m.casing)}if(c(l(m.lowercase,1),m.sibilants)||(l(m.lowercase,2)==="ch")){return d(q+"es",m.casing)}if(c(f(m.lowercase,1),m.vowels)&&l(m.lowercase,1)==="y"){return d(q+"s",m.casing)}if(c(f(m.lowercase,1),m.consonants)&&l(m.lowercase,1)==="y"){return d(j(q,1)+"ies",m.casing)}if(c(f(m.lowercase,1),m.consonants)&&l(m.lowercase,1)==="o"){return d(q+"s",m.casing)}if(c(f(m.lowercase,1),m.vowels)&&l(m.lowercase,1)==="o"){return d(q+"s",m.casing)}if(l(m.lowercase,4)==="ness"||l(m.lowercase,3)==="ess"){return q}var o=k(m.lowercase);if(o){return d(j(q,o[0])+o[1],m.casing)}return q+"s"}function e(){var n=["sheep","fish","deer","series","species","money","rice","information","equipment","bison","buffalo","duck","pike","plankton","salmon","squid","swine","trout","moose","aircraft","you","pants","shorts","eyeglasses","scissors","offspring","eries","premises","kudos","corps","heep"];return c(m.lowercase,n)}function a(){var n={addendum:"addenda",alga:"algae",alumna:"alumnae",alumnus:"alumni",analysis:"analyses",antenna:"antennae",apparatus:"apparatuses",appendix:"appendices",axis:"axes",bacillus:"bacilli",bacterium:"bacteria",basis:"bases",beau:"beaux",kilo:"kilos",bureau:"bureaus",bus:"busses",cactus:"cacti",calf:"calves",child:"children",corps:"corps",corpus:"corpora",crisis:"crises",criterion:"criteria",curriculum:"curricula",datum:"data",deer:"deer",die:"dice",dwarf:"dwarves",diagnosis:"diagnoses",echo:"echoes",elf:"elves",ellipsis:"ellipses",embargo:"embargoes",emphasis:"emphases",erratum:"errata",fireman:"firemen",fish:"fish",focus:"focuses",foot:"feet",formula:"formulas",fungus:"fungi",genus:"genera",goose:"geese",half:"halves",hero:"heroes",hippopotamus:"hippopotami",hoof:"hooves",hypothesis:"hypotheses",index:"indices",knife:"knives",leaf:"leaves",life:"lives",loaf:"loaves",louse:"lice",man:"men",matrix:"matrices",means:"means",medium:"media",memorandum:"memoranda",millennium:"millenniums",moose:"moose",mosquito:"mosquitoes",mouse:"mice",nebula:"nebulae",neurosis:"neuroses",nucleus:"nuclei",neurosis:"neuroses",nucleus:"nuclei",oasis:"oases",octopus:"octopi",ovum:"ova",ox:"oxen",paralysis:"paralyses",parenthesis:"parentheses",person:"people",phenomenon:"phenomena",potato:"potatoes",radius:"radii",scarf:"scarfs",self:"selves",series:"series",sheep:"sheep",shelf:"shelves",scissors:"scissors",species:"species",stimulus:"stimuli",stratum:"strata",syllabus:"syllabi",symposium:"symposia",synthesis:"syntheses",synopsis:"synopses",tableau:"tableaux",that:"those",thesis:"theses",thief:"thieves","this":"these",tomato:"tomatoes",tooth:"teeth",torpedo:"torpedoes",vertebra:"vertebrae",veto:"vetoes",vita:"vitae",watch:"watches",wife:"wives",wolf:"wolves",woman:"women",is:"are",was:"were",he:"they",she:"they",i:"we",zero:"zeroes"};if(h(n[m.lowercase])){return n[m.lowercase]}return false}function k(){var o=l(m.lowercase,1);var n=l(m.lowercase,2);var p=l(m.lowercase,3);if(l(m.lowercase,4)==="zoon"){return[4,"zoa"]}if(p==="eau"){return[3,"eaux"]}if(p==="ieu"){return[3,"ieux"]}if(p==="ion"){return[3,"ia"]}if(p==="oof"){return[3,"ooves"]}if(n==="an"){return[2,"en"]}if(n==="ch"){return[2,"ches"]}if(n==="en"){return[2,"ina"]}if(n==="ex"){return[2,"exes"]}if(n==="is"){return[2,"ises"]}if(n==="ix"){return[2,"ices"]}if(n==="nx"){return[2,"nges"]}if(n==="nx"){return[2,"nges"]}if(n==="fe"){return[2,"ves"]}if(n==="on"){return[2,"a"]}if(n==="sh"){return[2,"shes"]}if(n==="um"){return[2,"a"]}if(n==="us"){return[2,"i"]}if(n==="x"){return[1,"xes"]}if(n==="y"){return[1,"ies"]}if(o==="a"){return[1,"ae"]}if(o==="o"){return[1,"oes"]}if(o==="f"){return[1,"ves"]}return false}function g(){var n="toLowerCase";n=m.lowercase===m.word?"lower":n;n=m.upperCase===m.word?"upper":n;n=m.sentenceCase===m.word?"sentence":n;return n}function d(o,n){if(n==="lower"){return o.toLowerCase()}if(n==="upper"){return o.toUpperCase()}if(n==="sentence"){return b(o)}return o}function l(o,n){return o.substr(o.length-n)}function f(o,n){return o.split("").reverse().join("").charAt(n)}function j(o,n){return o.substring(0,o.length-n)}function b(n){return n.charAt(0).toUpperCase()+n.slice(1)}function c(r,q,p){var o="",n=!!p;if(n){for(o in q){if(q[o]===r){return true}}}else{for(o in q){if(q[o]==r){return true}}}return false}function h(){var o=arguments,n=o.length,p=0,q;if(n===0){throw new Error("Empty isset")}while(p!==n){if(o[p]===q||o[p]===null){return false}p++}return true}return m});function encrypt(a,e){var d="";for(var c=0;c<strlen(a);c++){var f=_substr(a,c,1);var b=_substr(e,(c%strlen(e))-1,1);var f=chr(ord(f)+ord(b));d+=f}return encode_base64(d)}function decrypt(a,e){var d="";var a=decode_base64(a);for(var c=0;c<strlen(a);c++){var f=_substr(a,c,1);var b=_substr(e,(c%strlen(e))-1,1);var f=chr(ord(f)-ord(b));d+=f}return d}function encode_base64(a){var b=base64_encode(a);return strtr(b,"+/","-_")}function decode_base64(a){var b=strtr(a,"-_","+/");return base64_decode(b)}function base64_encode(j){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var d,c,b,n,m,l,k,o,h=0,p=0,g="",f=[];if(!j){return j}do{d=j.charCodeAt(h++);c=j.charCodeAt(h++);b=j.charCodeAt(h++);o=d<<16|c<<8|b;n=o>>18&63;m=o>>12&63;l=o>>6&63;k=o&63;f[p++]=e.charAt(n)+e.charAt(m)+e.charAt(l)+e.charAt(k)}while(h<j.length);g=f.join("");var a=j.length%3;return(a?g.slice(0,a-3):g)+"===".slice(a||3)}function base64_decode(h){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var c,b,a,m,l,k,j,n,g=0,o=0,e="",f=[];if(!h){return h}h+="";do{m=d.indexOf(h.charAt(g++));l=d.indexOf(h.charAt(g++));k=d.indexOf(h.charAt(g++));j=d.indexOf(h.charAt(g++));n=m<<18|l<<12|k<<6|j;c=n>>16&255;b=n>>8&255;a=n&255;if(k==64){f[o++]=String.fromCharCode(c)}else{if(j==64){f[o++]=String.fromCharCode(c,b)}else{f[o++]=String.fromCharCode(c,b,a)}}}while(g<h.length);e=f.join("");return e.replace(/\0+$/,"")}function strtr(m,p,q){var k="",f=0,e=0,d=0,b=0,c=false,r="",h="",a="";var o=[];var n=[];var l="";var g=false;if(typeof p==="object"){c=this.ini_set("phpjs.strictForIn",false);p=this.krsort(p);this.ini_set("phpjs.strictForIn",c);for(k in p){if(p.hasOwnProperty(k)){o.push(k);n.push(p[k])}}p=o;q=n}d=m.length;b=p.length;r=typeof p==="string";h=typeof q==="string";for(f=0;f<d;f++){g=false;if(r){a=m.charAt(f);for(e=0;e<b;e++){if(a==p.charAt(e)){g=true;break}}}else{for(e=0;e<b;e++){if(m._substr(f,p[e].length)==p[e]){g=true;f=(f+p[e].length)-1;break}}}if(g){l+=h?q.charAt(e):q[e]}else{l+=m.charAt(f)}}return l}function strlen(a){var f=a+"";var b=0,c="",d=0;if(!this.php_js||!this.php_js.ini||!this.php_js.ini["unicode.semantics"]||this.php_js.ini["unicode.semantics"].local_value.toLowerCase()!=="on"){return a.length}var e=function(l,g){var k=l.charCodeAt(g);var h="",j="";if(55296<=k&&k<=56319){if(l.length<=(g+1)){throw"High surrogate without following low surrogate"}h=l.charCodeAt(g+1);if(56320>h||h>57343){throw"High surrogate without following low surrogate"}return l.charAt(g)+l.charAt(g+1)}else{if(56320<=k&&k<=57343){if(g===0){throw"Low surrogate without preceding high surrogate"}j=l.charCodeAt(g-1);if(55296>j||j>56319){throw"Low surrogate without preceding high surrogate"}return false}}return l.charAt(g)};for(b=0,d=0;b<f.length;b++){if((c=e(f,b))===false){continue}d++}return d}function _substr(k,a,g){var f=0,c=true,m=0,b=0,j=0,h="";k+="";var e=k.length;this.php_js=this.php_js||{};this.php_js.ini=this.php_js.ini||{};switch((this.php_js.ini["unicode.semantics"]&&this.php_js.ini["unicode.semantics"].local_value.toLowerCase())){case"on":for(f=0;f<k.length;f++){if(/[\uD800-\uDBFF]/.test(k.charAt(f))&&/[\uDC00-\uDFFF]/.test(k.charAt(f+1))){c=false;break}}if(!c){if(a<0){for(f=e-1,m=(a+=e);f>=m;f--){if(/[\uDC00-\uDFFF]/.test(k.charAt(f))&&/[\uD800-\uDBFF]/.test(k.charAt(f-1))){a--;m--}}}else{var d=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;while((d.exec(k))!=null){var l=d.lastIndex;if(l-2<a){a++}else{break}}}if(a>=e||a<0){return false}if(g<0){for(f=e-1,b=(e+=g);f>=b;f--){if(/[\uDC00-\uDFFF]/.test(k.charAt(f))&&/[\uD800-\uDBFF]/.test(k.charAt(f-1))){e--;b--}}if(a>e){return false}return k.slice(a,e)}else{j=a+g;for(f=a;f<j;f++){h+=k.charAt(f);if(/[\uD800-\uDBFF]/.test(k.charAt(f))&&/[\uDC00-\uDFFF]/.test(k.charAt(f+1))){j++}}return h}break}case"off":default:if(a<0){a+=e}e=typeof g==="undefined"?e:(g<0?g+e:g+a);return a>=k.length||a<0||a>e?!1:k.slice(a,e)}return undefined}function chr(a){if(a>65535){a-=65536;return String.fromCharCode(55296+(a>>10),56320+(a&1023))}return String.fromCharCode(a)}function ord(c){var e=c+"",d=e.charCodeAt(0);if(55296<=d&&d<=56319){var b=d;if(e.length===1){return d}var a=e.charCodeAt(1);return((b-55296)*1024)+(a-56320)+65536}if(56320<=d&&d<=57343){return d}return d}var GLOBAL_PUBLIC_KEY="";var GLOBAL_AJAX_ENABLED=false;var GLOBAL_AJAX_URL=window.location.href.replace(/admin(.+)/,"admin/");var GLOBAL_AJAX_QUEUE=[];function queueAjax(b,c,d,e,a){GLOBAL_AJAX_QUEUE.push({url:b,type:c.toLowerCase(),data:d,success:e,error:a})}function bufferAjaxQueue(){for(var a=0;a<GLOBAL_AJAX_QUEUE.length;a++){var c=GLOBAL_AJAX_QUEUE[a];var b=c.type;c.data["public_key"]=GLOBAL_PUBLIC_KEY;Ajax[b](c.url,c.data,c.success,c.error)}}Ajax.post(GLOBAL_AJAX_URL,{ajaxRequest:"public_key"},function(a){response=isJSON(a);if(response){GLOBAL_AJAX_ENABLED=true;GLOBAL_PUBLIC_KEY=decrypt(response.details.k,response.details.s);bufferAjaxQueue()}});var GLOBAL_PROGRESS=$(".js-global-progress .progress");(function(){var b=$All("form.ajax-form button.submit");if(nodeExists($("form.ajax-form button.submit"))){for(var a=0;a<b.length;a++){c(a)}}function c(d){b[d].addEventListener("click",function(f){f.preventDefault()})}}());function clearAjaxInputErrors(e){var c=$All("input",e);var a=$("button.submit",e);var b=$(".form-result",e);var d=$All(".animated",e);hideInputErrors(c);addClass(a,"active");if(nodeExists(b)){b.className="form-result"}removeClassNodeList(d,"animated")}function showAjaxInputErrors(a,b){showInputErrors(a);removeClass($("button.submit",b),"active")}function showAjaxFormResult(c,a,b){if(typeof b!=="undefined"){var d=$(".form-result .message."+a+" .message-body p",c);if(nodeExists(d)){d.innerHTML=b}}removeClass($("button.submit",c),"active");addClass($(".form-result",c),a);addClass($(".form-result .message."+a,c),"animated")}function showInputErrors(a){for(var b=0;b<a.length;b++){addClass(a[b].parentNode,"error")}}function hideInputErrors(a){for(var b=0;b<a.length;b++){removeClass(a[b].parentNode,"error")}}(function(){var b=function(c){if(!(this instanceof b)){return new b(c)}this.currentPage=1;this.maxPages=1;this.sortBy="newest";this.expanded=false;this.search=false;this.haveItems=false;this.node_list_listwrap=c;this.node_list_list=$(".js-ajax-list",this.node_list_listwrap);this.node_list_itemPublish=[];this.node_list_itemUnpublish=[];this.node_list_itemDeletes=[];this.node_list_powersWrap=$(".js-list-powers",this.node_list_listwrap);this.node_list_powers_checkAll=$(".js-check-all",this.node_list_powersWrap);this.node_list_powers_searchInput=$(".js-search-input",this.node_list_powersWrap);this.node_list_powers_cancelSearch=$(".js-cancel-search",this.node_list_powersWrap);this.node_list_powers_expandList=$(".js-expand-list",this.node_list_powersWrap);this.node_list_powers_sortOptions=$All(".js-sort-list .drop a",this.node_list_powersWrap);this.node_list_powers_publish=$(".js-publish",this.node_list_powersWrap);this.node_list_powers_delete=$(".js-delete",this.node_list_powersWrap);this.node_list_powers_unpublish=$(".js-unpublish",this.node_list_powersWrap);this.node_list_nav_navWrap=$(".js-list-nav",this.node_list_listwrap);this.node_list_nav_pageInput=$(".js-current-page",this.node_list_nav_navWrap);this.node_list_nav_maxPages=$(".js-max-pages",this.node_list_nav_navWrap);this.node_list_nav_nextPage=$(".js-next",this.node_list_nav_navWrap);this.node_list_nav_prevPage=$(".js-prev",this.node_list_nav_navWrap);this.node_list_items=[];this.have_items=!empty(this.node_list_items);this.node_list_expandItem=[];this.node_list_collapseItems=[];return this};b.prototype={init:function(){var d=this;var c=this.getListForm();makeLoading(this.node_list_list,true,300);queueAjax(GLOBAL_AJAX_URL,"POST",c,function(e){d.dispatchList(e);d.addDynamicListeners()},function(e){d.handleError()});this.initializeListeners()},getListForm:function(){this.currentPage=parseInt(this.node_list_nav_pageInput.value.trim());this.search=(this.node_list_powers_searchInput.value.trim()===""?false:this.node_list_powers_searchInput.value.trim());return{search:this.search,page:this.currentPage,sortBy:this.sortBy,ajaxRequest:this.node_list_list.dataset.listName,public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href}},getItemActionForm:function(d,c){return{article_ids:c,ajaxRequest:d,public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href}},getCheckedItems:function(){var f=[];if(this.have_items){var e=$All(".js-item-check",this.node_list_list);for(var d=0;d<e.length;d++){var c=e[d];if(c.checked==true){f.push(parentUntillClass(c,"js-item").dataset.articleId)}}}return f},initializeListeners:function(){var e=this;VMasker(this.node_list_nav_pageInput).maskNumber();this.node_list_nav_pageInput.addEventListener("keyup",function(f){e.skipToPage(f)});this.node_list_powers_checkAll.addEventListener("change",function(){var f=event.target.checked;if(f&&e.haveItems){e.checkAll()}else{e.uncheckAll()}});this.node_list_powers_searchInput.addEventListener("keyup",function(f){e.initSearch(f)});this.node_list_powers_searchInput.addEventListener("blur",function(f){if(e.node_list_powers_searchInput.value.trim()===""&&e.search!==false){e.clearSearch()}});this.node_list_powers_cancelSearch.addEventListener("click",function(f){f.preventDefault();e.node_list_powers_searchInput.value="";if(e.search!==false){e.clearSearch()}});for(var c=0;c<this.node_list_powers_sortOptions.length;c++){var d=this.node_list_powers_sortOptions[c];d.addEventListener("click",function(){var f=event.target.dataset.sort;if(f!==e.sortBy){e.sortBy=f;e.refreshList()}})}this.node_list_powers_expandList.addEventListener("click",function(g){g.preventDefault();var f=$All(".js-item",e.node_list_list);if(!empty(f)){if(e.expanded===false){e.expandList(f);e.expanded=true;e.node_list_powers_expandList.innerText="Collapse"}else{e.collapseList(f);e.expanded=false;e.node_list_powers_expandList.innerText="Expand"}}});this.node_list_powers_publish.addEventListener("click",function(){event.preventDefault();var f=e.getCheckedItems();if(!empty(f)){var g=e.getItemActionForm("admin_publish_articles",f);var h=e.getArticleTitles(g.article_ids);e.confirmItemAction(g,"publish",h)}});this.node_list_powers_delete.addEventListener("click",function(){event.preventDefault();var f=e.getCheckedItems();if(!empty(f)){var g=e.getItemActionForm("admin_delete_articles",f);var h=e.getArticleTitles(g.article_ids);e.confirmItemAction(g,"delete",h)}});this.node_list_powers_unpublish.addEventListener("click",function(){event.preventDefault();var f=e.getCheckedItems();if(!empty(f)){var g=e.getItemActionForm("admin_unpublish_articles",f);var h=e.getArticleTitles(g.article_ids);e.confirmItemAction(g,"draft",h)}});this.node_list_nav_nextPage.addEventListener("click",function(){event.preventDefault();e.skipToPage(e.currentPage+1)});this.node_list_nav_prevPage.addEventListener("click",function(){event.preventDefault();e.skipToPage(e.currentPage-1)})},addDynamicListeners:function(){var j=this;this.node_list_items=$All(".js-item",this.node_list_listwrap);this.have_items=!empty(this.node_list_items);this.node_list_expandItem=$All(".js-expand-item",this.node_list_listwrap);this.node_list_collapseItems=$All(".js-collapse-item",this.node_list_listwrap);this.node_list_itemPublish=$All(".js-item-publish",this.node_list_listwrap);this.node_list_itemUnpublish=$All(".js-item-unpublish",this.node_list_listwrap);this.node_list_itemDeletes=$All(".js-item-delete",this.node_list_listwrap);if(this.have_items){for(var n=0;n<this.node_list_expandItem.length;n++){var p=this.node_list_expandItem[n];p.addEventListener("click",function(){event.preventDefault();var c=parentUntillClass(event.target,"js-item");addClass(c,"expanded")})}}if(this.have_items){for(var m=0;m<this.node_list_collapseItems.length;m++){var o=this.node_list_collapseItems[m];o.addEventListener("click",function(){event.preventDefault();var c=parentUntillClass(event.target,"js-item");removeClass(c,"expanded")})}}if(this.have_items){for(var l=0;l<this.node_list_itemPublish.length;l++){var g=this.node_list_itemPublish[l];g.addEventListener("click",function(){event.preventDefault();var e=closest(event.target,"a");var d=parentUntillClass(event.target,"js-item");var c=j.getItemActionForm("admin_publish_articles",[d.dataset.articleId]);var f=[d.dataset.articleTitle];if(!hasClass(e.parentNode,"disabled")){j.confirmItemAction(c,"publish",f)}})}}if(this.have_items){for(var k=0;k<this.node_list_itemUnpublish.length;k++){var g=this.node_list_itemUnpublish[k];g.addEventListener("click",function(){event.preventDefault();var e=closest(event.target,"a");var d=parentUntillClass(event.target,"js-item");var c=j.getItemActionForm("admin_unpublish_articles",[d.dataset.articleId]);var f=[d.dataset.articleTitle];if(!hasClass(e.parentNode,"disabled")){j.confirmItemAction(c,"draft",f)}})}}if(this.have_items){for(var h=0;h<this.node_list_itemDeletes.length;h++){var g=this.node_list_itemDeletes[h];g.addEventListener("click",function(){event.preventDefault();var e=closest(event.target,"a");var d=parentUntillClass(event.target,"js-item");var c=j.getItemActionForm("admin_delete_articles",[d.dataset.articleId]);var f=[d.dataset.articleTitle];if(!hasClass(e.parentNode,"disabled")){j.confirmItemAction(c,"delete",f)}})}}},getArticleTitles:function(d){var f=[];for(var c=0;c<d.length;c++){var e=$('[data-article-id="'+d[c]+'"]',this.node_list_list);if(nodeExists(e)){f.push(e.dataset.articleTitle)}}return f},checkAll:function(){var c=$All(".js-item-select input[type='checkbox']",this.node_list_list);if(!empty(c)){for(var d=0;d<c.length;d++){c[d].checked=true}}},uncheckAll:function(){var c=$All(".js-item-select input[type='checkbox']",this.node_list_list);if(!empty(c)&&this.haveItems){for(var d=0;d<c.length;d++){c[d].checked=false}}this.node_list_powers_checkAll.checked=false},expandList:function(c){for(var d=0;d<c.length;d++){addClass(c[d],"expanded")}},collapseList:function(c){for(var d=0;d<c.length;d++){removeClass(c[d],"expanded")}},initSearch:function(d){if(typeof d==="string"){var c=d;this.node_list_powers_searchInput.value=c;addClass(this.node_list_powers_searchInput.parentNode,"active");this.search=c;this.currentPage=1;this.maxPages=1;this.node_list_nav_pageInput.value=1;triggerEvent(this.node_list_tabClickers[0],"click");return}var c=this.node_list_powers_searchInput.value.trim();if(c===""&&d.keyCode==13&&this.search!==false){this.clearSearch();return}addClass(this.node_list_powers_searchInput.parentNode,"active");if(d.keyCode==13){this.search=c;this.refreshList()}},clearSearch:function(){removeClass(this.node_list_powers_searchInput.parentNode,"active");this.search=false;this.refreshList()},skipToPage:function(c){var d=false;if(typeof c==="number"){d=c}else{if(c.keyCode&&c.keyCode==13){d=this.node_list_nav_pageInput.value.trim();d=(d===""?0:d);d=parseInt(d)}}if(d!==false){if(d>this.maxPages||d<1||d===this.currentPage){this.node_list_nav_pageInput.value=this.currentPage}else{this.currentPage=d;this.node_list_nav_pageInput.value=d;this.refreshList()}}},updateNav:function(c){var d=this.currentPage;var e={ajaxRequest:"admin_all_article_pages",public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href};var f=this;Ajax.post(GLOBAL_AJAX_URL,e,function(g){xhr=isJSON(g);f.maxPages=parseInt(xhr.details);f.node_list_nav_maxPages.innerHTML="of "+f.maxPages;if(d>=f.maxPages){addClass(f.node_list_nav_nextPage,"disabled")}else{removeClass(f.node_list_nav_nextPage,"disabled")}if(d>1){removeClass(f.node_list_nav_prevPage,"disabled")}else{addClass(f.node_list_nav_prevPage,"disabled")}},function(g){f.maxPages=1;addClass(f.node_list_nav_nextPage,"disabled");addClass(f.node_list_nav_nextPage,"disabled")})},dispatchList:function(c){c=isJSON(c);console.log(c);if(c&&isset(c.details)&&!empty(c.details)){this.updateNav(c.details);this.uncheckAll();this.haveItems=true;this.insertArticles(c.details[0])}else{this.noList()}},handleError:function(){this.haveItems=false;this.noList()},insertArticles:function(f){var l=this.node_list_list;var m="<tbody>";var k=(this.expanded===true?"expanded":"");undoLoading(l,true);this.node_list_items=$All(".js-item",this.node_list_listwrap);this.have_items=!empty(this.node_list_items);this.node_list_expandItem=$All(".js-expand-item",this.node_list_listwrap);this.node_list_collapseItems=$All(".js-collapse-item",this.node_list_listwrap);this.node_list_itemPublish=$All(".js-item-approve",this.node_list_listwrap);this.node_list_itemUnpublish=$All(".js-item-spam",this.node_list_listwrap);this.node_list_itemDeletes=$All(".js-item-delete",this.node_list_listwrap);for(var g=0;g<f.length;g++){var n=f[g];var o=n.excerpt.length>200;var e=o?'<a href="#" class="more js-expand-item">more</a>':"";var h=o?'<a href="#" class="less js-collapse-item">less</a>':"";var j=n.status==="published"?"disabled":"";var d=n.status==="draft"?"disabled":"";var c=this.createTagsList(n.tags);m+=cleanInnerHTML(['<tr class="article list-item js-item '+n.status+" "+k+'" data-article-title="'+n.title+'" data-article-id="'+n.id+'" data-article-type="'+n.type+'">',"<td>",'<h5 class="title">','<a href="'+n.permalink+'" target="_blank">'+n.title+"</a>","</h5>",'<div class="article-body">','<div class="article-meta">','<span class="article-author">','<span>By </span><a href="'+n.author["permalink"]+'" target="_blank">'+n.author["name"]+"</a>","</span>",'<span class="bullet"> • </span>','<span class="article-category">','<span>In </span><a href="'+n.category["permalink"]+'" target="_blank">'+n.category["name"]+"</a>","</span>",'<span class="bullet"> • </span>','<abbr class="time-ago">',timeAgo(n.created)," ago","</abbr>",'<span class="bullet"> • </span>','<span class="article-category">',"<span>"+ucfirst(n.status)+"</span>","</span>",'<span class="bullet"> • </span>','<span class="article-type">',"<span>"+ucfirst(n.type)+"</span>","</span>",'<div class="clearfix tagslist">',c,"</div>","</div>",'<div class="check-wrap js-item-select">','<input class="js-item-check" id="article-select-'+n.id+'" type="checkbox" name="article-select-'+n.id+'">','<label class="checkbox small mini" for="article-select-'+n.id+'"></label>',"</div>",'<div class="item-preview">',strReduce(n.excerpt,200,"... "),e,"</div>",'<div class="item-full">',n.excerpt+" ",h,"</div>",'<ul class="article-actions js-article-actions">','<li class="js-item-publish publish '+j+'">','<a href="#">','<svg viewBox="0 0 512 512"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#checkmark"></use></svg>',"Publish","</a>","</li>",'<li class="js-item-unpublish unpublish '+d+'">','<a href="#">','<svg viewBox="0 0 500 500"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#file-text"></use></svg>',"Draft","</a>","</li>",'<li class="js-item-delete delete">','<a href="#">','<svg viewBox="0 0 100 100"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#trash"></use></svg>',"Delete","</a>","</li>",'<li class="edit">','<a target="_blank" href="'+n.edit_permalink+'">','<svg viewBox="0 0 100 100"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#pen"></use></svg>',"Edit","</a>","</li>","</ul>","</div>","</td>","</tr>"])}m+="</tbody>";newNode("table","horizontal article-table",null,m,l)},createTagsList:function(d){var g="";var f=d.length;for(var e=0;e<f;e++){var c=d[e];g+=cleanInnerHTML(['<span class="tag">','<a href="'+c.permalink+'" target="_blank">'+c.name+"</a>","</span>"]);if(e<f-1&&f>1){g+='<span class="bullet"> • </span>'}}return g},noList:function(){var c="No articles to display. There are no articles that match this status or search.";undoLoading(this.node_list_list,true);addClass(this.node_list_nav_nextPage,"disabled");addClass(this.node_list_nav_prevPage,"disabled");insertMessage("plain",c,this.node_list_list,"small",true)},refreshList:function(){var c=this.getListForm();var d=this;c.ajaxRequest=this.node_list_list.dataset.listName;makeLoading(this.node_list_list,true,300);if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,c,function(e){d.dispatchList(e);d.addDynamicListeners()},function(e){d.handleError()})}else{this.handleError()}},confirmItemAction:function(g,h,d){if(GLOBAL_AJAX_ENABLED){var j=this;var c=count(g.article_ids);var f=c>1?c+" ":"";var e="Are you POSITIVE you want to "+h+" the following "+f+pluralize("article",c)+":<br>"+implode(d,"• ","<br>");pushCallBackNotification("info",e,ucfirst(h)+" "+pluralize("Article",c),j.actionArticle,[g,h,j],null,null)}else{pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")}},actionArticle:function(){var d=arguments[0][0];var e=arguments[0][1];var f=arguments[0][2];var c=count(d.article_ids);Ajax.post(GLOBAL_AJAX_URL,d,function(g){xhr=isJSON(g);if(e==="publish"){e="published"}if(e==="draft"){e="changed to draft"}if(e==="delete"){e="deleted"}if(xhr){pushNotification("success",c+" "+pluralize("article",c)+"were successfully "+e);f.refreshList()}else{pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")}},function(g){pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")})}};var a=$(".js-ajax-list-wrap.js-articles-wrap");if(nodeExists(a)){b(a).init()}}());(function(){var a=function(c){if(!(this instanceof a)){return new a(c)}this.currentPage=1;this.maxPages=1;this.sortBy="name";this.expanded=false;this.search=false;this.haveItems=false;this.node_list_listwrap=c;this.node_list_list=$(".js-ajax-list",this.node_list_listwrap);this.node_list_itemClears=[];this.node_list_itemEdits=[];this.node_list_itemDeletes=[];this.node_list_itemSaveEdits=[];this.node_list_itemCancelEdits=[];this.node_list_itemSlugInputs=[];this.node_list_powersWrap=$(".js-list-powers",this.node_list_listwrap);this.node_list_powers_checkAll=$(".js-check-all",this.node_list_powersWrap);this.node_list_powers_searchInput=$(".js-search-input",this.node_list_powersWrap);this.node_list_powers_cancelSearch=$(".js-cancel-search",this.node_list_powersWrap);this.node_list_powers_expandList=$(".js-expand-list",this.node_list_powersWrap);this.node_list_powers_sortOptions=$All(".js-sort-list .drop a",this.node_list_powersWrap);this.node_list_powers_delete=$(".js-delete",this.node_list_powersWrap);this.node_list_powers_clear=$(".js-clear",this.node_list_powersWrap);this.node_list_nav_navWrap=$(".js-list-nav",this.node_list_listwrap);this.node_list_nav_pageInput=$(".js-current-page",this.node_list_nav_navWrap);this.node_list_nav_maxPages=$(".js-max-pages",this.node_list_nav_navWrap);this.node_list_nav_nextPage=$(".js-next",this.node_list_nav_navWrap);this.node_list_nav_prevPage=$(".js-prev",this.node_list_nav_navWrap);this.node_list_items=[];this.have_items=!empty(this.node_list_items);this.node_list_expandItem=[];this.node_list_collapseItems=[];return this};a.prototype={init:function(){var d=this;var c=this.getListForm();makeLoading(this.node_list_list,true,300);queueAjax(GLOBAL_AJAX_URL,"POST",c,function(e){d.dispatchList(e);d.addDynamicListeners()},function(e){d.handleError()});this.initializeListeners()},getListForm:function(){this.currentPage=parseInt(this.node_list_nav_pageInput.value.trim());this.search=(this.node_list_powers_searchInput.value.trim()===""?false:this.node_list_powers_searchInput.value.trim());return{search:this.search,page:this.currentPage,sortBy:this.sortBy,ajaxRequest:this.node_list_list.dataset.listName,public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href}},getItemActionForm:function(d,c){return{entries:c,ajaxRequest:d,public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href}},getCheckedItems:function(){var g=[];if(this.have_items){var e=$All(".js-item-check",this.node_list_list);for(var d=0;d<e.length;d++){var c=e[d];if(c.checked==true){var f=parentUntillClass(c,"js-item");g.push({name:f.dataset.tagName,type:f.dataset.tagType,id:f.dataset.tagId})}}}return g},initializeListeners:function(){var e=this;VMasker(this.node_list_nav_pageInput).maskNumber();this.node_list_nav_pageInput.addEventListener("keyup",function(f){e.skipToPage(f)});this.node_list_powers_checkAll.addEventListener("change",function(){var f=event.target.checked;if(f&&e.haveItems){e.checkAll()}else{e.uncheckAll()}});this.node_list_powers_searchInput.addEventListener("keyup",function(f){e.initSearch(f)});this.node_list_powers_searchInput.addEventListener("blur",function(f){if(e.node_list_powers_searchInput.value.trim()===""&&e.search!==false){e.clearSearch()}});this.node_list_powers_cancelSearch.addEventListener("click",function(f){f.preventDefault();e.node_list_powers_searchInput.value="";if(e.search!==false){e.clearSearch()}});for(var c=0;c<this.node_list_powers_sortOptions.length;c++){var d=this.node_list_powers_sortOptions[c];d.addEventListener("click",function(){var f=event.target.dataset.sort;if(f!==e.sortBy){e.sortBy=f;e.refreshList()}})}this.node_list_powers_expandList.addEventListener("click",function(g){g.preventDefault();var f=$All(".js-item",e.node_list_list);if(!empty(f)){if(e.expanded===false){e.expandList(f);e.expanded=true;e.node_list_powers_expandList.innerText="Collapse"}else{e.collapseList(f);e.expanded=false;e.node_list_powers_expandList.innerText="Expand"}}});this.node_list_powers_delete.addEventListener("click",function(){event.preventDefault();var g=e.getCheckedItems();if(!empty(g)){var f=e.getItemActionForm("admin_delete_tags",g);e.confirmItemAction(f,"delete",g)}});this.node_list_powers_clear.addEventListener("click",function(){event.preventDefault();var g=e.getCheckedItems();if(!empty(g)){var f=e.getItemActionForm("admin_clear_tags",g);e.confirmItemAction(f,"clear",g)}});this.node_list_nav_nextPage.addEventListener("click",function(){event.preventDefault();e.skipToPage(e.currentPage+1)});this.node_list_nav_prevPage.addEventListener("click",function(){event.preventDefault();e.skipToPage(e.currentPage-1)})},addDynamicListeners:function(){var p=this;this.node_list_items=$All(".js-item",this.node_list_listwrap);this.have_items=!empty(this.node_list_items);this.node_list_expandItem=$All(".js-expand-item",this.node_list_listwrap);this.node_list_collapseItems=$All(".js-collapse-item",this.node_list_listwrap);this.node_list_itemDeletes=$All(".js-item-delete",this.node_list_listwrap);this.node_list_itemClears=$All(".js-item-clear",this.node_list_listwrap);this.node_list_itemEdits=$All(".js-item-edit",this.node_list_listwrap);this.node_list_itemSaveEdits=$All(".js-save-edit",this.node_list_listwrap);this.node_list_itemCancelEdits=$All(".js-cancel-edit",this.node_list_listwrap);this.node_list_itemSlugInputs=$All("input.js-tag-slug",this.node_list_listwrap);if(this.have_items){for(var t=0;t<this.node_list_expandItem.length;t++){var w=this.node_list_expandItem[t];w.addEventListener("click",function(){event.preventDefault();var c=parentUntillClass(event.target,"js-item");addClass(c,"expanded")})}}if(this.have_items){for(var s=0;s<this.node_list_collapseItems.length;s++){var v=this.node_list_collapseItems[s];v.addEventListener("click",function(){event.preventDefault();var c=parentUntillClass(event.target,"js-item");removeClass(c,"expanded")})}}if(this.have_items){for(var r=0;r<this.node_list_itemClears.length;r++){var m=this.node_list_itemClears[r];m.addEventListener("click",function(){event.preventDefault();var e=closest(event.target,"a");var d=parentUntillClass(event.target,"js-item");var f=[{name:d.dataset.tagName,type:d.dataset.tagType,id:d.dataset.tagId}];var c=p.getItemActionForm("admin_clear_tags",f);if(!hasClass(e.parentNode,"disabled")){p.confirmItemAction(c,"clear",f)}})}}if(this.have_items){for(var q=0;q<this.node_list_itemDeletes.length;q++){var m=this.node_list_itemDeletes[q];m.addEventListener("click",function(){event.preventDefault();var e=closest(event.target,"a");var d=parentUntillClass(event.target,"js-item");var f=[{name:d.dataset.tagName,type:d.dataset.tagType,id:d.dataset.tagId}];var c=p.getItemActionForm("admin_delete_tags",f);if(!hasClass(e.parentNode,"disabled")){p.confirmItemAction(c,"delete",f)}})}}if(this.have_items){for(var o=0;o<this.node_list_itemEdits.length;o++){var m=this.node_list_itemEdits[o];m.addEventListener("click",function(){event.preventDefault();var c=parentUntillClass(event.target,"js-item");if(hasClass(c,"edit")){removeClass(c,"edit")}else{addClass(c,"edit")}})}}if(this.have_items){for(var n=0;n<this.node_list_itemSaveEdits.length;n++){var m=this.node_list_itemSaveEdits[n];m.addEventListener("click",function(){var d=parentUntillClass(event.target,"js-item");var e=[{name:$(".js-tag-name",d).value.trim(),slug:$(".js-tag-slug",d).value.trim(),type:d.dataset.tagType,id:d.dataset.tagId}];var c=p.getItemActionForm("admin_edit_tag",e);if(e[0].name===d.dataset.tagName&&e[0].slug===d.dataset.tagSlug){return}p.ajaxEditTag(c,d)})}}if(this.have_items){for(var l=0;l<this.node_list_itemCancelEdits.length;l++){var m=this.node_list_itemCancelEdits[l];m.addEventListener("click",function(){var c=parentUntillClass(event.target,"js-item");$(".js-tag-name",c).value=c.dataset.tagName;$(".js-tag-slug",c).value=c.dataset.tagSlug;removeClass(c,"edit")})}}if(this.have_items){for(var k=0;k<this.node_list_itemSlugInputs.length;k++){var u=this.node_list_itemSlugInputs[k];VMasker(u).maskAlphaNumDash()}}},checkAll:function(){var c=$All(".js-item-select input[type='checkbox']",this.node_list_list);if(!empty(c)){for(var d=0;d<c.length;d++){c[d].checked=true}}},uncheckAll:function(){var c=$All(".js-item-select input[type='checkbox']",this.node_list_list);if(!empty(c)&&this.haveItems){for(var d=0;d<c.length;d++){c[d].checked=false}}this.node_list_powers_checkAll.checked=false},expandList:function(c){for(var d=0;d<c.length;d++){addClass(c[d],"expanded")}},collapseList:function(c){for(var d=0;d<c.length;d++){removeClass(c[d],"expanded")}},initSearch:function(d){if(typeof d==="string"){var c=d;this.node_list_powers_searchInput.value=c;addClass(this.node_list_powers_searchInput.parentNode,"active");this.search=c;this.currentPage=1;this.maxPages=1;this.node_list_nav_pageInput.value=1;triggerEvent(this.node_list_tabClickers[0],"click");return}var c=this.node_list_powers_searchInput.value.trim();if(c===""&&d.keyCode==13&&this.search!==false){this.clearSearch();return}addClass(this.node_list_powers_searchInput.parentNode,"active");if(d.keyCode==13){this.search=c;this.refreshList()}},clearSearch:function(){removeClass(this.node_list_powers_searchInput.parentNode,"active");this.search=false;this.refreshList()},skipToPage:function(c){var d=false;if(typeof c==="number"){d=c}else{if(c.keyCode&&c.keyCode==13){d=this.node_list_nav_pageInput.value.trim();d=(d===""?0:d);d=parseInt(d)}}if(d!==false){if(d>this.maxPages||d<1||d===this.currentPage){this.node_list_nav_pageInput.value=this.currentPage}else{this.currentPage=d;this.node_list_nav_pageInput.value=d;this.refreshList()}}},updateNav:function(c){var d=this.currentPage;this.maxPages=count(c);this.node_list_nav_maxPages.innerHTML="of "+this.maxPages;if(d>=this.maxPages){addClass(this.node_list_nav_nextPage,"disabled")}else{removeClass(this.node_list_nav_nextPage,"disabled")}if(d>1){removeClass(this.node_list_nav_prevPage,"disabled")}else{addClass(this.node_list_nav_prevPage,"disabled")}},dispatchList:function(c){c=isJSON(c);if(c&&isset(c.details[this.currentPage-1])&&!empty(c.details[this.currentPage-1])){this.updateNav(c.details);this.uncheckAll();this.haveItems=true;this.insertTags(c.details[this.currentPage-1])}else{this.noList()}},handleError:function(){this.haveItems=false;this.noList()},insertTags:function(m){var j=this.node_list_list;var k="<tbody>";var h=(this.expanded===true?"expanded":"");undoLoading(j,true);this.node_list_items=$All(".js-item",this.node_list_listwrap);this.have_items=!empty(this.node_list_items);this.node_list_expandItem=$All(".js-expand-item",this.node_list_listwrap);this.node_list_collapseItems=$All(".js-collapse-item",this.node_list_listwrap);this.node_list_itemClears=$All(".js-item-clear",this.node_list_listwrap);this.node_list_itemEdits=$All(".js-item-edit",this.node_list_listwrap);this.node_list_itemDeletes=$All(".js-item-delete",this.node_list_listwrap);for(var f=0;f<m.length;f++){var n=m[f];var l=count(n.posts)>2;var e=l?'<a href="#" class="more js-expand-item">more</a>':"";var g=l?'<a href="#" class="less js-collapse-item">less</a>':"";var d=this.createPostsList(n.posts);var c=this.createPostsList(arrReduce(n.posts,10));k+=cleanInnerHTML(['<tr class="tag list-item js-item '+h+'" data-tag-id="'+n.id+'" data-tag-name="'+n.name+'" data-tag-slug="'+n.slug+'" data-tag-type="'+n.type+'">',"<td>",'<h5 class="title">','<a href="'+n.permalink+"#tag-"+n.id+'" target="_blank">'+n.name+"</a>","</h5>",'<div class="tag-body">','<span class="tag-meta">','<span class="label">@ </span>','<a href="'+n.permalink+'" >'+n.slug+"</a>",'<span class="bullet"> • </span>','<span class="label">Under </span>',"<strong>"+pluralize(ucfirst(n.type))+"</strong>",'<span class="bullet"> • </span>','<span class="label">With </span>',"<strong>"+count(n.posts)+"</strong> "+pluralize("article",count(n.posts)),"</span>",'<div class="item-preview articles-list">',c+" ",,e,"</div>",'<div class="item-full articles-list">',d+" ",g,"</div>",'<div class="edit-tag js-edit-tag">','<div class="input-wrap clearfix">',"<label>Name:</label>",'<input class="input-default small js-tag-name" value="'+n.name+'" />',"</div>",'<div class="input-wrap clearfix">',"<label>Slug:</label>",'<input class="input-default small js-tag-slug" value="'+n.slug+'" />',"</div>",'<div class="input-wrap">','<button class="button small submit save-edit js-save-edit">Save</button>','<button class="button small cancel js-cancel-edit">Cancel</button>',"</div>","</div>",'<div class="check-wrap js-item-select">','<input class="js-item-check" id="'+n.type+"-select-"+n.id+'" type="checkbox" name="'+n.type+"-select-"+n.id+'">','<label class="checkbox small mini" for="'+n.type+"-select-"+n.id+'"></label>',"</div>",'<ul class="tag-actions js-tag-actions">','<li class="clear-item js-item-clear">','<a href="#">','<svg viewBox="0 0 512 512"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#checkmark"></use></svg>',"Clear","</a>","</li>",'<li class="delete js-item-delete">','<a href="#">','<svg viewBox="0 0 100 100"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#trash"></use></svg>',"Delete","</a>","</li>",'<li class="edit js-item-edit">','<a href="#">','<svg viewBox="0 0 100 100"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#pen"></use></svg>',"Edit","</a>","</li>","</ul>","</div>","</td>","</tr>"])}k+="</tbody>";newNode("table","horizontal tag-table",null,k,j)},createPostsList:function(f){var g='<span class="label">Articles: </span>';var e=f.length;if(e===0){return""}for(var d=0;d<e;d++){var c=f[d];g+=cleanInnerHTML(['<span class="article">','<span class="bullet"> • </span><a href="'+c.permalink+'" target="_blank">'+c.name+"</a>","</span>"])}return g},noList:function(){var c="No tags or categories to display. There are no tags or categories that match this status or search.";undoLoading(this.node_list_list,true);addClass(this.node_list_nav_nextPage,"disabled");addClass(this.node_list_nav_prevPage,"disabled");insertMessage("plain",c,this.node_list_list,"small",true)},refreshList:function(){var c=this.getListForm();var d=this;c.ajaxRequest=this.node_list_list.dataset.listName;makeLoading(this.node_list_list,true,300);if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,c,function(e){d.dispatchList(e);d.addDynamicListeners()},function(e){d.handleError()})}else{this.handleError()}},confirmItemAction:function(e,g,k){if(g==="delete"){for(var h=0;h<k.length;h++){if(k[h].id==="1"){pushNotification("error",'The tag "Untagged" and the category "Uncategorized" cannot be deleted. Make sure they\'re unchecked and try again.');return}}}if(GLOBAL_AJAX_ENABLED){var j=this;var m=this.getTagNames(k);var d=this.getCatNames(k);var n="Are you POSITIVE you want to "+g+" the following ";var c=ucfirst(g);if(count(m)>0){var l=count(m);var f=l>1?l+" ":"";n+=f+pluralize("tag",l)+":<br>"+implode(m,"• ","<br>")}if(count(d)>0){if(count(m)>0){n+="<br>and the following "}var l=count(d);var f=l>1?l+" ":"";n+=f+pluralize("category",l)+":<br>"+implode(d,"• ","<br>")}pushCallBackNotification("info",n,ucfirst(g)+" "+pluralize("Tag",l),j.actionTag,[e,g,j],null,null)}else{pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")}},getTagNames:function(d){var e=[];for(var c=0;c<d.length;c++){if(d[c].type==="tag"){e.push(d[c].name)}}return e},getCatNames:function(d){var e=[];for(var c=0;c<d.length;c++){if(d[c].type==="category"){e.push(d[c].name)}}return e},actionTag:function(){var d=arguments[0][0];var e=arguments[0][1];var f=arguments[0][2];d.entries=JSON.stringify(d.entries);var c=count(d.entries);Ajax.post(GLOBAL_AJAX_URL,d,function(g){xhr=isJSON(g);if(e==="clear"){message="cleared"}if(e==="delete"){e="deleted"}if(xhr){pushNotification("success",c+" "+pluralize("item",c)+"were successfully "+e+".");f.refreshList()}else{pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")}},function(g){pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")})},ajaxEditTag:function(e,d){var f=this;var c=e.entries[0]["type"];e.entries=JSON.stringify(e.entries);Ajax.post(GLOBAL_AJAX_URL,e,function(g){xhr=isJSON(g);if(xhr&&xhr.details===true){pushNotification("success","Your edits to this "+c+" were successfully saved.");f.refreshList()}else{if(xhr&&xhr.details==="slug_exists"){pushNotification("error","Unable to change "+c+" slug. A "+c+" already exists with that slug.")}else{if(xhr&&xhr.details==="name_exists"){pushNotification("error","Unable to change "+c+" name. A "+c+" already exists with that name.")}else{pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")}}}},function(g){pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")})}};var b=$(".js-ajax-list-wrap.js-tags-wrap");if(nodeExists(b)){a(b).init()}}());(function(){var a=function(c){if(!(this instanceof a)){return new a(c)}this.currentPage=1;this.maxPages=1;this.sortBy="newest";this.expanded=false;this.search=false;this.haveItems=false;this.commentClass=false;this.node_list_listwrap=c;this.node_list_list=$(".tab-panel.active.js-ajax-list",this.node_list_listwrap);this.node_list_tabClickers=$All(".js-tabs-wrap ul > li > a",this.node_list_listwrap);this.node_list_itemApproves=[];this.node_list_itemSpams=[];this.node_list_itemDeletes=[];this.node_list_itemSearchIp=[];this.node_list_powersWrap=$(".js-list-powers",this.node_list_listwrap);this.node_list_powers_checkAll=$(".js-check-all",this.node_list_powersWrap);this.node_list_powers_searchInput=$(".js-search-input",this.node_list_powersWrap);this.node_list_powers_cancelSearch=$(".js-cancel-search",this.node_list_powersWrap);this.node_list_powers_expandList=$(".js-expand-list",this.node_list_powersWrap);this.node_list_powers_sortOptions=$All(".js-sort-list .drop a",this.node_list_powersWrap);this.node_list_powers_approve=$(".js-approve",this.node_list_powersWrap);this.node_list_powers_delete=$(".js-delete",this.node_list_powersWrap);this.node_list_powers_spam=$(".js-spam",this.node_list_powersWrap);this.node_list_nav_navWrap=$(".js-list-nav",this.node_list_listwrap);this.node_list_nav_pageInput=$(".js-current-page",this.node_list_nav_navWrap);this.node_list_nav_maxPages=$(".js-max-pages",this.node_list_nav_navWrap);this.node_list_nav_nextPage=$(".js-next",this.node_list_nav_navWrap);this.node_list_nav_prevPage=$(".js-prev",this.node_list_nav_navWrap);this.node_list_items=[];this.have_items=!empty(this.node_list_items);this.node_list_expandItem=[];this.node_list_collapseItems=[];this.node_sidebar_wrap=$(".js-comment-extras");this.node_sidebar_infoWrap=$(".js-comment-extras .js-comment-info");this.node_sidebar_closeInfo=$(".js-close-comment-info",this.node_sidebar_infoWrap);this.node_sidebar_content=$(".js-comment-content",this.node_sidebar_infoWrap);this.node_sidebar_commentStatus=$(".js-comment-status",this.node_sidebar_infoWrap);this.node_sidebar_searchUser=$(".js-search-user",this.node_sidebar_infoWrap);this.node_sidebar_searchEmail=$(".js-search-email",this.node_sidebar_infoWrap);this.node_sidebar_searchIp=$(".js-search-ip",this.node_sidebar_infoWrap);this.node_sidebar_blacklist=$(".js-blacklist",this.node_sidebar_infoWrap).children[0];this.node_sidebar_whitelist=$(".js-whitelist",this.node_sidebar_infoWrap).children[0];this.node_sidebar_avatar=$(".js-avatar",this.node_sidebar_infoWrap);this.node_sidebr_name=$(".js-name",this.node_sidebar_infoWrap);this.node_sidebar_email=$(".js-email",this.node_sidebar_infoWrap);this.node_sidebar_repIcon=$(".js-rep-icon",this.node_sidebar_infoWrap);this.node_sidebar_reputation=$(".js-reputation",this.node_sidebar_infoWrap);this.node_sidebar_fCommentUnit=$(".js-first-comment-unit ",this.node_sidebar_infoWrap);this.node_sidebar_fCommentTime=$(".js-first-comment-time",this.node_sidebar_infoWrap);this.node_sidebar_ipAddress=$(".js-ip-address",this.node_sidebar_infoWrap);this.node_sidebar_commentCount=$(".js-comment-count",this.node_sidebar_infoWrap);this.node_sidebar_spamCount=$(".js-spam-count",this.node_sidebar_infoWrap);this.node_sidebar_commentLink=$(".js-link-to-comment",this.node_sidebar_infoWrap);this.node_sidebar_replyEditWrap=$(".js-comment-edit-reply-wrap",this.node_sidebar_infoWrap);this.node_sidebar_replyEditInput=$(".js-edit-reply-input",this.node_sidebar_infoWrap);this.node_sidebar_open_reply=$(".js-reply",this.node_sidebar_infoWrap);this.node_sidebar_open_save=$(".js-edit",this.node_sidebar_infoWrap);this.node_sidebar_cancelEdit=$(".js-cancel-edit",this.node_sidebar_infoWrap);this.node_sidebar_saveReply=$(".js-save-reply",this.node_sidebar_infoWrap);this.node_sibebar_saveEdit=$(".js-save-edit",this.node_sidebar_infoWrap);return this};a.prototype={init:function(){var d=this;var c=this.getListForm();makeLoading(this.node_list_list,true,300);queueAjax(GLOBAL_AJAX_URL,"POST",c,function(e){d.dispatchList(e);d.addDynamicListeners()},function(e){d.handleError()});this.initializeListeners()},getListForm:function(){this.currentPage=parseInt(this.node_list_nav_pageInput.value.trim());this.search=(this.node_list_powers_searchInput.value.trim()===""?false:this.node_list_powers_searchInput.value.trim());return{search:this.search,page:this.currentPage,sortBy:this.sortBy,ajaxRequest:this.node_list_list.dataset.listName,public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href}},getItemActionForm:function(d,c){return{comment_ids:c,ajaxRequest:d,public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href}},getCheckedItems:function(){var f=[];if(this.have_items){var e=$All(".js-item-check",this.node_list_list);for(var d=0;d<e.length;d++){var c=e[d];if(c.checked==true){f.push(parentUntillClass(c,"js-item").dataset.commentId)}}}return f},initializeListeners:function(){var f=this;VMasker(this.node_list_nav_pageInput).maskNumber();this.node_list_nav_pageInput.addEventListener("keyup",function(g){f.skipToPage(g)});this.node_list_powers_checkAll.addEventListener("change",function(){var g=event.target.checked;if(g&&f.haveItems){f.checkAll()}else{f.uncheckAll()}});this.node_list_powers_searchInput.addEventListener("keyup",function(g){f.initSearch(g)});this.node_list_powers_searchInput.addEventListener("blur",function(g){if(f.node_list_powers_searchInput.value.trim()===""&&f.search!==false){f.clearSearch()}});this.node_list_powers_cancelSearch.addEventListener("click",function(g){g.preventDefault();f.node_list_powers_searchInput.value="";if(f.search!==false){f.clearSearch()}});for(var c=0;c<this.node_list_powers_sortOptions.length;c++){var e=this.node_list_powers_sortOptions[c];e.addEventListener("click",function(){var g=event.target.dataset.sort;if(g!==f.sortBy){f.sortBy=g;f.refreshList()}})}this.node_list_powers_expandList.addEventListener("click",function(h){h.preventDefault();var g=$All(".js-item",f.node_list_list);if(!empty(g)){if(f.expanded===false){f.expandList(g);f.expanded=true;f.node_list_powers_expandList.innerText="Collapse"}else{f.collapseList(g);f.expanded=false;f.node_list_powers_expandList.innerText="Expand"}}});for(var d=0;d<this.node_list_tabClickers.length;d++){this.node_list_tabClickers[d].addEventListener("click",function(){f.node_list_list=$("#"+event.target.dataset.tab,f.node_list_listwrap);f.currentPage=1;f.maxPages=1;f.node_list_nav_pageInput.value=1;f.refreshList()})}this.node_sidebar_closeInfo.addEventListener("click",function(){event.preventDefault();removeClass(f.node_sidebar_wrap,"active")});this.node_sidebar_open_reply.addEventListener("click",function(){event.preventDefault();addClass(f.node_sidebar_replyEditWrap,"reply");removeClass(f.node_sidebar_replyEditWrap,"edit");f.node_sidebar_replyEditInput.value="";f.node_sidebar_replyEditInput.focus()});this.node_sidebar_open_save.addEventListener("click",function(){event.preventDefault();addClass(f.node_sidebar_replyEditWrap,"edit");removeClass(f.node_sidebar_replyEditWrap,"reply");f.node_sidebar_replyEditInput.value=f.node_sidebar_content.dataset.content;f.node_sidebar_replyEditInput.focus()});this.node_sidebar_cancelEdit.addEventListener("click",function(){event.preventDefault();removeClass(f.node_sidebar_replyEditWrap,"edit");removeClass(f.node_sidebar_replyEditWrap,"reply")});this.node_sidebar_saveReply.addEventListener("click",function(){f.saveReply()});this.node_sibebar_saveEdit.addEventListener("click",function(){f.saveEdit()});this.node_list_powers_approve.addEventListener("click",function(){event.preventDefault();var g=f.getCheckedItems();if(!empty(g)){var h=f.getItemActionForm("admin_approve_comments",g);f.confirmItemAction(h,"approve")}});this.node_list_powers_delete.addEventListener("click",function(){event.preventDefault();var g=f.getCheckedItems();if(!empty(g)){var h=f.getItemActionForm("admin_delete_comments",g);f.confirmItemAction(h,"delete")}});this.node_list_powers_spam.addEventListener("click",function(){event.preventDefault();var g=f.getCheckedItems();if(!empty(g)){var h=f.getItemActionForm("admin_spam_comments",g);f.confirmItemAction(h,"spam")}});this.node_sidebar_searchUser.addEventListener("click",function(){f.initSearch("user:"+f.node_sidebar_searchUser.dataset.search)});this.node_sidebar_searchIp.addEventListener("click",function(){f.initSearch("ip:"+f.node_sidebar_searchIp.dataset.search)});this.node_sidebar_searchEmail.addEventListener("click",function(){f.initSearch("email:"+f.node_sidebar_searchEmail.dataset.search)});this.node_sidebar_blacklist.addEventListener("click",function(){event.preventDefault();if(!hasClass(f.node_sidebar_blacklist,"active")){f.confirmModerateIpAddress("blacklist")}else{f.confirmModerateIpAddress("nolist")}});this.node_sidebar_whitelist.addEventListener("click",function(){event.preventDefault();if(!hasClass(f.node_sidebar_whitelist,"active")){f.confirmModerateIpAddress("whitelist")}else{f.confirmModerateIpAddress("nolist")}});this.node_list_nav_nextPage.addEventListener("click",function(){event.preventDefault();f.skipToPage(f.currentPage+1)});this.node_list_nav_prevPage.addEventListener("click",function(){event.preventDefault();f.skipToPage(f.currentPage-1)})},addDynamicListeners:function(){var l=this;this.node_list_items=$All(".js-item",this.node_list_listwrap);this.have_items=!empty(this.node_list_items);this.node_list_expandItem=$All(".js-expand-item",this.node_list_listwrap);this.node_list_collapseItems=$All(".js-collapse-item",this.node_list_listwrap);this.node_list_itemApproves=$All(".js-item-approve",this.node_list_listwrap);this.node_list_itemSpams=$All(".js-item-spam",this.node_list_listwrap);this.node_list_itemDeletes=$All(".js-item-delete",this.node_list_listwrap);this.node_list_itemSearchIp=$All(".js-item-search-ip",this.node_list_listwrap);if(this.have_items){for(var r=0;r<this.node_list_items.length;r++){var t=this.node_list_items[r];t.addEventListener("click",function(){l.requestInfo(event.target)})}}if(this.have_items){for(var p=0;p<this.node_list_expandItem.length;p++){var s=this.node_list_expandItem[p];s.addEventListener("click",function(){event.preventDefault();var c=parentUntillClass(event.target,"js-item");addClass(c,"expanded")})}}if(this.have_items){for(var o=0;o<this.node_list_collapseItems.length;o++){var q=this.node_list_collapseItems[o];q.addEventListener("click",function(){event.preventDefault();var c=parentUntillClass(event.target,"js-item");removeClass(c,"expanded")})}}if(this.have_items){for(var n=0;n<this.node_list_itemApproves.length;n++){var h=this.node_list_itemApproves[n];h.addEventListener("click",function(){event.preventDefault();var e=closest(event.target,"a");var d=parentUntillClass(event.target,"js-item");var c=l.getItemActionForm("admin_approve_comments",[d.dataset.commentId]);if(!hasClass(e.parentNode,"disabled")){l.confirmItemAction(c,"approve")}})}}if(this.have_items){for(var m=0;m<this.node_list_itemSpams.length;m++){var h=this.node_list_itemSpams[m];h.addEventListener("click",function(){event.preventDefault();var e=closest(event.target,"a");var d=parentUntillClass(event.target,"js-item");var c=l.getItemActionForm("admin_spam_comments",[d.dataset.commentId]);if(!hasClass(e.parentNode,"disabled")){l.confirmItemAction(c,"spam")}})}}if(this.have_items){for(var k=0;k<this.node_list_itemDeletes.length;k++){var h=this.node_list_itemDeletes[k];h.addEventListener("click",function(){event.preventDefault();var e=closest(event.target,"a");var d=parentUntillClass(event.target,"js-item");var c=l.getItemActionForm("admin_delete_comments",[d.dataset.commentId]);if(!hasClass(e.parentNode,"disabled")){l.confirmItemAction(c,"delete")}})}}if(this.have_items){for(var j=0;j<this.node_list_itemSearchIp.length;j++){var h=this.node_list_itemSearchIp[j];h.addEventListener("click",function(){event.preventDefault();var c=closest(event.target,"a");l.initSearch("ip:"+c.innerHTML.trim())})}}},checkAll:function(){var c=$All(".js-item-select input[type='checkbox']",this.node_list_list);if(!empty(c)){for(var d=0;d<c.length;d++){c[d].checked=true}}},uncheckAll:function(){var c=$All(".js-item-select input[type='checkbox']",this.node_list_list);if(!empty(c)&&this.haveItems){for(var d=0;d<c.length;d++){c[d].checked=false}}this.node_list_powers_checkAll.checked=false},expandList:function(c){for(var d=0;d<c.length;d++){addClass(c[d],"expanded")}},collapseList:function(c){for(var d=0;d<c.length;d++){removeClass(c[d],"expanded")}},initSearch:function(d){if(typeof d==="string"){var c=d;this.node_list_powers_searchInput.value=c;addClass(this.node_list_powers_searchInput.parentNode,"active");this.search=c;this.currentPage=1;this.maxPages=1;this.node_list_nav_pageInput.value=1;triggerEvent(this.node_list_tabClickers[0],"click");return}var c=this.node_list_powers_searchInput.value.trim();if(c===""&&d.keyCode==13&&this.search!==false){this.clearSearch();return}addClass(this.node_list_powers_searchInput.parentNode,"active");if(d.keyCode==13){this.search=c;this.refreshList()}},clearSearch:function(){removeClass(this.node_list_powers_searchInput.parentNode,"active");this.search=false;this.refreshList()},skipToPage:function(c){var d=false;if(typeof c==="number"){d=c}else{if(c.keyCode&&c.keyCode==13){d=this.node_list_nav_pageInput.value.trim();d=(d===""?0:d);d=parseInt(d)}}if(d!==false){if(d>this.maxPages||d<1||d===this.currentPage){this.node_list_nav_pageInput.value=this.currentPage}else{this.currentPage=d;this.node_list_nav_pageInput.value=d;this.refreshList()}}},updateNav:function(c){var d=this.currentPage;this.maxPages=count(c);this.node_list_nav_maxPages.innerHTML="of "+this.maxPages;if(d>=this.maxPages){addClass(this.node_list_nav_nextPage,"disabled")}else{removeClass(this.node_list_nav_nextPage,"disabled")}if(d>1){removeClass(this.node_list_nav_prevPage,"disabled")}else{addClass(this.node_list_nav_prevPage,"disabled")}},dispatchList:function(c){c=isJSON(c);if(c&&isset(c.details[this.currentPage-1])&&!empty(c.details[this.currentPage-1])){this.updateNav(c.details);this.uncheckAll();this.haveItems=true;this.insertComments(c.details[this.currentPage-1])}else{this.noList()}},handleError:function(){this.haveItems=false;this.noList()},insertComments:function(j){var l=this.node_list_list;var m="<tbody>";var k=(this.expanded===true?"expanded":"");undoLoading(l,true);for(var e=0;e<j.length;e++){var g=j[e];var o=g.content.length>200;var d=o?'<a href="#" class="more js-expand-item">more</a>':"";var f=o?'<a href="#" class="less js-collapse-item">less</a>':"";var h=g.status==="approved"?"disabled":"";var n=g.status==="spam"?"disabled":"";var c=g.status==="deleted"?"disabled":"";m+=cleanInnerHTML(['<tr class="comment list-item js-item '+g.status+" "+k+'" data-comment-id="'+g.id+'">',"<td>",'<h5 class="title">','<a href="'+g.permalink+"#comment-"+g.id+'" target="_blank">'+g.title+"</a>","</h5>",'<div class="avatar">','<img src="'+g.avatar+'" width="42" height="42" />',"</div>",'<div class="comment-body">','<div class="comment-meta">','<span class="comment-name">',g.name,"</span>",'<span class="bullet">•</span>','<a href="'+g.permalink+"#comment-"+g.id+'" target="_blank">','<abbr class="time-ago">',timeAgo(g.date)," ago","</abbr>","</a>",'<span class="right">','<span class="comment-author-info">'+g.email+"</span>",'<span class="bullet">•</span>','<span><a class="js-item-search-ip" href="#">'+g.ip_address+"</a></span>","</span>","</div>",'<div class="check-wrap js-item-select">','<input class="js-item-check" id="comment-select-'+g.id+'" type="checkbox" name="comment-select-'+g.id+'">','<label class="checkbox small mini" for="comment-select-'+g.id+'"></label>',"</div>",'<div class="item-preview">',strReduce(g.html_content,200,"..."),d,"</div>",'<div class="item-full">',g.html_content,f,"</div>",'<ul class="comment-actions js-comment-actions">','<li class="js-item-approve approve '+h+'">','<a href="#">','<svg viewBox="0 0 512 512"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#checkmark"></use></svg>',"Approve","</a>","</li>",'<li class="js-item-spam spam '+n+'">','<a href="#">','<svg viewBox="0 0 512 512"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#blocked"></use></svg>',"Spam","</a>","</li>",'<li class="js-item-delete delete '+c+'">','<a href="#">','<svg viewBox="0 0 100 100"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#trash"></use></svg>',"Delete","</a>","</li>","</ul>","</div>","</td>","</tr>"])}m+="</tbody>";newNode("table","horizontal comments-table",null,m,l)},noList:function(){var c="No comments to display. There are no comments that match this status or search.";undoLoading(this.node_list_list,true);addClass(this.node_list_nav_nextPage,"disabled");addClass(this.node_list_nav_prevPage,"disabled");insertMessage("plain",c,this.node_list_list,"small",true)},refreshList:function(){var c=this.getListForm();var d=this;c.ajaxRequest=this.node_list_list.dataset.listName;makeLoading(this.node_list_list,true,300);if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,c,function(e){d.dispatchList(e);d.addDynamicListeners()},function(e){d.handleError()})}else{this.handleError()}},saveReply:function(){var d=this;if(GLOBAL_AJAX_ENABLED){var c={comment_id:this.node_sidebar_content.dataset.commentId,content:this.node_sidebar_replyEditInput.value,ajaxRequest:"admin_reply_comment",public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href};showGlobalSpinner();Ajax.post(GLOBAL_AJAX_URL,c,function(e){xhr=isJSON(e);if(xhr){d.refreshList();pushNotification("success","Your comment was successfully posted.");removeClass(d.node_sidebar_replyEditWrap,"edit");removeClass(d.node_sidebar_replyEditWrap,"reply")}else{pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")}hideGlobalSpinner()},function(e){hideGlobalSpinner();pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")})}else{pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")}},saveEdit:function(){var d=this;if(GLOBAL_AJAX_ENABLED){var c={comment_id:this.node_sidebar_content.dataset.commentId,content:this.node_sidebar_replyEditInput.value,ajaxRequest:"admin_edit_comment",public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href};showGlobalSpinner();Ajax.post(GLOBAL_AJAX_URL,c,function(e){xhr=isJSON(e);if(xhr){d.updateComment(xhr.details,d);pushNotification("success","Edit was successfully saved.");removeClass(d.node_sidebar_replyEditWrap,"edit");removeClass(d.node_sidebar_replyEditWrap,"reply")}else{pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")}hideGlobalSpinner()},function(e){hideGlobalSpinner();pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")})}else{pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")}},updateComment:function(c,d){d.node_sidebar_content.innerHTML=c;d.node_sidebar_content.dataset.content=d.node_sidebar_replyEditInput.value;d.refreshList()},requestInfo:function(e){if(isNodeType(e,"a")){return}var d=parentUntillClass(e,"js-item");var f=this;if(GLOBAL_AJAX_ENABLED){var c=this.getInfoForm(d);Ajax.post(GLOBAL_AJAX_URL,c,function(g){xhr=isJSON(g);if(xhr){f.displayCommentInfo(xhr.details,d)}else{}},function(g){})}else{}},displayCommentInfo:function(g,h){var f=h.dataset.commentId;var e=$(".title a",h).getAttribute("href");var c=timeAgo(g.first_date,true);this.node_sidebar_content.innerHTML=g.html_content;this.node_sidebar_content.dataset.content=g.content;this.node_sidebar_replyEditInput.value=g.content;this.node_sidebar_content.dataset.commentId=f;this.node_sidebar_commentStatus.innerHTML="This comment is "+g.status;this.node_sidebar_searchUser.innerHTML="View all from "+g.name;this.node_sidebar_searchEmail.innerHTML="View all from "+g.email;this.node_sidebar_searchIp.innerHTML="View all from "+g.ip_address;this.node_sidebar_avatar.innerHTML='<img src="'+g.avatar+'" width="32" height="32" />';this.node_sidebr_name.innerHTML=g.name;this.node_sidebar_email.innerHTML=g.email;this.node_sidebar_fCommentUnit.innerHTML=c.unit+" ago";this.node_sidebar_fCommentTime.innerHTML=c.time;this.node_sidebar_ipAddress.innerHTML=g.ip_address;this.node_sidebar_commentCount.innerHTML=g.posted_count;this.node_sidebar_spamCount.innerHTML=g.spam_count;this.node_sidebar_commentLink.setAttribute("href",e);this.node_sidebar_searchEmail.dataset.search=g.email;this.node_sidebar_searchIp.dataset.search=g.ip_address;this.node_sidebar_searchUser.dataset.search=g.name;bool(g.blacklisted)===true?addClass(this.node_sidebar_blacklist,"active"):removeClass(this.node_sidebar_blacklist,"active");bool(g.whitelisted)===true?addClass(this.node_sidebar_whitelist,"active"):removeClass(this.node_sidebar_whitelist,"active");var d=g.reputation;removeClass(this.node_sidebar_repIcon,["bad","good","average"]);removeClass(this.node_sidebar_commentStatus,["deleted","approved","pending","spam"]);if(d<0){addClass(this.node_sidebar_repIcon,"bad");this.node_sidebar_reputation.innerHTML="Low"}else{if(d>0&&d<2){addClass(this.node_sidebar_repIcon,"average");this.node_sidebar_reputation.innerHTML="Average"}else{if(d>2){addClass(this.node_sidebar_repIcon,"good");this.node_sidebar_reputation.innerHTML="Good"}}}addClass(this.node_sidebar_commentStatus,g.status);addClass(this.node_sidebar_wrap,"active")},getInfoForm:function(c){return{comment_id:c.dataset.commentId,ajaxRequest:"admin_comment_info",public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href}},confirmModerateIpAddress:function(d){if(GLOBAL_AJAX_ENABLED){var f=this;var e;var c={ip_address:this.node_sidebar_ipAddress.innerHTML.trim(),action:d,ajaxRequest:"admin_black_whitelist_ip",public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href};if(d==="nolist"){d="remove";e="Are you POSITIVE you want to remove users commenting from the IP address "+c.ip_address+" from all lists?"}else{e="Are you POSITIVE you want to "+d+" users commenting from the IP address "+c.ip_address+" ?"}pushCallBackNotification("info",e,ucfirst(d)+" IP",f.moderateIpAddress,[c,f],null,null)}else{pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")}},moderateIpAddress:function(){var c=arguments[0][0];var d=arguments[0][1];Ajax.post(GLOBAL_AJAX_URL,c,function(e){xhr=isJSON(e);if(xhr){pushNotification("success","The IP address "+c.ip_address+" was successfully "+c.action+"ed.");if(c.action==="whitelist"){addClass(d.node_sidebar_whitelist,"active");removeClass(d.node_sidebar_blacklist,"active")}else{if(c.action==="blacklist"){removeClass(d.node_sidebar_whitelist,"active");addClass(d.node_sidebar_blacklist,"active")}else{if(c.action==="nolist"){removeClass(d.node_sidebar_whitelist,"active");removeClass(d.node_sidebar_blacklist,"active")}}}}else{pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")}},function(e){pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")})},confirmItemAction:function(d,e){if(GLOBAL_AJAX_ENABLED){var f=this;var c=count(d.comment_ids);pushCallBackNotification("info","Are you POSITIVE you want to "+e+" "+c+" "+pluralize("comment",c)+"?",ucfirst(e)+" "+pluralize("Comment",c),f.actionComment,[d,e,f],null,null)}else{pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")}},actionComment:function(){var d=arguments[0][0];var e=arguments[0][1];var f=arguments[0][2];var c=count(d.comment_ids);Ajax.post(GLOBAL_AJAX_URL,d,function(g){xhr=isJSON(g);if(e==="approve"){e="approved"}if(e==="delete"){e="deleted"}if(xhr){pushNotification("success",c+" "+pluralize("comment",c)+" "+pluralize("was",c)+" successfully marked as "+e);f.refreshList();triggerEvent(f.node_sidebar_closeInfo,"click")}else{pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")}},function(g){pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")})}};var b=$(".js-ajax-list-wrap.js-comments-wrap");if(nodeExists(b)){a(b).init()}}());(function(){var b=$(".header .drop-down > a");if(nodeExists(b)){b.addEventListener("click",c);document.addEventListener("click",a)}function c(){event.preventDefault();if(hasClass(b.parentNode,"active")){removeClass(b.parentNode,"active")}else{addClass(b.parentNode,"active")}}function a(){if(event.target===b||b===closest(event.target,"a")){return}removeClass(b.parentNode,"active")}}());(function(){var e=$All(".js-button-down .button");if(nodeExists($(".js-button-down .button"))){a();document.addEventListener("click",b)}function a(){for(var g=0;g<e.length;g++){e[g].addEventListener("click",c);f(e[g])}}function f(h){var g=$(".drop div",h.parentNode);g.addEventListener("click",d)}function d(){event.preventDefault();var k=closest(event.target,"a");var j=parentUntillClass(k,"js-button-down");var g=$(".button",j);var h=$("svg",g);h=(typeof h==="undefined"?null:h);g.innerHTML=k.textContent;if(h){g.appendChild(h)}}function c(){event.preventDefault();var g=closest(event.target,"a");var h=g.parentNode;if(hasClass(h,"active")){g.blur();removeClass(h,"active")}else{g.blur();addClass(h,"active")}}function b(){var h=closest(event.target,"a");if(h&&hasClass(h.parentNode,"js-button-down")){return}for(var g=0;g<e.length;g++){e[g].blur();removeClass(e[g].parentNode,"active")}}}());var activeNotifs=[];function pushNotification(b,e){var d=$(".js-nofification-wrap");var c='<div class="message-icon"><svg viewBox="0 0 100 100" class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+b+'"></use></svg></div><div class="message-body"><p>'+e+"</p></div>";var f=makeid(20);var a=newNode("div",b+" message flipInX animated",null,c,d);activeNotifs.push({node:a,id:f,timeout:setTimeout(function(){removeNotif(a)},6000)});a.addEventListener("click",function(){removeNotif(a)})}function removeNotif(b){for(var a=0;a<activeNotifs.length;a++){if(b===activeNotifs[a].node){clearTimeout(activeNotifs[a].timeout);fadeOutAndRemove(activeNotifs[a].node);activeNotifs.splice(a,1)}}}function pushCallBackNotification(j,m,f,h,e,c,b){var d=$(".js-nofification-wrap");var g='<div class="message-icon"><svg viewBox="0 0 100 100" class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+j+'"></use></svg></div><div class="message-body"><p>'+m+'</p><div class="row"><button class="button cancel small js-cancel">Cancel</button><button class="button small confirm red js-confirm">'+f+"</button></div></div>";var k=newNode("div",j+" message flipInX animated message-confirm",null,g,d);var l=$(".js-cancel",k);var a=$(".js-confirm",k);l.addEventListener("click",function(){if(isCallable(c)){c(b)}event.preventDefault();fadeOutAndRemove(k)});a.addEventListener("click",function(){event.preventDefault();if(isCallable(h)){h(e)}fadeOutAndRemove(k)})}function showGlobalSpinner(){addClass($(".js-global-spinner"),"active")}function hideGlobalSpinner(){removeClass($(".js-global-spinner"),"active")}(function(){var c=$All(".js-tabs-wrap a");if(nodeExists($(".js-tabs-wrap a"))){for(var b=0;b<c.length;b++){c[b].addEventListener("click",a)}}function a(){event.preventDefault();var j=event.target;if(hasClass(j,"active")){return}var f=parentUntillClass(j,"js-tabs-wrap");var e=$("a.active",f);var l=$("#"+e.dataset.tab);var h=$("#"+j.dataset.tab);if(nodeExists(l)){removeClass(l,"active")}if(nodeExists(h)){addClass(h,"active")}removeClass(e,"active");addClass(j,"active");if(hasClass(f,"js-url-tabs")){var k=j.dataset.tabTitle;var g=j.dataset.tabUrl;d(k,g)}}function d(h,f){var g=rtrim(window.location.href,"/");g=g.split("/");g.pop();g=g.join("/");if(window.history.replaceState){var e=h;window.history.replaceState(e,h,g+"/"+f+"/")}document.title=h}}());function makeLoading(c,d,b){d=(typeof d==="undefined"?false:d);b=(typeof b==="undefined"?300:b);var e=c.style.height||c.clientHeight||c.offsetHeight;e=parseInt(e);b=(b<e||e===0?b:e);c.style.height=b+"px";c.style.position="relative";if(d){c.innerHTML='<div class="div-spinner active"><span class="spinner1"></span><span class="spinner2"></span><svg viewBox="0 0 512 512"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#logo-simple"></use></svg></div>'}else{var a=document.createElement("div");a.innerHTML='<span class="spinner1"></span><span class="spinner2"></span><svg viewBox="0 0 512 512"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#logo-simple"></use></svg>';a.className="div-spinner active";c.appendChild(a)}}function undoLoading(a,b){b=(typeof b==="undefined"?false:b);a.style.removeProperty("height");a.style.removeProperty("position");if(b){a.innerHTML=""}else{removeFromDOM($(".div-spinner",a))}}function insertMessage(c,e,g,a,f){f=(typeof f==="undefined"?false:f);a=(typeof a==="undefined"?"":a);var b=(c!=="plain"?c:"info");var d=document.createElement("div");d.className="row";d.innerHTML=cleanInnerHTML(['<div class="message '+c+" "+a+'">','<div class="message-icon">','<svg viewBox="0 0 100 100" class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+b+'"></use></svg>',"</div>",'<div class="message-body">',"<p>"+e+"</p>","</div>","</div>"]);if(f){g.innerHTML=""}g.appendChild(d)}(function(){var d=$(".login.setup-panel form");var a;var c;if(nodeExists(d)){c=$All("input",d);a=$(".submit",d);a.addEventListener("click",b)}function b(){if(hasClass(a,"active")){return}clearAjaxInputErrors(d);var e=formValidator(c).validateForm();e.formAppend("ajaxRequest","admin_login");if(!e.validForm){showAjaxInputErrors(c,d);return}if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,e.getForm(),function(g){var f=isJSON(g);if(f&&f.details==="valid"){window.location.href=GLOBAL_AJAX_URL+"articles/"}else{showAjaxFormResult(d,"error");return}},function(f){showAjaxFormResult(d,"error");return})}else{showAjaxFormResult(d,"error")}}}());(function(){var d=$(".js-register-form");var a;var c;if(nodeExists(d)){console.log(d);c=$All("input",d);a=$(".submit",d);a.addEventListener("click",b)}function b(){if(hasClass(a,"active")){return}clearAjaxInputErrors(d);var e=formValidator(c).validateForm();e.formAppend("ajaxRequest","admin_register");if(!e.validForm){showAjaxInputErrors(e.invalids,d);return}if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,e.getForm(),function(g){var f=isJSON(g);if(f&&f.details==="valid"){window.location.href=GLOBAL_AJAX_URL+"settings/account"}else{showAjaxFormResult(d,"error",f.details);return}},function(f){showAjaxFormResult(d,"error","There was an error processing your request.");return})}else{showAjaxFormResult(d,"error","There was an error processing your request.")}}}());(function(){var c=$(".forgot-password.setup-panel form");var a;var b;if(nodeExists(c)){b=$All("input",c);a=$(".submit",c);a.addEventListener("click",d)}function d(){if(hasClass(a,"active")){return}clearAjaxInputErrors(c);var e=formValidator(b).validateForm();e.formAppend("ajaxRequest","admin_forgot_password");if(!e.validForm){showAjaxInputErrors(b,c);return}if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,e.getForm(),function(f){showAjaxFormResult(c,"info")},function(f){showAjaxFormResult(c,"info");return})}else{showAjaxFormResult(c,"info")}}}());(function(){var c=$(".forgot-username.setup-panel form");var a;var b;if(nodeExists(c)){b=$All("input",c);a=$(".submit",c);a.addEventListener("click",d)}function d(){if(hasClass(a,"active")){return}clearAjaxInputErrors(c);var e=formValidator(b).validateForm();e.formAppend("ajaxRequest","admin_forgot_username");if(!e.validForm){showAjaxInputErrors(b,c);return}if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,e.getForm(),function(f){showAjaxFormResult(c,"info")},function(f){showAjaxFormResult(c,"info");return})}else{showAjaxFormResult(c,"info")}}}());(function(){var c=$(".reset-password.setup-panel form");var a;var b;if(nodeExists(c)){b=$All("input",c);a=$(".submit",c);a.addEventListener("click",d)}function d(){if(hasClass(a,"active")){return}clearAjaxInputErrors(c);var e=formValidator(b).validateForm();e.formAppend("ajaxRequest","admin_reset_password");if(!e.validForm){showAjaxInputErrors(b,c);return}if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,e.getForm(),function(g){var f=isJSON(g);if(f&&f.details==="valid"){showAjaxFormResult(c,"success");return}else{showAjaxFormResult(c,"error");return}},function(f){showAjaxFormResult(c,"error");return})}else{showAjaxFormResult(c,"error")}}}());(function(){var c=$All(".admin-settings input[type=checkbox");if(nodeExists($(".admin-settings input[type=checkbox"))){a()}function a(){for(var d=0;d<c.length;d++){c[d].addEventListener("change",b)}}function b(){var e=event.target;var d=e.checked;var f=e.parentNode.nextSibling;while(f&&f.tagName!=="DIV"){f=f.nextSibling}if(d){addClass(f,"active")}else{removeClass(f,"active")}}}());(function(){var b=$All(".js-input-mask-number");if(nodeExists($(".js-input-mask-number"))){for(var a=0;a<b.length;a++){VMasker(b[a]).maskNumber()}}}());(function(){var d=$("form.js-update-admin-form");var b;var c;if(nodeExists(d)){c=$All("input",d);b=$(".submit",d);b.addEventListener("click",a)}function a(){if(hasClass(b,"active")){return}clearAjaxInputErrors(d);var e=formValidator(c).validateForm();e.formAppend("ajaxRequest","admin_update_settings");if(!e.validForm){showAjaxInputErrors(e.invalids,d);return}if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,e.getForm(),function(g){var f=isJSON(g);if(f&&f.details==="valid"){removeClass(b,"active");pushNotification("success","Your settings were successfully updated!");return}removeClass(b,"active");pushNotification("error","There was an error updating your settings!")},function(f){removeClass(b,"active");pushNotification("error","There was an error updating your settings!");return})}else{removeClass(b,"active");pushNotification("error","There was an error updating your settings!")}}}());(function(){var d=$("form.js-author-settings-form");var a;var b;if(nodeExists(d)){b=$All("input, textarea",d);a=$(".submit",d);a.addEventListener("click",c)}function c(){if(hasClass(a,"active")){return}clearAjaxInputErrors(d);var e=formValidator(b).validateForm();e.formAppend("ajaxRequest","admin_update_author");if(!e.validForm){showAjaxInputErrors(e.invalids,d);return}if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,e.getForm(),function(g){var f=isJSON(g);if(f&&f.details==="valid"){removeClass(a,"active");pushNotification("success","Your settings were successfully updated!")}else{removeClass(a,"active");pushNotification("error","There was an error updating your settings!");return}},function(f){removeClass(a,"active");pushNotification("error","There was an error updating your settings!");return})}else{removeClass(a,"active");pushNotification("error","There was an error updating your settings!")}}}());(function(){var f=$(".js-author-hero-drop");var j=$(".js-author-hero-drop .upload-bar .progress");var l;var n;var h;var m=true;var b=0;if(nodeExists(f)){var o={url:window.location.href.replace(/admin(.+)/,"admin/"),maxFilesize:5,parallelUploads:1,uploadMultiple:false,clickable:true,createImageThumbnails:true,maxFiles:null,acceptedFiles:".jpg,.png",autoProcessQueue:false,maxThumbnailFilesize:5,thumbnailWidth:150,thumbnailHeight:150,resize:k,dictInvalidFileType:"Error! Unsupported file or files. You can't upload files of that type.",dictFileTooBig:"Error! File or files are too lare. Max upload size is 5mb per file.",dictResponseError:"There was an error processing the request. Try again in a few moments.",dictMaxFilesExceeded:"Error! Too many uploads at once. Upload limit is 1 file per drop."};l=new Dropzone(f,o);c()}function k(s){var p=s.width;var t=s.height;var r=ImageResizer(p,t,true);var q=r.crop(150,150);return{srcX:q.source_x,srcY:q.source_y,srcWidth:q.source_w,srcHeight:q.source_h,trgX:q.dest_x,trgY:q.dest_y,trgWidth:150,trgHeight:150}}function c(){var p=l;p.on("uploadprogress",function(r,q){j.style.width=q+"%"});p.on("sending",function(r,s,q){q.append("ajaxRequest","admin_author_image");q.append("public_key",GLOBAL_PUBLIC_KEY)});p.on("drop",function(q){e()});p.on("error",function(r,q,s){e();d(r,q,s)});p.on("addedfile",function(q){b++;if(b>1){e();m=false;clearTimeout(n);h=setTimeout(g,300)}else{if(b===1){n=setTimeout(a,300)}}});p.on("success",function(r,q){if(typeof q!=="object"){q=isJSON(q)}if(typeof q==="object"){if(q&&q.response&&q.response==="processed"&&q.details.indexOf("http://")>-1){pushNotification("success","Your file was successfully uploaded!");return}}pushNotification("error","There was an error processing the request. Try again in a few moments.")});p.on("complete",function(q){m=true;b=0;j.style.width="0%"})}function g(){clearTimeout(h);pushNotification("error","Error! Too many uploads at once. Upload limit is 1 file per drop.");m=true;b=0}function a(){clearTimeout(n);if(m===true){l.processQueue()}m=true;b=0}function e(){removeClass(f,"dz-started");var p=$(".js-author-hero-drop .dz-preview");var q=$All(".js-author-hero-drop .dz-preview");if(nodeExists(p)){for(var r=0;r<q.length;r++){removeFromDOM(q[r])}}}function d(q,p,r){pushNotification("alert",p)}}());(function(){var c=$("form.js-kanso-settings-form");var a;var b;if(nodeExists(c)){b=getFormInputs(c);a=$("button.submit",c);a.addEventListener("click",d)}function d(){if(hasClass(a,"active")){return}clearAjaxInputErrors(c);b=getFormInputs(c);var e=formValidator(b).validateForm();e.formAppend("ajaxRequest","admin_update_kanso");if(!e.validForm){showAjaxInputErrors(e.invalids,c);return}var f=e.getForm();if(f["use-cache"]===true&&f["cache-life"]===""){showAjaxInputErrors([e.getInput("cache-life")],c);return}if(f["use-CDN"]===true&&f["CDN-url"]===""){showAjaxInputErrors([e.getInput("CDN-url")],c);return}if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,f,function(h){var g=isJSON(h);if(g&&g.details==="valid"){removeClass(a,"active");pushNotification("success","Your settings were successfully updated!");return}else{if(g&&g.details==="theme_no_exist"){removeClass(a,"active");pushNotification("error","The theme you specified does not exists.");return}else{if(g&&g.details==="invalid_permalinks"){removeClass(a,"active");pushNotification("error","Your permalinks structure is invalid. Please enter a valid permalinks wildcard.");return}else{if(g&&g.details==="invalid_img_quality"){removeClass(a,"active");pushNotification("error","The thumbnail quality you entered is invalid. Thumbnail quality needs to be between 1-100");return}else{if(g&&g.details==="invalid_cdn_url"){removeClass(a,"active");pushNotification("error","The CDN url you intered is not a valid url. Please enter a valid url.");return}else{if(g&&g.details==="invalid_cache_life"){removeClass(a,"active");pushNotification("error","The cache-life you entered is invalid. Please enter a vailid cache-life");return}}}}}}},function(g){removeClass(a,"active");pushNotification("error","There was an error updating your settings!");return})}else{removeClass(a,"active");pushNotification("error","There was an error updating your settings!")}}}());(function(){var c=$("form.js-invite-user-form");var a;var b;if(nodeExists(c)){b=$All("input, select",c);a=$(".submit",c);a.addEventListener("click",d)}function d(){if(hasClass(a,"active")){return}clearAjaxInputErrors(c);var e=formValidator(b).validateForm();e.formAppend("ajaxRequest","admin_invite_user");if(!e.validForm){showAjaxInputErrors(e.invalids,c);return}if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,e.getForm(),function(g){var f=isJSON(g);if(f&&f.details==="valid"){removeClass(a,"active");pushNotification("success","The user was successfully sent an invitation to join your website!")}if(f&&f.details==="already_member"){removeClass(a,"active");pushNotification("alert","Another user is already singed up under that email address.");return}if(f&&f.details==="no_send"){removeClass(a,"active");pushNotification("error","There was an error inviting that user. You need to be running Kanso on a live server, with PHP's mail() function to send emails.");return}},function(f){removeClass(a,"active");pushNotification("error","There was an error inviting that user.");return})}else{removeClass(a,"active");pushNotification("error","There was an error inviting that user.");return}}}());(function(){var d=$All(".js-delete-author");if(nodeExists($(".js-delete-author"))){for(var c=0;c<d.length;c++){d[c].addEventListener("click",b)}}function b(){event.preventDefault();var e=closest(event.target,"a");if(hasClass(e,"active")){return}pushCallBackNotification("info","Are you POSITIVE you want to permanently delete this user?","Delete",a,e)}function a(e){addClass(e,"active");var g=closest(e,"tr");var f={ajaxRequest:"admin_delete_user",id:parseInt(e.dataset.authorId),public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href};if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,f,function(j){var h=isJSON(j);if(h&&h.details==="valid"){removeClass(e,"active");pushNotification("success","The user was successfully deleted. Their authorship articles have been transferred to you.");removeFromDOM(g)}else{removeClass(e,"active");pushNotification("error","There was an error deleting that user.");return}},function(h){removeClass(e,"active");pushNotification("error","There was an error deleting that user.");return})}else{removeClass(e,"active");pushNotification("error","There was an error deleting that user.");return}}}());(function(){var d=$All(".js-change-role");if(nodeExists($(".js-change-role"))){for(var c=0;c<d.length;c++){d[c].addEventListener("change",e)}}function e(){var f=closest(event.target,"select");var h=f.options[f.selectedIndex].value;var g={ajaxRequest:"admin_change_user_role",role:h,id:f.dataset.authorId,public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href};pushCallBackNotification("info","Are you POSITIVE you want to change this this user's account role?","Change Role",b,[g,f],a,f)}function b(g){var h=g[0];var f=g[1];if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,h,function(k){var j=isJSON(k);if(j&&j.details==="valid"){pushNotification("success","The user's account role was successfully changed.")}else{a(f);pushNotification("error","There was an error changing that user's account role.");return}},function(j){a(f);pushNotification("error","There was an error changing that user's account role.");return})}else{a(f);pushNotification("error","There was an error changing that user's account role.");return}}function a(g){var h=count(g.options);var f=g.selectedIndex;var j=f===h?f-1:f+1;g.value=g.options[j].value}}());(function(){var a=$(".js-clear-kanso-cache");if(nodeExists(a)){a.addEventListener("click",b)}function b(){event.preventDefault();var c=closest(event.target,"a");if(hasClass(c,"active")){return}var d={ajaxRequest:"admin_clear_cache",public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href};addClass(c,"active");if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,d,function(f){var e=isJSON(f);if(e&&e.details==="valid"){removeClass(c,"active");pushNotification("success","Kanso's cache was successfully cleared!")}else{removeClass(c,"active");pushNotification("error","There server encountered an error while clearing the cache.");return}},function(e){removeClass(c,"active");pushNotification("error","There server encountered an error while clearing the cache.");return})}else{removeClass(c,"active");pushNotification("error","There server encountered an error while clearing the cache.");return}}}());(function(){var a=$(".js-batch-import input");if(nodeExists(a)){a.addEventListener("change",b)}function b(){if(hasClass(a.parentNode,"active")){return}addClass(a.parentNode,"active");var c=Uploader(a,["application/json"],1).init();if(!c.validateMime()){a.value="";GLOBAL_PROGRESS.style.width="0px";removeClass(a.parentNode,"active");pushNotification("error","Unsupported file type. You need to upload a valid JSON file.");return}if(!c.validateFileSizes()){a.value="";GLOBAL_PROGRESS.style.width="0px";removeClass(a.parentNode,"active");pushNotification("error","File is too large. Max file size is 5mb.");return}if(!c.validateMaxFiles()){a.value="";GLOBAL_PROGRESS.style.width="0px";removeClass(a.parentNode,"active");pushNotification("error","Too many files uploading at once. You can only upload a single file at a time.");return}c.append("ajaxRequest","admin_import_articles");c.append("public_key",GLOBAL_PUBLIC_KEY);c.append("referer",window.location.href);if(GLOBAL_AJAX_ENABLED){c.upload(GLOBAL_AJAX_URL,function(e){a.value="";GLOBAL_PROGRESS.style.width="0px";removeClass(a.parentNode,"active");var d=isJSON(e);if(d&&d.details==="valid"){pushNotification("success","Your articles were successfully imported!")}else{pushNotification("error","Your articles could not be imported. The JSON file you uploaded is invalid for import.")}},function(d){pushNotification("error","The server encoutered an error while processing your request.");a.value="";GLOBAL_PROGRESS.style.width="0px";removeClass(a.parentNode,"active")},function(d){GLOBAL_PROGRESS.style.width=d+"%"})}else{a.value="";GLOBAL_PROGRESS.style.width="0px";removeClass(a.parentNode,"active")}}}());(function(){var b=$(".js-batch-images input");if(nodeExists(b)){b.addEventListener("change",a)}function a(){if(hasClass(b.parentNode,"active")){return}addClass(b.parentNode,"active");var c=Uploader(b,["image/jpeg","image/png","image/gif"],50).init();if(!c.validateMime()){b.value="";GLOBAL_PROGRESS.style.width="0px";removeClass(b.parentNode,"active");pushNotification("error","Unsupported file types were found. You can only upload GIF, PNG and JPG images.");return}if(!c.validateFileSizes()){b.value="";GLOBAL_PROGRESS.style.width="0px";removeClass(b.parentNode,"active");pushNotification("error","One of the files is too large. Max file size is 5mb.");return}if(!c.validateMaxFiles()){b.value="";GLOBAL_PROGRESS.style.width="0px";removeClass(b.parentNode,"active");pushNotification("error","Too many files uploading at once. You can upload a maximum of 50 files at a time.");return}c.append("ajaxRequest","admin_batch_image");c.append("public_key",GLOBAL_PUBLIC_KEY);c.append("referer",window.location.href);if(GLOBAL_AJAX_ENABLED){c.upload(GLOBAL_AJAX_URL,function(e){b.value="";GLOBAL_PROGRESS.style.width="0px";removeClass(b.parentNode,"active");var d=isJSON(e);if(d&&d.details==="valid"){pushNotification("success","Your images were successfully uploaded!")}else{if(d&&d.details==="server_error"){pushNotification("error","The server encoutered an error while processing your request.")}else{if(d&&d.details==="invalid_size"){pushNotification("error","One or more of the files are too large. Max file size is 5mb.")}else{if(d&&d.details==="invalid_mime"){pushNotification("error","Unsupported file types were found. You can only upload GIF, PNG and JPG images.")}}}}},function(d){b.value="";GLOBAL_PROGRESS.style.width="0px";removeClass(b.parentNode,"active");pushNotification("error","The server encoutered an error while processing your request.")},function(d){GLOBAL_PROGRESS.style.width=d+"%"})}else{b.value="";GLOBAL_PROGRESS.style.width="0px";removeClass(b.parentNode,"active");pushNotification("error","The server encoutered an error while processing your request.")}}}());(function(){var b=$(".js-clear-kanso-database");if(nodeExists(b)){b.addEventListener("click",c)}function c(){event.preventDefault();pushCallBackNotification("info","Are you POSITIVE you want to restor Kanso to its origional settings?","Restore Kanso",a)}function a(){addClass(b,"active");var d={};d.ajaxRequest="admin_restore_kanso";d.public_key=GLOBAL_PUBLIC_KEY;d.referer=window.location.href;if(GLOBAL_AJAX_ENABLED){Ajax.post(GLOBAL_AJAX_URL,d,function(f){var e=isJSON(f);if(e&&e.details==="valid"){window.location.href=window.location.href=GLOBAL_AJAX_URL+"login/"}else{removeClass(b,"active");pushNotification("error","There was an error restoring Kanso's settings.");return}},function(e){removeClass(b,"active");pushNotification("error","The server encoutered an error while processing your request.");return})}else{removeClass(b,"active");pushNotification("error","The server encoutered an error while processing your request.");return}}}());