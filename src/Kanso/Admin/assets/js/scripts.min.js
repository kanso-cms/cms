function closest(a,b){if(b=b.toLowerCase(),"undefined"==typeof a)return null;if(a.nodeName.toLowerCase()===b)return a;if(a.parentNode&&a.parentNode.nodeName.toLowerCase()===b)return a.parentNode;for(var c=a.parentNode;c!==document.body&&"undefined"!=typeof c&&null!==c;)if(c=c.parentNode,c&&c.nodeName.toLowerCase()===b)return c;return null}function parentUntillClass(a,b){if(hasClass(a,b))return a;if(hasClass(a.parentNode,b))return a.parentNode;for(var c=a.parentNode;c!==document.body;)if(c=c.parentNode,hasClass(c,b))return c;return null}function nextUntillType(a,b){if(b=b.toLowerCase(),a.nextSibling&&a.nextSibling.nodeName.toLowerCase===b)return a.nextSibling;for(var c=a.nextSibling;c!==document.body&&"undefined"!=typeof c&&null!==c;)if(c=c.nextSibling,c&&c.nodeName.toLowerCase()===b)return c;return null}function isJSON(a){var b;try{b=JSON.parse(a)}catch(c){return!1}return b}function newNode(a,b,c,d,e){var f=document.createElement(a);return b="undefined"==typeof b?null:b,c="undefined"==typeof c?null:c,d="undefined"==typeof d?null:d,null!==b&&(f.className=b),null!==c&&(f.id=c),null!==d&&(f.innerHTML=d),e.appendChild(f),f}function nodeExists(a){return"undefined"!=typeof a&&null!==a&&"undefined"!=typeof a.parentNode&&null!==a.parentNode?!0:!1}function makeid(a){for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",d=0;a>d;d++)b+=c.charAt(Math.floor(Math.random()*c.length));return b}function removeFromDOM(a){nodeExists(a)&&a.parentNode.removeChild(a)}function addClass(a,b){if(nodeExists(a))if("[object Array]"!==Object.prototype.toString.call(b))a.classList.add(b);else for(var c=0;c<b.length;c++)a.classList.add(b[c])}function removeClass(a,b){if(nodeExists(a))if("[object Array]"!==Object.prototype.toString.call(b))a.classList.remove(b);else for(var c=0;c<b.length;c++)a.classList.remove(b[c])}function hasClass(a,b){if(!nodeExists(a))return!1;if("[object Array]"===Object.prototype.toString.call(b)){for(var c=0;c<b.length;c++)if(a.classList.contains(b[c]))return!0;return!1}return a.classList.contains(b)}function removeClassNodeList(a,b,c){[].forEach.call(a,function(a){"undefined"==typeof c?a.classList.remove(b):a.classList[a==c?"add":"remove"](b)})}function addClassNodeList(a,b,c){[].forEach.call(a,function(a){"undefined"==typeof c?a.classList.add(b):a.classList[a==c?"remove":"add"](b)})}function isNodeType(a,b){return a.tagName.toUpperCase()===b.toUpperCase()}function getCoords(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h,k=parseInt(getStyleVal(a,"width")),l=parseInt(getStyleVal(a,"height"));return{top:Math.round(i),left:Math.round(j),right:Math.round(j+k),bottom:Math.round(i+l)}}function getStyle(a,b){return window.getComputedStyle?window.getComputedStyle(a,null).getPropertyValue(b):a.currentStyle?a.currentStyle[b]:void 0}function triggerEvent(a,b){if("createEvent"in document){var c=document.createEvent("HTMLEvents");c.initEvent(b,!1,!0),a.dispatchEvent(c)}else a.fireEvent(b)}function fadeOut(a){nodeExists(a)&&(addClass(a,"animated"),addClass(a,"fadeOut"))}function fadeOutAndRemove(a){nodeExists(a)&&(addClass(a,"animated"),addClass(a,"fadeOut")),a.addEventListener("animationend",function b(c){removeFromDOM(a),a.removeEventListener("animationend",b,!1)},!1)}function cloneObj(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function getFormInputs(a){for(var b=$All("input, textarea, select",a),c=b.length;c--;){var d=b[c];"radio"==d.type&&d.checked!==!0&&b.splice(c,1)}return b}function getInputValue(a){return"checkbox"==a.type?a.checked:"select"==a.type?a.options[a.selectedIndex].value:a.value}function is_numeric(a){var b=" \n\r	\f            ​\u2028\u2029　";return("number"==typeof a||"string"==typeof a&&-1===b.indexOf(a.slice(-1)))&&""!==a&&!isNaN(a)}function isCallable(a){return"[object Function]"===Object.prototype.toString.call(a)}function count(a,b){var c,d=0;if(null===a||"undefined"==typeof a)return 0;if(a.constructor!==Array&&a.constructor!==Object)return 1;"COUNT_RECURSIVE"===b&&(b=1),1!=b&&(b=0);for(c in a)a.hasOwnProperty(c)&&(d++,1!=b||!a[c]||a[c].constructor!==Array&&a[c].constructor!==Object||(d+=this.count(a[c],1)));return d}function in_array(a,b,c){var d="",e=!!c;if(e){for(d in b)if(b[d]===a)return!0}else for(d in b)if(b[d]==a)return!0;return!1}function ltrim(a,b){b=b?(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1"):" \\s ";var c=new RegExp("^["+b+"]+","g");return(a+"").replace(c,"")}function rtrim(a,b){b=b?(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"\\$1"):" \\s ";var c=new RegExp("["+b+"]+$","g");return(a+"").replace(c,"")}function preg_quote(a,b){return String(a).replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(b||"")+"-]","g"),"\\$&")}function str_replace(a,b,c,d){d="undefined"==typeof d?1:d;for(var e=0;d>e;e++)c=c.replace(a,b);return c}function preg_match_all(a,b){if("string"==typeof a)try{a=new RegExp(a)}catch(c){return null}var d=[],e=a.exec(b);if(null!==e){for(var f=0;e=a.exec(b);)b=str_split_index(b,e.index+e[0].length-1)[1],e.index=f>0?e.index+(e[0].length-1):e.index-1,d.push(e),f++;return d}return null}function str_split_index(a,b){return[a.substring(0,b+1),a.substring(b+1)]}function closest_number(a,b){for(var c=a[0],d=0;d<a.length;d++){var e=a[d];Math.abs(b-e)<Math.abs(b-c)&&(c=e)}return c}function cleanInnerHTML(a){return a.join("")}function bool(a){if(a="undefined"==typeof a?!1:a,"boolean"==typeof a)return a;if("number"==typeof a)return a>0;if("string"==typeof a){if("false"===a.toLowerCase())return!1;if("true"===a.toLowerCase())return!0;if("on"===a.toLowerCase())return!0;if("off"===a.toLowerCase())return!1;if("undefined"===a.toLowerCase())return!1;if(is_numeric(a))return Number(a)>0;if(""===a)return!1}return!1}function ucfirst(a){return a.charAt(0).toUpperCase()+a.slice(1)}function strReduce(a,b,c,d){if(d="undefined"==typeof d?!0:!1,c="undefined"==typeof c?"":c,d)return a.length>b?a.substring(0,b)+c:a;var e=a.split(" ");return count(e)>b?fruits.slice(0,b).join(" ").suffix:a}function arrReduce(a,b){return array_slice(a,0,b)}function implode(a,b,c){var d="";for(i=0;i<a.length;i++)d+=i===a.length-1?b+a[i]:b+a[i]+c;return d}function array_slice(a,b,c,d){var e="";if("[object Array]"!==Object.prototype.toString.call(a)||d&&0!==b){var f=0,g={};for(e in a)f+=1,g[e]=a[e];a=g,b=0>b?f+b:b,c=void 0===c?f:0>c?f+c-b:c;var h={},i=!1,j=-1,k=0,l=0;for(e in a){if(++j,k>=c)break;j==b&&(i=!0),i&&(++k,this.is_int(e)&&!d?h[l++]=a[e]:h[e]=a[e])}return h}return void 0===c?a.slice(b):c>=0?a.slice(b,b+c):a.slice(b,c)}function timeAgo(a,b){b="undefined"==typeof b?!1:!0,a=isValidTimeStamp(a)?parseInt(a):strtotime(a);var c=[{name:"second",limit:60,in_seconds:1},{name:"minute",limit:3600,in_seconds:60},{name:"hour",limit:86400,in_seconds:3600},{name:"day",limit:604800,in_seconds:86400},{name:"week",limit:2629743,in_seconds:604800},{name:"month",limit:31556926,in_seconds:2629743},{name:"year",limit:null,in_seconds:31556926}],d=(new Date-new Date(1e3*a))/1e3;if(5>d)return"now";for(var e,f=0;e=c[f++];)if(d<e.limit||!e.limit){var d=Math.floor(d/e.in_seconds);return b?{unit:e.name+(d>1?"s":""),time:d}:d+" "+e.name+(d>1?"s":"")}}function isValidTimeStamp(a){return is_numeric(a)&&parseInt(a)==a}function strtotime(a){return Math.round(new Date(a).getTime()/1e3)}function is_numeric(a){var b=" \n\r	\f            ​\u2028\u2029　";return("number"==typeof a||"string"==typeof a&&-1===b.indexOf(a.slice(-1)))&&""!==a&&!isNaN(a)}function isset(){var a,b=arguments,c=b.length,d=0;if(0===c)throw new Error("Empty isset");for(;d!==c;){if(b[d]===a||null===b[d])return!1;d++}return!0}function empty(a){if(a="undefined"==typeof a?!1:a,"boolean"==typeof a)return a!==!0;if("number"==typeof a)return 1>a;if("string"==typeof a){if("undefined"===a.toLowerCase())return!0;if(is_numeric(a))return Number(a)<1;if(""===a)return!0;if(""!==a)return!1}return"[object Array]"===Object.prototype.toString.call(a)?a.length<1:"[object Object]"===Object.prototype.toString.call(a)?0===Object.getOwnPropertyNames(a).length:!1}function paginate(a,b,c){b=b===!1||0===b?1:b,c=c?c:10;var d=count(a),e=Math.ceil(d/c),f=(b-1)*c,g=(Math.min(f+c,d),[]);if(b>e)return!1;for(var h=0;e>h;h++)f=h*c,g.push(a.slice(f,c));return g}function $All(a,b){return b="undefined"==typeof b?document:b,Array.prototype.slice.call(b.querySelectorAll(a))}function $(a,b){return b="undefined"==typeof b?document:b,b.querySelector(a)}function encrypt(a,b){for(var c="",d=0;d<strlen(a);d++){var e=_substr(a,d,1),f=_substr(b,d%strlen(b)-1,1),e=chr(ord(e)+ord(f));c+=e}return encode_base64(c)}function decrypt(a,b){for(var c="",a=decode_base64(a),d=0;d<strlen(a);d++){var e=_substr(a,d,1),f=_substr(b,d%strlen(b)-1,1),e=chr(ord(e)-ord(f));c+=e}return c}function encode_base64(a){var b=base64_encode(a);return strtr(b,"+/","-_")}function decode_base64(a){var b=strtr(a,"-_","+/");return base64_decode(b)}function base64_encode(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;do b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),i=b<<16|c<<8|d,e=i>>18&63,f=i>>12&63,g=i>>6&63,h=63&i,n[l++]=j.charAt(e)+j.charAt(f)+j.charAt(g)+j.charAt(h);while(k<a.length);m=n.join("");var o=a.length%3;return(o?m.slice(0,o-3):m)+"===".slice(o||3)}function base64_decode(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;a+="";do e=j.indexOf(a.charAt(k++)),f=j.indexOf(a.charAt(k++)),g=j.indexOf(a.charAt(k++)),h=j.indexOf(a.charAt(k++)),i=e<<18|f<<12|g<<6|h,b=i>>16&255,c=i>>8&255,d=255&i,64==g?n[l++]=String.fromCharCode(b):64==h?n[l++]=String.fromCharCode(b,c):n[l++]=String.fromCharCode(b,c,d);while(k<a.length);return m=n.join(""),m.replace(/\0+$/,"")}function strtr(a,b,c){var d="",e=0,f=0,g=0,h=0,i=!1,j="",k="",l="",m=[],n=[],o="",p=!1;if("object"==typeof b){i=this.ini_set("phpjs.strictForIn",!1),b=this.krsort(b),this.ini_set("phpjs.strictForIn",i);for(d in b)b.hasOwnProperty(d)&&(m.push(d),n.push(b[d]));b=m,c=n}for(g=a.length,h=b.length,j="string"==typeof b,k="string"==typeof c,e=0;g>e;e++){if(p=!1,j){for(l=a.charAt(e),f=0;h>f;f++)if(l==b.charAt(f)){p=!0;break}}else for(f=0;h>f;f++)if(a._substr(e,b[f].length)==b[f]){p=!0,e=e+b[f].length-1;break}o+=p?k?c.charAt(f):c[f]:a.charAt(e)}return o}function strlen(a){var b=a+"",c=0,d="",e=0;if(!this.php_js||!this.php_js.ini||!this.php_js.ini["unicode.semantics"]||"on"!==this.php_js.ini["unicode.semantics"].local_value.toLowerCase())return a.length;var f=function(a,b){var c=a.charCodeAt(b),d="",e="";if(c>=55296&&56319>=c){if(a.length<=b+1)throw"High surrogate without following low surrogate";if(d=a.charCodeAt(b+1),56320>d||d>57343)throw"High surrogate without following low surrogate";return a.charAt(b)+a.charAt(b+1)}if(c>=56320&&57343>=c){if(0===b)throw"Low surrogate without preceding high surrogate";if(e=a.charCodeAt(b-1),55296>e||e>56319)throw"Low surrogate without preceding high surrogate";return!1}return a.charAt(b)};for(c=0,e=0;c<b.length;c++)(d=f(b,c))!==!1&&e++;return e}function _substr(a,b,c){var d=0,e=!0,f=0,g=0,h=0,i="";a+="";var j=a.length;switch(this.php_js=this.php_js||{},this.php_js.ini=this.php_js.ini||{},this.php_js.ini["unicode.semantics"]&&this.php_js.ini["unicode.semantics"].local_value.toLowerCase()){case"on":for(d=0;d<a.length;d++)if(/[\uD800-\uDBFF]/.test(a.charAt(d))&&/[\uDC00-\uDFFF]/.test(a.charAt(d+1))){e=!1;break}if(!e){if(0>b)for(d=j-1,f=b+=j;d>=f;d--)/[\uDC00-\uDFFF]/.test(a.charAt(d))&&/[\uD800-\uDBFF]/.test(a.charAt(d-1))&&(b--,f--);else for(var k=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;null!=k.exec(a);){var l=k.lastIndex;if(!(b>l-2))break;b++}if(b>=j||0>b)return!1;if(0>c){for(d=j-1,g=j+=c;d>=g;d--)/[\uDC00-\uDFFF]/.test(a.charAt(d))&&/[\uD800-\uDBFF]/.test(a.charAt(d-1))&&(j--,g--);return b>j?!1:a.slice(b,j)}for(h=b+c,d=b;h>d;d++)i+=a.charAt(d),/[\uD800-\uDBFF]/.test(a.charAt(d))&&/[\uDC00-\uDFFF]/.test(a.charAt(d+1))&&h++;return i}case"off":default:return 0>b&&(b+=j),j="undefined"==typeof c?j:0>c?c+j:c+b,b>=a.length||0>b||b>j?!1:a.slice(b,j)}return void 0}function chr(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10),56320+(1023&a))):String.fromCharCode(a)}function ord(a){var b=a+"",c=b.charCodeAt(0);if(c>=55296&&56319>=c){var d=c;if(1===b.length)return c;var e=b.charCodeAt(1);return 1024*(d-55296)+(e-56320)+65536}return c>=56320&&57343>=c?c:c}function queueAjax(a,b,c,d,e){GLOBAL_AJAX_QUEUE.push({url:a,type:b.toLowerCase(),data:c,success:d,error:e})}function bufferAjaxQueue(){for(var a=0;a<GLOBAL_AJAX_QUEUE.length;a++){var b=GLOBAL_AJAX_QUEUE[a],c=b.type;b.data.public_key=GLOBAL_PUBLIC_KEY,Ajax[c](b.url,b.data,b.success,b.error)}}function clearAjaxInputErrors(a){var b=$All("input",a),c=$("button.submit",a),d=$(".form-result",a),e=$All(".animated",a);hideInputErrors(b),addClass(c,"active"),nodeExists(d)&&(d.className="form-result"),removeClassNodeList(e,"animated")}function showAjaxInputErrors(a,b){showInputErrors(a),removeClass($("button.submit",b),"active")}function showAjaxFormResult(a,b,c){if("undefined"!=typeof c){var d=$(".form-result .message."+b+" .message-body p",a);nodeExists(d)&&(d.innerHTML=c)}removeClass($("button.submit",a),"active"),addClass($(".form-result",a),b),addClass($(".form-result .message."+b,a),"animated")}function showInputErrors(a){for(var b=0;b<a.length;b++)addClass(a[b].parentNode,"error")}function hideInputErrors(a){for(var b=0;b<a.length;b++)removeClass(a[b].parentNode,"error")}function pushNotification(a,b){var c=$(".js-nofification-wrap"),d='<div class="message-icon"><svg viewBox="0 0 100 100" class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+a+'"></use></svg></div><div class="message-body"><p>'+b+"</p></div>",e=makeid(20),f=newNode("div",a+" message flipInX animated",null,d,c);activeNotifs.push({node:f,id:e,timeout:setTimeout(function(){removeNotif(f)},6e3)}),f.addEventListener("click",function(){removeNotif(f)})}function removeNotif(a){for(var b=0;b<activeNotifs.length;b++)a===activeNotifs[b].node&&(clearTimeout(activeNotifs[b].timeout),fadeOutAndRemove(activeNotifs[b].node),activeNotifs.splice(b,1))}function pushCallBackNotification(a,b,c,d,e,f,g){var h=$(".js-nofification-wrap"),i='<div class="message-icon"><svg viewBox="0 0 100 100" class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+a+'"></use></svg></div><div class="message-body"><p>'+b+'</p><div class="row"><button class="button cancel small js-cancel">Cancel</button><button class="button small confirm red js-confirm">'+c+"</button></div></div>",j=newNode("div",a+" message flipInX animated message-confirm",null,i,h),k=$(".js-cancel",j),l=$(".js-confirm",j);k.addEventListener("click",function(){isCallable(f)&&f(g),event.preventDefault(),fadeOutAndRemove(j)}),l.addEventListener("click",function(){event.preventDefault(),isCallable(d)&&d(e),fadeOutAndRemove(j)})}function showGlobalSpinner(){addClass($(".js-global-spinner"),"active")}function hideGlobalSpinner(){removeClass($(".js-global-spinner"),"active")}function makeLoading(a,b,c){b="undefined"==typeof b?!1:b,c="undefined"==typeof c?300:c;var d=a.style.height||a.clientHeight||a.offsetHeight;if(d=parseInt(d),c=d>c||0===d?c:d,a.style.height=c+"px",a.style.position="relative",b)a.innerHTML='<div class="div-spinner active"><span class="spinner1"></span><span class="spinner2"></span><svg viewBox="0 0 512 512"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#logo-simple"></use></svg></div>';else{var e=document.createElement("div");e.innerHTML='<span class="spinner1"></span><span class="spinner2"></span><svg viewBox="0 0 512 512"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#logo-simple"></use></svg>',e.className="div-spinner active",a.appendChild(e)}}function undoLoading(a,b){b="undefined"==typeof b?!1:b,a.style.removeProperty("height"),a.style.removeProperty("position"),b?a.innerHTML="":removeFromDOM($(".div-spinner",a))}function insertMessage(a,b,c,d,e){e="undefined"==typeof e?!1:e,d="undefined"==typeof d?"":d;var f="plain"!==a?a:"info",g=document.createElement("div");g.className="row",g.innerHTML=cleanInnerHTML(['<div class="message '+a+" "+d+'">','<div class="message-icon">','<svg viewBox="0 0 100 100" class="icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+f+'"></use></svg>',"</div>",'<div class="message-body">',"<p>"+b+"</p>","</div>","</div>"]),e&&(c.innerHTML=""),c.appendChild(g)}!function(window){var SimpleAjax=window.SimpleAjax={xhr:null,settings:{url:"",type:"GET",dataType:"text",async:!0,cache:!0,data:null,contentType:"application/x-www-form-urlencoded",success:null,error:null,complete:null,accepts:{text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"}},call:function(a){var b=this,c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),d=function(a,b){var c={};for(var d in a)c[d]="undefined"==typeof b[d]?a[d]:b[d];return c}(this.settings,a),e=function(){if(4==c.readyState){if(c.status>=200&&c.status<300||304===c.status){var a="xml"==d.dataType?c.responseXML:c.responseText;console.log(a),"json"==d.dataType&&(a=b.parseJSON(a)),b.isFunction(d.success)&&d.success.call(d,a,c.status,c)}else b.isFunction(d.error)&&d.error.call(d,c,c.status);b.isFunction(d.complete)&&d.complete.call(d,c,c.status)}};return this.xhr=c,d.cache||(d.url+=(d.url.indexOf("?")>-1?"&":"?")+"_nocache="+(new Date).getTime()),d.data&&("GET"==d.type?(d.url+=(d.url.indexOf("?")>-1?"&":"?")+this.param(d.data),d.data=null):d.data=this.param(d.data)),c.open(d.type,d.url,d.async),c.setRequestHeader("Content-type",d.contentType),c.setRequestHeader("X_REQUESTED_WITH","XMLHttpRequest"),d.dataType&&d.accepts[d.dataType]&&c.setRequestHeader("Accept",d.accepts[d.dataType]),d.async?(c.onreadystatechange=e,c.send(d.data)):(c.send(d.data),e()),this},get:function(a,b,c,d){return this.isFunction(b)&&(c=b,b=null),this.call({url:a,type:"GET",data:b,success:c,error:d})},post:function(a,b,c,d){return this.isFunction(b)&&(c=b,b=null),this.call({url:a,type:"POST",data:b,success:c,error:d})},load:function(a,b,c,d){return"string"==typeof a&&(a=document.getElementById(a)),this.call({url:b,type:c?"POST":"GET",data:c||null,complete:d||null,success:function(b){try{a.innerHTML=b}catch(c){var d=document.createElement("div");for(d.innerHTML=b;a.firstChild;)a.removeChild(a.firstChild);for(var e=0,f=d.childNodes.length;f>e;e++)a.appendChild(d.childNodes[e])}}})},param:function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},parseJSON:function(data){return"string"==typeof data&&data?eval("("+this.trim(data)+")"):null},trim:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)}};window.Ajax||(window.Ajax=SimpleAjax)}(window),function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.VMasker=b()}(this,function(){var a="9",b="A",c="S",d=[8,9,16,17,18,36,37,38,39,40,91,92,93],e=function(a){for(var b=0,c=d.length;c>b;b++)if(a==d[b])return!1;return!0},f=function(a){return a=a||{},a={precision:a.hasOwnProperty("precision")?a.precision:2,separator:a.separator||",",delimiter:a.delimiter||".",unit:a.unit&&a.unit.replace(/[\s]/g,"")+" "||"",suffixUnit:a.suffixUnit&&" "+a.suffixUnit.replace(/[\s]/g,"")||"",zeroCents:a.zeroCents,lastOutput:a.lastOutput},a.moneyPrecision=a.zeroCents?0:a.precision,a},g=function(d,e,f){for(;e<d.length;e++)(d[e]===a||d[e]===b||d[e]===c)&&(d[e]=f);return d},h=function(a){this.elements=a};h.prototype.unbindElementToMask=function(){for(var a=0,b=this.elements.length;b>a;a++)this.elements[a].lastOutput="",this.elements[a].onkeyup=!1,this.elements[a].onkeydown=!1,this.elements[a].value.length&&(this.elements[a].value=this.elements[a].value.replace(/\D/g,""))},h.prototype.bindElementToMask=function(a){for(var b=this,c=function(c){c=c||window.event;var d=c.target||c.srcElement;e(c.keyCode)&&setTimeout(function(){b.opts.lastOutput=d.lastOutput,d.value=i[a](d.value,b.opts),d.lastOutput=d.value,d.setSelectionRange&&b.opts.suffixUnit&&d.setSelectionRange(d.value.length,d.value.length-b.opts.suffixUnit.length)},0)},d=0,f=this.elements.length;f>d;d++)this.elements[d].lastOutput="",this.elements[d].onkeyup=c,this.elements[d].value.length&&(this.elements[d].value=i[a](this.elements[d].value,this.opts))},h.prototype.maskMoney=function(a){this.opts=f(a),this.bindElementToMask("toMoney")},h.prototype.maskNumber=function(){this.opts={},this.bindElementToMask("toNumber")},h.prototype.maskAlphaNum=function(){this.opts={},this.bindElementToMask("toAlphaNumeric")},h.prototype.maskAlphaNumDash=function(){this.opts={},this.bindElementToMask("toAlphaNumericDash")},h.prototype.maskPattern=function(a){this.opts={pattern:a},this.bindElementToMask("toPattern")},h.prototype.unMask=function(){this.unbindElementToMask()};var i=function(a){if(!a)throw new Error("VanillaMasker: There is no element to bind.");var b="length"in a?a.length?a:[]:[a];return new h(b)};return i.toMoney=function(a,b){if(b=f(b),b.zeroCents){b.lastOutput=b.lastOutput||"";var c="("+b.separator+"[0]{0,"+b.precision+"})",d=new RegExp(c,"g"),e=a.toString().replace(/[\D]/g,"").length||0,g=b.lastOutput.toString().replace(/[\D]/g,"").length||0;a=a.toString().replace(d,""),g>e&&(a=a.slice(0,a.length-1))}var h=a.toString().replace(/[\D]/g,""),i=new RegExp("^(0|\\"+b.delimiter+")"),j=new RegExp("(\\"+b.separator+")$"),k=h.substr(0,h.length-b.moneyPrecision),l=k.substr(0,k.length%3),m=new Array(b.precision+1).join("0");k=k.substr(k.length%3,k.length);for(var n=0,o=k.length;o>n;n++)n%3===0&&(l+=b.delimiter),l+=k[n];if(l=l.replace(i,""),l=l.length?l:"0",!b.zeroCents){var p=h.length-b.precision,q=h.substr(p,b.precision),r=q.length,s=b.precision>r?b.precision:r;m=(m+q).slice(-s)}var t=b.unit+l+b.separator+m+b.suffixUnit;return t.replace(j,"")},i.toPattern=function(d,e){var f,h="object"==typeof e?e.pattern:e,i=h.replace(/\W/g,""),j=h.split(""),k=d.toString().replace(/\W/g,""),l=k.replace(/\W/g,""),m=0,n=j.length,o="object"==typeof e?e.placeholder:void 0;for(f=0;n>f;f++){if(m>=k.length){if(i.length==l.length)return j.join("");if(void 0!==o&&i.length>l.length)return g(j,f,o).join("");break}if(j[f]===a&&k[m].match(/[0-9]/)||j[f]===b&&k[m].match(/[a-zA-Z]/)||j[f]===c&&k[m].match(/[0-9a-zA-Z]/))j[f]=k[m++];else if(j[f]===a||j[f]===b||j[f]===c)return void 0!==o?g(j,f,o).join(""):j.slice(0,f).join("")}return j.join("").substr(0,f)},i.toNumber=function(a){return a.toString().replace(/(?!^-)[^0-9]/g,"")},i.toAlphaNumeric=function(a){return a.toString().replace(/[^a-z0-9 ]/gi,"")},i.toAlphaNumericDash=function(a){return a.toString().replace(/[^a-z0-9 \-\_]/gi,"")},i});var formValidator=function(a){return this instanceof formValidator?(this.inputs=a,this.validationIndex=[],this.validForm=!0,this.invalids=[],this.formObj={},this.inputsIndex={},this.indexInputs(),void this.generateForm()):new formValidator(a)};formValidator.prototype={indexInputs:function(){for(var a=0;a<this.inputs.length;a++){var b=this.inputs[a].name;this.inputsIndex[b]=this.inputs[a],this.validationIndex.push({node:this.inputs[a],isRequired:this.inputs[a].dataset.jsRequired||null,validationMinLength:this.inputs[a].dataset.jsMinLegnth||null,validationMaxLength:this.inputs[a].dataset.jsMaxLegnth||null,validationType:this.inputs[a].dataset.jsValidation||null,isValid:!0})}},validateForm:function(){this.invalids=[],this.validForm=!0;for(var a=0;a<this.validationIndex.length;a++){this.validationIndex[a].isValid=!0;var b=this.validationIndex[a],c=getInputValue(b.node);if(b.isRequired||""!==c)if(b.isRequired&&!this.validateEmpty(c))this.devalidate(a);else if(b.validationMinLength&&!this.validateMinLength(c,b.validationMinLength))this.devalidate(a);else if(b.validationMaxLength&&!this.validateMaxLength(c,b.validationMaxLength))this.devalidate(a);else if(b.validationType){var d=!0;"email"===b.validationType&&(d=this.validateEmail(c)),"name"===b.validationType&&(d=this.validateName(c)),"password"===b.validationType&&(d=this.validatePassword(c)),"website"===b.validationType&&(d=this.validateWebsite(c)),"plain-text"===b.validationType&&(d=this.validatePlainText(c)),"numbers"===b.validationType&&(d=this.validateNumbers(c)),"list"===b.validationType&&(d=this.validateList(c)),"no-spaces-text"===b.validationType&&(d=this.validatePlainTextNoSpace(c)),"slug"===b.validationType&&(d=this.validateSlug(c)),"creditcard"===b.validationType&&(d=this.validateCreditCard(c)),"cvv"===b.validationType&&(d=this.validateCVV(c)),"permalinks"===b.validationType&&(d=this.validatePermalinks(c)),"comma-list-numbers"===b.validationType&&(d=this.validateCommaListNumbers(c)),"url-path"===b.validationType&&(d=this.validateURLPath(c)),d||this.devalidate(a)}}return this},getInput:function(a){return a in this.inputsIndex?this.inputsIndex[a]:null},generateForm:function(){for(var a=0;a<this.inputs.length;a++){var b=getInputValue(this.inputs[a]);is_numeric(b)&&(b=parseInt(b)),this.formObj[this.inputs[a].name]=b}return this.formAppend("public_key",GLOBAL_PUBLIC_KEY),this.formAppend("referer",window.location.href),this.formObj},formAppend:function(a,b){return this.formObj[a]=b,this.formObj},getForm:function(){return this.formObj},devalidate:function(a){this.validationIndex[a].isValid=!1,this.validForm=!1,this.invalids.push(this.validationIndex[a].node)},validateEmpty:function(a){a=a.trim();var b=/^\s*$/;return b.test(a)?!1:!0},validateEmail:function(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)},validateName:function(a){var b=/^[A-z \-]+$/;return b.test(a)},validateNumbers:function(a){var b=/^[\d]+$/;return b.test(a)},validatePassword:function(a){var b=/^(?=.*[^a-zA-Z]).{6,40}$/;return b.test(a)},validateWebsite:function(a){return re=/^(www\.|[A-z]|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/,re.test(a)},validateMinLength:function(a,b){return a.length>=b},validateMaxLength:function(a,b){return a.length<b},validatePlainText:function(a){var b=/^[A-z _-]+$/;return b.test(a)},validatePlainTextNoSpace:function(a){var b=/^[A-z_-]+$/;return b.test(a)},validateList:function(a){var b=/^[-\w\s]+(?:,[-\w\s]*)*$/;return b.test(a)},validateSlug:function(a){var b=/^[A-z\/\-\_]+$/;return b.test(a)},validateCreditCard:function(a){a=a.replace(/ /g,"");var b=/^[0-9]+$/,c=b.test(a);return c===!1?!1:16!==a.length?!1:!0},validateCVV:function(a){if(a.length>4)return!1;var b=/^[0-9]+$/;return b.test(a)},validatePermalinks:function(a){var b=/^((year|month|postname|category|author|day|hour|minute|second)\/)+$/;return b.test(a)},validateCommaListNumbers:function(a){var b=/^((\d+),\s)+(\d+)$/;return b.test(a)},validateURLPath:function(a){var b=/[A-z-_ \.\/]+/;return b.test(a)}};var ImageResizer=function(a,b,c){return this instanceof ImageResizer?(this.original_w=a,this.original_h=b,this.allow_enlarge=c,this.dest_x=0,this.dest_y=0,this.source_x,this.source_y,this.source_w,this.source_h,this.dest_w,void this.dest_h):new ImageResizer(a,b,c)};ImageResizer.prototype={resizeToHeight:function(a){var b=a/this.getSourceHeight(),c=this.getSourceWidth()*b;return this.resize(c,a),this},resizeToWidth:function(a){var b=a/this.getSourceWidth(),c=this.getSourceHeight()*b;return this.resize(a,c),this},scale:function(a){var b=this.getSourceWidth()*a/100,c=this.getSourceHeight()*a/100;return this.resize(b,c),this},resize:function(a,b){return this.allow_enlarge||(a>this.getSourceWidth()||b>this.getSourceHeight())&&(a=this.getSourceWidth(),b=this.getSourceHeight()),this.source_x=0,this.source_y=0,this.dest_w=a,this.dest_h=b,this.source_w=this.getSourceWidth(),this.source_h=this.getSourceHeight(),this},crop:function(a,b){this.allow_enlarge||(a>this.getSourceWidth()&&(a=this.getSourceWidth()),b>this.getSourceHeight()&&(b=this.getSourceHeight()));var c=this.getSourceWidth()/this.getSourceHeight(),d=a/b;if(c>d){this.resizeToHeight(b);var e=(this.getDestWidth()-a)/this.getDestWidth()*this.getSourceWidth();this.source_w=this.getSourceWidth()-e,this.source_x=e/2,this.dest_w=a}else{this.resizeToWidth(a);var f=(this.getDestHeight()-b)/this.getDestHeight()*this.getSourceHeight();this.source_h=this.getSourceHeight()-f,this.source_y=f/2,this.dest_h=b}return this},getSourceWidth:function(){return this.original_w},getSourceHeight:function(){return this.original_h},getDestWidth:function(){return this.dest_w},getDestHeight:function(){return this.dest_h}};var Uploader=function(a,b,c,d){return this instanceof Uploader?(this.files=a.files,this.acceptedMime=b,this.maxFiles="undefined"==typeof c?1:c,this.formObj=new FormData,this.maxFileSize="undefined"==typeof d?5e6:d,this):new Uploader(a,b,c,d)};Uploader.prototype={init:function(){for(var a=0;a<this.files.length;a++){var b=this.files[a];in_array(b.type,this.acceptedMime)&&this.formObj.append("file[]",b,b.name)}return this},validateMime:function(){for(var a=0;a<this.files.length;a++){var b=this.files[a];if(!in_array(b.type,this.acceptedMime))return!1}return!0},validateMaxFiles:function(){return this.files.length<=this.maxFiles},validateFileSizes:function(){for(var a=0;a<this.files.length;a++){var b=this.files[a];if(b.size>this.maxFileSize)return!1}return!0},append:function(a,b){return this.formObj.append(a,b),this},upload:function(a,b,c,d){var e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e.open("POST",a,!0),e.setRequestHeader("X_REQUESTED_WITH","XMLHttpRequest"),e.upload.onprogress=function(a){if(a.lengthComputable){var b=a.loaded/a.total*100;isCallable(d)&&d(b)}},e.onload=function(){if(4==e.readyState)if(e.status>=200&&e.status<300||304===e.status){var a=e.responseXML||e.responseText;isCallable(b)&&b(a,e)}else isCallable(c)&&c(e,e.status)},e.send(this.formObj)}},function(a,b){a.pluralize=b()}(this,function(){function a(l,m){if(m="undefined"==typeof m?2:m,1===m)return l;if(a.word=l,a.lowercase=l.toLowerCase(),a.upperCase=l.toUpperCase(),a.sentenceCase=j(l),a.casing=e(),a.sibilants=["x","s","z","s"],a.vowels=["a","e","i","o","u"],a.consonants=["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"],b())return l;var n=c();if(n)return f(n,a.casing);if(k(g(a.lowercase,1),a.sibilants)||"ch"===g(a.lowercase,2))return f(l+"es",a.casing);if(k(h(a.lowercase,1),a.vowels)&&"y"===g(a.lowercase,1))return f(l+"s",a.casing);if(k(h(a.lowercase,1),a.consonants)&&"y"===g(a.lowercase,1))return f(i(l,1)+"ies",a.casing);if(k(h(a.lowercase,1),a.consonants)&&"o"===g(a.lowercase,1))return f(l+"s",a.casing);if(k(h(a.lowercase,1),a.vowels)&&"o"===g(a.lowercase,1))return f(l+"s",a.casing);if("ness"===g(a.lowercase,4)||"ess"===g(a.lowercase,3))return l;var o=d(a.lowercase);return o?f(i(l,o[0])+o[1],a.casing):l+"s"}function b(){var b=["sheep","fish","deer","series","species","money","rice","information","equipment","bison","buffalo","duck","pike","plankton","salmon","squid","swine","trout","moose","aircraft","you","pants","shorts","eyeglasses","scissors","offspring","eries","premises","kudos","corps","heep"];return k(a.lowercase,b)}function c(){var b={addendum:"addenda",alga:"algae",alumna:"alumnae",alumnus:"alumni",analysis:"analyses",antenna:"antennae",apparatus:"apparatuses",appendix:"appendices",axis:"axes",bacillus:"bacilli",bacterium:"bacteria",basis:"bases",beau:"beaux",kilo:"kilos",bureau:"bureaus",bus:"busses",cactus:"cacti",calf:"calves",child:"children",corps:"corps",corpus:"corpora",crisis:"crises",criterion:"criteria",curriculum:"curricula",datum:"data",deer:"deer",die:"dice",dwarf:"dwarves",diagnosis:"diagnoses",echo:"echoes",elf:"elves",ellipsis:"ellipses",embargo:"embargoes",emphasis:"emphases",
erratum:"errata",fireman:"firemen",fish:"fish",focus:"focuses",foot:"feet",formula:"formulas",fungus:"fungi",genus:"genera",goose:"geese",half:"halves",hero:"heroes",hippopotamus:"hippopotami",hoof:"hooves",hypothesis:"hypotheses",index:"indices",knife:"knives",leaf:"leaves",life:"lives",loaf:"loaves",louse:"lice",man:"men",matrix:"matrices",means:"means",medium:"media",memorandum:"memoranda",millennium:"millenniums",moose:"moose",mosquito:"mosquitoes",mouse:"mice",nebula:"nebulae",neurosis:"neuroses",nucleus:"nuclei",neurosis:"neuroses",nucleus:"nuclei",oasis:"oases",octopus:"octopi",ovum:"ova",ox:"oxen",paralysis:"paralyses",parenthesis:"parentheses",person:"people",phenomenon:"phenomena",potato:"potatoes",radius:"radii",scarf:"scarfs",self:"selves",series:"series",sheep:"sheep",shelf:"shelves",scissors:"scissors",species:"species",stimulus:"stimuli",stratum:"strata",syllabus:"syllabi",symposium:"symposia",synthesis:"syntheses",synopsis:"synopses",tableau:"tableaux",that:"those",thesis:"theses",thief:"thieves","this":"these",tomato:"tomatoes",tooth:"teeth",torpedo:"torpedoes",vertebra:"vertebrae",veto:"vetoes",vita:"vitae",watch:"watches",wife:"wives",wolf:"wolves",woman:"women",is:"are",was:"were",he:"they",she:"they",i:"we",zero:"zeroes"};return l(b[a.lowercase])?b[a.lowercase]:!1}function d(){var b=g(a.lowercase,1),c=g(a.lowercase,2),d=g(a.lowercase,3);return"zoon"===g(a.lowercase,4)?[4,"zoa"]:"eau"===d?[3,"eaux"]:"ieu"===d?[3,"ieux"]:"ion"===d?[3,"ia"]:"oof"===d?[3,"ooves"]:"an"===c?[2,"en"]:"ch"===c?[2,"ches"]:"en"===c?[2,"ina"]:"ex"===c?[2,"exes"]:"is"===c?[2,"ises"]:"ix"===c?[2,"ices"]:"nx"===c?[2,"nges"]:"nx"===c?[2,"nges"]:"fe"===c?[2,"ves"]:"on"===c?[2,"a"]:"sh"===c?[2,"shes"]:"um"===c?[2,"a"]:"us"===c?[2,"i"]:"x"===c?[1,"xes"]:"y"===c?[1,"ies"]:"a"===b?[1,"ae"]:"o"===b?[1,"oes"]:"f"===b?[1,"ves"]:!1}function e(){var b="toLowerCase";return b=a.lowercase===a.word?"lower":b,b=a.upperCase===a.word?"upper":b,b=a.sentenceCase===a.word?"sentence":b}function f(a,b){return"lower"===b?a.toLowerCase():"upper"===b?a.toUpperCase():"sentence"===b?j(a):a}function g(a,b){return a.substr(a.length-b)}function h(a,b){return a.split("").reverse().join("").charAt(b)}function i(a,b){return a.substring(0,a.length-b)}function j(a){return a.charAt(0).toUpperCase()+a.slice(1)}function k(a,b,c){var d="",e=!!c;if(e){for(d in b)if(b[d]===a)return!0}else for(d in b)if(b[d]==a)return!0;return!1}function l(){var a,b=arguments,c=b.length,d=0;if(0===c)throw new Error("Empty isset");for(;d!==c;){if(b[d]===a||null===b[d])return!1;d++}return!0}return a});var GLOBAL_PUBLIC_KEY="",GLOBAL_AJAX_ENABLED=!1,GLOBAL_AJAX_URL=window.location.href.replace(/admin(.+)/,"admin/"),GLOBAL_AJAX_QUEUE=[];Ajax.post(GLOBAL_AJAX_URL,{ajaxRequest:"public_key"},function(a){response=isJSON(a),response&&(GLOBAL_AJAX_ENABLED=!0,GLOBAL_PUBLIC_KEY=decrypt(response.details.k,response.details.s),bufferAjaxQueue())});var GLOBAL_PROGRESS=$(".js-global-progress .progress");!function(){function a(a){b[a].addEventListener("click",function(a){a.preventDefault()})}var b=$All("form.ajax-form button.submit");if(nodeExists($("form.ajax-form button.submit")))for(var c=0;c<b.length;c++)a(c)}(),function(){var a=function(b){return this instanceof a?(this.currentPage=1,this.maxPages=1,this.sortBy="newest",this.expanded=!1,this.search=!1,this.haveItems=!1,this.node_list_listwrap=b,this.node_list_list=$(".js-ajax-list",this.node_list_listwrap),this.node_list_itemPublish=[],this.node_list_itemUnpublish=[],this.node_list_itemDeletes=[],this.node_list_powersWrap=$(".js-list-powers",this.node_list_listwrap),this.node_list_powers_checkAll=$(".js-check-all",this.node_list_powersWrap),this.node_list_powers_searchInput=$(".js-search-input",this.node_list_powersWrap),this.node_list_powers_cancelSearch=$(".js-cancel-search",this.node_list_powersWrap),this.node_list_powers_expandList=$(".js-expand-list",this.node_list_powersWrap),this.node_list_powers_sortOptions=$All(".js-sort-list .drop a",this.node_list_powersWrap),this.node_list_powers_publish=$(".js-publish",this.node_list_powersWrap),this.node_list_powers_delete=$(".js-delete",this.node_list_powersWrap),this.node_list_powers_unpublish=$(".js-unpublish",this.node_list_powersWrap),this.node_list_nav_navWrap=$(".js-list-nav",this.node_list_listwrap),this.node_list_nav_pageInput=$(".js-current-page",this.node_list_nav_navWrap),this.node_list_nav_maxPages=$(".js-max-pages",this.node_list_nav_navWrap),this.node_list_nav_nextPage=$(".js-next",this.node_list_nav_navWrap),this.node_list_nav_prevPage=$(".js-prev",this.node_list_nav_navWrap),this.node_list_items=[],this.have_items=!empty(this.node_list_items),this.node_list_expandItem=[],this.node_list_collapseItems=[],this):new a(b)};a.prototype={init:function(){var a=this,b=this.getListForm();makeLoading(this.node_list_list,!0,300),queueAjax(GLOBAL_AJAX_URL,"POST",b,function(b){a.dispatchList(b),a.addDynamicListeners()},function(b){a.handleError()}),this.initializeListeners()},getListForm:function(){return this.currentPage=parseInt(this.node_list_nav_pageInput.value.trim()),this.search=""===this.node_list_powers_searchInput.value.trim()?!1:this.node_list_powers_searchInput.value.trim(),{search:this.search,page:this.currentPage,sortBy:this.sortBy,ajaxRequest:this.node_list_list.dataset.listName,public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href}},getItemActionForm:function(a,b){return{article_ids:b,ajaxRequest:a,public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href}},getCheckedItems:function(){var a=[];if(this.have_items)for(var b=$All(".js-item-check",this.node_list_list),c=0;c<b.length;c++){var d=b[c];1==d.checked&&a.push(parentUntillClass(d,"js-item").dataset.articleId)}return a},initializeListeners:function(){var a=this;VMasker(this.node_list_nav_pageInput).maskNumber(),this.node_list_nav_pageInput.addEventListener("keyup",function(b){a.skipToPage(b)}),this.node_list_powers_checkAll.addEventListener("change",function(){var b=event.target.checked;b&&a.haveItems?a.checkAll():a.uncheckAll()}),this.node_list_powers_searchInput.addEventListener("keyup",function(b){a.initSearch(b)}),this.node_list_powers_searchInput.addEventListener("blur",function(b){""===a.node_list_powers_searchInput.value.trim()&&a.search!==!1&&a.clearSearch()}),this.node_list_powers_cancelSearch.addEventListener("click",function(b){b.preventDefault(),a.node_list_powers_searchInput.value="",a.search!==!1&&a.clearSearch()});for(var b=0;b<this.node_list_powers_sortOptions.length;b++){var c=this.node_list_powers_sortOptions[b];c.addEventListener("click",function(){var b=event.target.dataset.sort;b!==a.sortBy&&(a.sortBy=b,a.refreshList())})}this.node_list_powers_expandList.addEventListener("click",function(b){b.preventDefault();var c=$All(".js-item",a.node_list_list);empty(c)||(a.expanded===!1?(a.expandList(c),a.expanded=!0,a.node_list_powers_expandList.innerText="Collapse"):(a.collapseList(c),a.expanded=!1,a.node_list_powers_expandList.innerText="Expand"))}),this.node_list_powers_publish.addEventListener("click",function(){event.preventDefault();var b=a.getCheckedItems();if(!empty(b)){var c=a.getItemActionForm("admin_publish_articles",b),d=a.getArticleTitles(c.article_ids);a.confirmItemAction(c,"publish",d)}}),this.node_list_powers_delete.addEventListener("click",function(){event.preventDefault();var b=a.getCheckedItems();if(!empty(b)){var c=a.getItemActionForm("admin_delete_articles",b),d=a.getArticleTitles(c.article_ids);a.confirmItemAction(c,"delete",d)}}),this.node_list_powers_unpublish.addEventListener("click",function(){event.preventDefault();var b=a.getCheckedItems();if(!empty(b)){var c=a.getItemActionForm("admin_unpublish_articles",b),d=a.getArticleTitles(c.article_ids);a.confirmItemAction(c,"draft",d)}}),this.node_list_nav_nextPage.addEventListener("click",function(){event.preventDefault(),a.skipToPage(a.currentPage+1)}),this.node_list_nav_prevPage.addEventListener("click",function(){event.preventDefault(),a.skipToPage(a.currentPage-1)})},addDynamicListeners:function(){var a=this;if(this.node_list_items=$All(".js-item",this.node_list_listwrap),this.have_items=!empty(this.node_list_items),this.node_list_expandItem=$All(".js-expand-item",this.node_list_listwrap),this.node_list_collapseItems=$All(".js-collapse-item",this.node_list_listwrap),this.node_list_itemPublish=$All(".js-item-publish",this.node_list_listwrap),this.node_list_itemUnpublish=$All(".js-item-unpublish",this.node_list_listwrap),this.node_list_itemDeletes=$All(".js-item-delete",this.node_list_listwrap),this.have_items)for(var b=0;b<this.node_list_expandItem.length;b++){var c=this.node_list_expandItem[b];c.addEventListener("click",function(){event.preventDefault();var a=parentUntillClass(event.target,"js-item");addClass(a,"expanded")})}if(this.have_items)for(var d=0;d<this.node_list_collapseItems.length;d++){var e=this.node_list_collapseItems[d];e.addEventListener("click",function(){event.preventDefault();var a=parentUntillClass(event.target,"js-item");removeClass(a,"expanded")})}if(this.have_items)for(var f=0;f<this.node_list_itemPublish.length;f++){var g=this.node_list_itemPublish[f];g.addEventListener("click",function(){event.preventDefault();var b=closest(event.target,"a"),c=parentUntillClass(event.target,"js-item"),d=a.getItemActionForm("admin_publish_articles",[c.dataset.articleId]),e=[c.dataset.articleTitle];hasClass(b.parentNode,"disabled")||a.confirmItemAction(d,"publish",e)})}if(this.have_items)for(var h=0;h<this.node_list_itemUnpublish.length;h++){var g=this.node_list_itemUnpublish[h];g.addEventListener("click",function(){event.preventDefault();var b=closest(event.target,"a"),c=parentUntillClass(event.target,"js-item"),d=a.getItemActionForm("admin_unpublish_articles",[c.dataset.articleId]),e=[c.dataset.articleTitle];hasClass(b.parentNode,"disabled")||a.confirmItemAction(d,"draft",e)})}if(this.have_items)for(var i=0;i<this.node_list_itemDeletes.length;i++){var g=this.node_list_itemDeletes[i];g.addEventListener("click",function(){event.preventDefault();var b=closest(event.target,"a"),c=parentUntillClass(event.target,"js-item"),d=a.getItemActionForm("admin_delete_articles",[c.dataset.articleId]),e=[c.dataset.articleTitle];hasClass(b.parentNode,"disabled")||a.confirmItemAction(d,"delete",e)})}},getArticleTitles:function(a){for(var b=[],c=0;c<a.length;c++){var d=$('[data-article-id="'+a[c]+'"]',this.node_list_list);nodeExists(d)&&b.push(d.dataset.articleTitle)}return b},checkAll:function(){var a=$All(".js-item-select input[type='checkbox']",this.node_list_list);if(!empty(a))for(var b=0;b<a.length;b++)a[b].checked=!0},uncheckAll:function(){var a=$All(".js-item-select input[type='checkbox']",this.node_list_list);if(!empty(a)&&this.haveItems)for(var b=0;b<a.length;b++)a[b].checked=!1;this.node_list_powers_checkAll.checked=!1},expandList:function(a){for(var b=0;b<a.length;b++)addClass(a[b],"expanded")},collapseList:function(a){for(var b=0;b<a.length;b++)removeClass(a[b],"expanded")},initSearch:function(a){if("string"==typeof a){var b=a;return this.node_list_powers_searchInput.value=b,addClass(this.node_list_powers_searchInput.parentNode,"active"),this.search=b,this.currentPage=1,this.maxPages=1,this.node_list_nav_pageInput.value=1,void triggerEvent(this.node_list_tabClickers[0],"click")}var b=this.node_list_powers_searchInput.value.trim();return""===b&&13==a.keyCode&&this.search!==!1?void this.clearSearch():(addClass(this.node_list_powers_searchInput.parentNode,"active"),void(13==a.keyCode&&(this.search=b,this.refreshList())))},clearSearch:function(){removeClass(this.node_list_powers_searchInput.parentNode,"active"),this.search=!1,this.refreshList()},skipToPage:function(a){var b=!1;"number"==typeof a?b=a:a.keyCode&&13==a.keyCode&&(b=this.node_list_nav_pageInput.value.trim(),b=""===b?0:b,b=parseInt(b)),b!==!1&&(b>this.maxPages||1>b||b===this.currentPage?this.node_list_nav_pageInput.value=this.currentPage:(this.currentPage=b,this.node_list_nav_pageInput.value=b,this.refreshList()))},updateNav:function(a){var b=this.currentPage;this.maxPages=count(a),this.node_list_nav_maxPages.innerHTML="of "+this.maxPages,b>=this.maxPages?addClass(this.node_list_nav_nextPage,"disabled"):removeClass(this.node_list_nav_nextPage,"disabled"),b>1?removeClass(this.node_list_nav_prevPage,"disabled"):addClass(this.node_list_nav_prevPage,"disabled")},dispatchList:function(a){a=isJSON(a),a&&isset(a.details[this.currentPage-1])&&!empty(a.details[this.currentPage-1])?(this.updateNav(a.details),this.uncheckAll(),this.haveItems=!0,this.insertArticles(a.details[this.currentPage-1])):this.noList()},handleError:function(){this.haveItems=!1,this.noList()},insertArticles:function(a){var b=this.node_list_list,c="<tbody>",d=this.expanded===!0?"expanded":"";undoLoading(b,!0),this.node_list_items=$All(".js-item",this.node_list_listwrap),this.have_items=!empty(this.node_list_items),this.node_list_expandItem=$All(".js-expand-item",this.node_list_listwrap),this.node_list_collapseItems=$All(".js-collapse-item",this.node_list_listwrap),this.node_list_itemPublish=$All(".js-item-approve",this.node_list_listwrap),this.node_list_itemUnpublish=$All(".js-item-spam",this.node_list_listwrap),this.node_list_itemDeletes=$All(".js-item-delete",this.node_list_listwrap);for(var e=0;e<a.length;e++){var f=a[e],g=f.excerpt.length>200,h=g?'<a href="#" class="more js-expand-item">more</a>':"",i=g?'<a href="#" class="less js-collapse-item">less</a>':"",j="published"===f.status?"disabled":"",k="draft"===f.status?"disabled":"",l=this.createTagsList(f.tags);c+=cleanInnerHTML(['<tr class="article list-item js-item '+f.status+" "+d+'" data-article-title="'+f.title+'" data-article-id="'+f.id+'" data-article-type="'+f.type+'">',"<td>",'<h5 class="title">','<a href="'+f.permalink+'" target="_blank">'+f.title+"</a>","</h5>",'<div class="article-body">','<div class="article-meta">','<span class="article-author">','<span>By </span><a href="'+f.author.permalink+'" target="_blank">'+f.author.name+"</a>","</span>",'<span class="bullet"> • </span>','<span class="article-category">','<span>In </span><a href="'+f.category.permalink+'" target="_blank">'+f.category.name+"</a>","</span>",'<span class="bullet"> • </span>','<abbr class="time-ago">',timeAgo(f.created)," ago","</abbr>",'<span class="bullet"> • </span>','<span class="article-category">',"<span>"+ucfirst(f.status)+"</span>","</span>",'<span class="bullet"> • </span>','<span class="article-type">',"<span>"+ucfirst(f.type)+"</span>","</span>",'<div class="clearfix tagslist">',l,"</div>","</div>",'<div class="check-wrap js-item-select">','<input class="js-item-check" id="article-select-'+f.id+'" type="checkbox" name="article-select-'+f.id+'">','<label class="checkbox small mini" for="article-select-'+f.id+'"></label>',"</div>",'<div class="item-preview">',strReduce(f.excerpt,200,"... "),h,"</div>",'<div class="item-full">',f.excerpt+" ",i,"</div>",'<ul class="article-actions js-article-actions">','<li class="js-item-publish publish '+j+'">','<a href="#">','<svg viewBox="0 0 512 512"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#checkmark"></use></svg>',"Publish","</a>","</li>",'<li class="js-item-unpublish unpublish '+k+'">','<a href="#">','<svg viewBox="0 0 500 500"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#file-text"></use></svg>',"Draft","</a>","</li>",'<li class="js-item-delete delete">','<a href="#">','<svg viewBox="0 0 100 100"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#trash"></use></svg>',"Delete","</a>","</li>",'<li class="edit">','<a target="_blank" href="'+f.edit_permalink+'">','<svg viewBox="0 0 100 100"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#pen"></use></svg>',"Edit","</a>","</li>","</ul>","</div>","</td>","</tr>"])}c+="</tbody>",newNode("table","horizontal article-table",null,c,b)},createTagsList:function(a){for(var b="",c=a.length,d=0;c>d;d++){var e=a[d];b+=cleanInnerHTML(['<span class="tag">','<a href="'+e.permalink+'" target="_blank">'+e.name+"</a>","</span>"]),c-1>d&&c>1&&(b+='<span class="bullet"> • </span>')}return b},noList:function(){var a="No articles to display. There are no articles that match this status or search.";undoLoading(this.node_list_list,!0),addClass(this.node_list_nav_nextPage,"disabled"),addClass(this.node_list_nav_prevPage,"disabled"),insertMessage("plain",a,this.node_list_list,"small",!0)},refreshList:function(){var a=this.getListForm(),b=this;a.ajaxRequest=this.node_list_list.dataset.listName,makeLoading(this.node_list_list,!0,300),GLOBAL_AJAX_ENABLED?Ajax.post(GLOBAL_AJAX_URL,a,function(a){b.dispatchList(a),b.addDynamicListeners()},function(a){b.handleError()}):this.handleError()},confirmItemAction:function(a,b,c){if(GLOBAL_AJAX_ENABLED){var d=this,e=count(a.article_ids),f=e>1?e+" ":"",g="Are you POSITIVE you want to "+b+" the following "+f+pluralize("article",e)+":<br>"+implode(c,"• ","<br>");pushCallBackNotification("info",g,ucfirst(b)+" "+pluralize("Article",e),d.actionArticle,[a,b,d],null,null)}else pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")},actionArticle:function(){var a=arguments[0][0],b=arguments[0][1],c=arguments[0][2],d=count(a.article_ids);Ajax.post(GLOBAL_AJAX_URL,a,function(a){xhr=isJSON(a),"publish"===b&&(b="published"),"draft"===b&&(b="changed to draft"),"delete"===b&&(b="deleted"),xhr?(pushNotification("success",d+" "+pluralize("article",d)+"were successfully "+b),c.refreshList()):pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")},function(a){pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")})}};var b=$(".js-ajax-list-wrap.js-articles-wrap");nodeExists(b)&&a(b).init()}(),function(){var a=function(b){return this instanceof a?(this.currentPage=1,this.maxPages=1,this.sortBy="name",this.expanded=!1,this.search=!1,this.haveItems=!1,this.node_list_listwrap=b,this.node_list_list=$(".js-ajax-list",this.node_list_listwrap),this.node_list_itemClears=[],this.node_list_itemEdits=[],this.node_list_itemDeletes=[],this.node_list_itemSaveEdits=[],this.node_list_itemCancelEdits=[],this.node_list_itemSlugInputs=[],this.node_list_powersWrap=$(".js-list-powers",this.node_list_listwrap),this.node_list_powers_checkAll=$(".js-check-all",this.node_list_powersWrap),this.node_list_powers_searchInput=$(".js-search-input",this.node_list_powersWrap),this.node_list_powers_cancelSearch=$(".js-cancel-search",this.node_list_powersWrap),this.node_list_powers_expandList=$(".js-expand-list",this.node_list_powersWrap),this.node_list_powers_sortOptions=$All(".js-sort-list .drop a",this.node_list_powersWrap),this.node_list_powers_delete=$(".js-delete",this.node_list_powersWrap),this.node_list_powers_clear=$(".js-clear",this.node_list_powersWrap),this.node_list_nav_navWrap=$(".js-list-nav",this.node_list_listwrap),this.node_list_nav_pageInput=$(".js-current-page",this.node_list_nav_navWrap),this.node_list_nav_maxPages=$(".js-max-pages",this.node_list_nav_navWrap),this.node_list_nav_nextPage=$(".js-next",this.node_list_nav_navWrap),this.node_list_nav_prevPage=$(".js-prev",this.node_list_nav_navWrap),this.node_list_items=[],this.have_items=!empty(this.node_list_items),this.node_list_expandItem=[],this.node_list_collapseItems=[],this):new a(b)};a.prototype={init:function(){var a=this,b=this.getListForm();makeLoading(this.node_list_list,!0,300),queueAjax(GLOBAL_AJAX_URL,"POST",b,function(b){a.dispatchList(b),a.addDynamicListeners()},function(b){a.handleError()}),this.initializeListeners()},getListForm:function(){return this.currentPage=parseInt(this.node_list_nav_pageInput.value.trim()),this.search=""===this.node_list_powers_searchInput.value.trim()?!1:this.node_list_powers_searchInput.value.trim(),{search:this.search,page:this.currentPage,sortBy:this.sortBy,ajaxRequest:this.node_list_list.dataset.listName,public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href}},getItemActionForm:function(a,b){return{entries:b,ajaxRequest:a,public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href}},getCheckedItems:function(){var a=[];if(this.have_items)for(var b=$All(".js-item-check",this.node_list_list),c=0;c<b.length;c++){var d=b[c];if(1==d.checked){var e=parentUntillClass(d,"js-item");a.push({name:e.dataset.tagName,type:e.dataset.tagType,id:e.dataset.tagId})}}return a},initializeListeners:function(){var a=this;VMasker(this.node_list_nav_pageInput).maskNumber(),this.node_list_nav_pageInput.addEventListener("keyup",function(b){a.skipToPage(b)}),this.node_list_powers_checkAll.addEventListener("change",function(){var b=event.target.checked;b&&a.haveItems?a.checkAll():a.uncheckAll()}),this.node_list_powers_searchInput.addEventListener("keyup",function(b){a.initSearch(b)}),this.node_list_powers_searchInput.addEventListener("blur",function(b){""===a.node_list_powers_searchInput.value.trim()&&a.search!==!1&&a.clearSearch()}),this.node_list_powers_cancelSearch.addEventListener("click",function(b){b.preventDefault(),a.node_list_powers_searchInput.value="",a.search!==!1&&a.clearSearch()});for(var b=0;b<this.node_list_powers_sortOptions.length;b++){var c=this.node_list_powers_sortOptions[b];c.addEventListener("click",function(){var b=event.target.dataset.sort;b!==a.sortBy&&(a.sortBy=b,a.refreshList())})}this.node_list_powers_expandList.addEventListener("click",function(b){b.preventDefault();var c=$All(".js-item",a.node_list_list);empty(c)||(a.expanded===!1?(a.expandList(c),a.expanded=!0,a.node_list_powers_expandList.innerText="Collapse"):(a.collapseList(c),a.expanded=!1,a.node_list_powers_expandList.innerText="Expand"))}),this.node_list_powers_delete.addEventListener("click",function(){event.preventDefault();var b=a.getCheckedItems();if(!empty(b)){var c=a.getItemActionForm("admin_delete_tags",b);a.confirmItemAction(c,"delete",b)}}),this.node_list_powers_clear.addEventListener("click",function(){event.preventDefault();var b=a.getCheckedItems();if(!empty(b)){var c=a.getItemActionForm("admin_clear_tags",b);a.confirmItemAction(c,"clear",b)}}),this.node_list_nav_nextPage.addEventListener("click",function(){event.preventDefault(),a.skipToPage(a.currentPage+1)}),this.node_list_nav_prevPage.addEventListener("click",function(){event.preventDefault(),a.skipToPage(a.currentPage-1)})},addDynamicListeners:function(){var a=this;if(this.node_list_items=$All(".js-item",this.node_list_listwrap),this.have_items=!empty(this.node_list_items),this.node_list_expandItem=$All(".js-expand-item",this.node_list_listwrap),this.node_list_collapseItems=$All(".js-collapse-item",this.node_list_listwrap),this.node_list_itemDeletes=$All(".js-item-delete",this.node_list_listwrap),this.node_list_itemClears=$All(".js-item-clear",this.node_list_listwrap),this.node_list_itemEdits=$All(".js-item-edit",this.node_list_listwrap),this.node_list_itemSaveEdits=$All(".js-save-edit",this.node_list_listwrap),this.node_list_itemCancelEdits=$All(".js-cancel-edit",this.node_list_listwrap),this.node_list_itemSlugInputs=$All("input.js-tag-slug",this.node_list_listwrap),this.have_items)for(var b=0;b<this.node_list_expandItem.length;b++){var c=this.node_list_expandItem[b];c.addEventListener("click",function(){event.preventDefault();var a=parentUntillClass(event.target,"js-item");addClass(a,"expanded")})}if(this.have_items)for(var d=0;d<this.node_list_collapseItems.length;d++){var e=this.node_list_collapseItems[d];e.addEventListener("click",function(){event.preventDefault();var a=parentUntillClass(event.target,"js-item");removeClass(a,"expanded")})}if(this.have_items)for(var f=0;f<this.node_list_itemClears.length;f++){var g=this.node_list_itemClears[f];g.addEventListener("click",function(){event.preventDefault();var b=closest(event.target,"a"),c=parentUntillClass(event.target,"js-item"),d=[{name:c.dataset.tagName,type:c.dataset.tagType,id:c.dataset.tagId}],e=a.getItemActionForm("admin_clear_tags",d);hasClass(b.parentNode,"disabled")||a.confirmItemAction(e,"clear",d)})}if(this.have_items)for(var h=0;h<this.node_list_itemDeletes.length;h++){var g=this.node_list_itemDeletes[h];g.addEventListener("click",function(){event.preventDefault();var b=closest(event.target,"a"),c=parentUntillClass(event.target,"js-item"),d=[{name:c.dataset.tagName,type:c.dataset.tagType,id:c.dataset.tagId}],e=a.getItemActionForm("admin_delete_tags",d);hasClass(b.parentNode,"disabled")||a.confirmItemAction(e,"delete",d)})}if(this.have_items)for(var i=0;i<this.node_list_itemEdits.length;i++){var g=this.node_list_itemEdits[i];g.addEventListener("click",function(){event.preventDefault();var a=parentUntillClass(event.target,"js-item");hasClass(a,"edit")?removeClass(a,"edit"):addClass(a,"edit")})}if(this.have_items)for(var j=0;j<this.node_list_itemSaveEdits.length;j++){var g=this.node_list_itemSaveEdits[j];g.addEventListener("click",function(){var b=parentUntillClass(event.target,"js-item"),c=[{name:$(".js-tag-name",b).value.trim(),slug:$(".js-tag-slug",b).value.trim(),type:b.dataset.tagType,id:b.dataset.tagId}],d=a.getItemActionForm("admin_edit_tag",c);(c[0].name!==b.dataset.tagName||c[0].slug!==b.dataset.tagSlug)&&a.ajaxEditTag(d,b)})}if(this.have_items)for(var k=0;k<this.node_list_itemCancelEdits.length;k++){var g=this.node_list_itemCancelEdits[k];g.addEventListener("click",function(){var a=parentUntillClass(event.target,"js-item");$(".js-tag-name",a).value=a.dataset.tagName,$(".js-tag-slug",a).value=a.dataset.tagSlug,removeClass(a,"edit")})}if(this.have_items)for(var l=0;l<this.node_list_itemSlugInputs.length;l++){var m=this.node_list_itemSlugInputs[l];VMasker(m).maskAlphaNumDash()}},checkAll:function(){var a=$All(".js-item-select input[type='checkbox']",this.node_list_list);if(!empty(a))for(var b=0;b<a.length;b++)a[b].checked=!0},uncheckAll:function(){var a=$All(".js-item-select input[type='checkbox']",this.node_list_list);if(!empty(a)&&this.haveItems)for(var b=0;b<a.length;b++)a[b].checked=!1;this.node_list_powers_checkAll.checked=!1},expandList:function(a){for(var b=0;b<a.length;b++)addClass(a[b],"expanded")},collapseList:function(a){for(var b=0;b<a.length;b++)removeClass(a[b],"expanded")},initSearch:function(a){if("string"==typeof a){var b=a;return this.node_list_powers_searchInput.value=b,addClass(this.node_list_powers_searchInput.parentNode,"active"),this.search=b,this.currentPage=1,this.maxPages=1,this.node_list_nav_pageInput.value=1,void triggerEvent(this.node_list_tabClickers[0],"click")}var b=this.node_list_powers_searchInput.value.trim();return""===b&&13==a.keyCode&&this.search!==!1?void this.clearSearch():(addClass(this.node_list_powers_searchInput.parentNode,"active"),void(13==a.keyCode&&(this.search=b,this.refreshList())))},clearSearch:function(){removeClass(this.node_list_powers_searchInput.parentNode,"active"),this.search=!1,this.refreshList()},skipToPage:function(a){var b=!1;"number"==typeof a?b=a:a.keyCode&&13==a.keyCode&&(b=this.node_list_nav_pageInput.value.trim(),b=""===b?0:b,b=parseInt(b)),b!==!1&&(b>this.maxPages||1>b||b===this.currentPage?this.node_list_nav_pageInput.value=this.currentPage:(this.currentPage=b,this.node_list_nav_pageInput.value=b,this.refreshList()))},updateNav:function(a){var b=this.currentPage;this.maxPages=count(a),this.node_list_nav_maxPages.innerHTML="of "+this.maxPages,b>=this.maxPages?addClass(this.node_list_nav_nextPage,"disabled"):removeClass(this.node_list_nav_nextPage,"disabled"),b>1?removeClass(this.node_list_nav_prevPage,"disabled"):addClass(this.node_list_nav_prevPage,"disabled")},dispatchList:function(a){a=isJSON(a),a&&isset(a.details[this.currentPage-1])&&!empty(a.details[this.currentPage-1])?(this.updateNav(a.details),this.uncheckAll(),this.haveItems=!0,this.insertTags(a.details[this.currentPage-1])):this.noList()},handleError:function(){this.haveItems=!1,this.noList()},insertTags:function(a){var b=this.node_list_list,c="<tbody>",d=this.expanded===!0?"expanded":"";undoLoading(b,!0),this.node_list_items=$All(".js-item",this.node_list_listwrap),this.have_items=!empty(this.node_list_items),this.node_list_expandItem=$All(".js-expand-item",this.node_list_listwrap),this.node_list_collapseItems=$All(".js-collapse-item",this.node_list_listwrap),this.node_list_itemClears=$All(".js-item-clear",this.node_list_listwrap),this.node_list_itemEdits=$All(".js-item-edit",this.node_list_listwrap),this.node_list_itemDeletes=$All(".js-item-delete",this.node_list_listwrap);for(var e=0;e<a.length;e++){var f=a[e],g=count(f.posts)>2,h=g?'<a href="#" class="more js-expand-item">more</a>':"",i=g?'<a href="#" class="less js-collapse-item">less</a>':"",j=this.createPostsList(f.posts),k=this.createPostsList(arrReduce(f.posts,10));c+=cleanInnerHTML(['<tr class="tag list-item js-item '+d+'" data-tag-id="'+f.id+'" data-tag-name="'+f.name+'" data-tag-slug="'+f.slug+'" data-tag-type="'+f.type+'">',"<td>",'<h5 class="title">','<a href="'+f.permalink+"#tag-"+f.id+'" target="_blank">'+f.name+"</a>","</h5>",'<div class="tag-body">','<span class="tag-meta">','<span class="label">@ </span>','<a href="'+f.permalink+'" >'+f.slug+"</a>",'<span class="bullet"> • </span>','<span class="label">Under </span>',"<strong>"+pluralize(ucfirst(f.type))+"</strong>",'<span class="bullet"> • </span>','<span class="label">With </span>',"<strong>"+count(f.posts)+"</strong> "+pluralize("article",count(f.posts)),"</span>",'<div class="item-preview articles-list">',k+" ",,h,"</div>",'<div class="item-full articles-list">',j+" ",i,"</div>",'<div class="edit-tag js-edit-tag">','<div class="input-wrap clearfix">',"<label>Name:</label>",'<input class="input-default small js-tag-name" value="'+f.name+'" />',"</div>",'<div class="input-wrap clearfix">',"<label>Slug:</label>",'<input class="input-default small js-tag-slug" value="'+f.slug+'" />',"</div>",'<div class="input-wrap">','<button class="button small submit save-edit js-save-edit">Save</button>','<button class="button small cancel js-cancel-edit">Cancel</button>',"</div>","</div>",'<div class="check-wrap js-item-select">','<input class="js-item-check" id="'+f.type+"-select-"+f.id+'" type="checkbox" name="'+f.type+"-select-"+f.id+'">','<label class="checkbox small mini" for="'+f.type+"-select-"+f.id+'"></label>',"</div>",'<ul class="tag-actions js-tag-actions">','<li class="clear-item js-item-clear">','<a href="#">','<svg viewBox="0 0 512 512"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#checkmark"></use></svg>',"Clear","</a>","</li>",'<li class="delete js-item-delete">','<a href="#">','<svg viewBox="0 0 100 100"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#trash"></use></svg>',"Delete","</a>","</li>",'<li class="edit js-item-edit">','<a href="#">','<svg viewBox="0 0 100 100"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#pen"></use></svg>',"Edit","</a>","</li>","</ul>","</div>","</td>","</tr>"])}c+="</tbody>",newNode("table","horizontal tag-table",null,c,b)},createPostsList:function(a){var b='<span class="label">Articles: </span>',c=a.length;if(0===c)return"";for(var d=0;c>d;d++){var e=a[d];b+=cleanInnerHTML(['<span class="article">','<span class="bullet"> • </span><a href="'+e.permalink+'" target="_blank">'+e.name+"</a>","</span>"])}return b},noList:function(){var a="No tags or categories to display. There are no tags or categories that match this status or search.";undoLoading(this.node_list_list,!0),addClass(this.node_list_nav_nextPage,"disabled"),addClass(this.node_list_nav_prevPage,"disabled"),insertMessage("plain",a,this.node_list_list,"small",!0)},refreshList:function(){var a=this.getListForm(),b=this;a.ajaxRequest=this.node_list_list.dataset.listName,makeLoading(this.node_list_list,!0,300),GLOBAL_AJAX_ENABLED?Ajax.post(GLOBAL_AJAX_URL,a,function(a){b.dispatchList(a),b.addDynamicListeners()},function(a){b.handleError()}):this.handleError()},confirmItemAction:function(a,b,c){if("delete"===b)for(var d=0;d<c.length;d++)if("1"===c[d].id)return void pushNotification("error",'The tag "Untagged" and the category "Uncategorized" cannot be deleted. Make sure they\'re unchecked and try again.');
if(GLOBAL_AJAX_ENABLED){var e=this,f=this.getTagNames(c),g=this.getCatNames(c),h="Are you POSITIVE you want to "+b+" the following ";ucfirst(b);if(count(f)>0){var i=count(f),j=i>1?i+" ":"";h+=j+pluralize("tag",i)+":<br>"+implode(f,"• ","<br>")}if(count(g)>0){count(f)>0&&(h+="<br>and the following ");var i=count(g),j=i>1?i+" ":"";h+=j+pluralize("category",i)+":<br>"+implode(g,"• ","<br>")}pushCallBackNotification("info",h,ucfirst(b)+" "+pluralize("Tag",i),e.actionTag,[a,b,e],null,null)}else pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")},getTagNames:function(a){for(var b=[],c=0;c<a.length;c++)"tag"===a[c].type&&b.push(a[c].name);return b},getCatNames:function(a){for(var b=[],c=0;c<a.length;c++)"category"===a[c].type&&b.push(a[c].name);return b},actionTag:function(){var a=arguments[0][0],b=arguments[0][1],c=arguments[0][2];a.entries=JSON.stringify(a.entries);var d=count(a.entries);Ajax.post(GLOBAL_AJAX_URL,a,function(a){xhr=isJSON(a),"clear"===b&&(message="cleared"),"delete"===b&&(b="deleted"),xhr?(pushNotification("success",d+" "+pluralize("item",d)+"were successfully "+b+"."),c.refreshList()):pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")},function(a){pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")})},ajaxEditTag:function(a,b){var c=this,d=a.entries[0].type;a.entries=JSON.stringify(a.entries),Ajax.post(GLOBAL_AJAX_URL,a,function(a){xhr=isJSON(a),xhr&&xhr.details===!0?(pushNotification("success","Your edits to this "+d+" were successfully saved."),c.refreshList()):xhr&&"slug_exists"===xhr.details?pushNotification("error","Unable to change "+d+" slug. A "+d+" already exists with that slug."):xhr&&"name_exists"===xhr.details?pushNotification("error","Unable to change "+d+" name. A "+d+" already exists with that name."):pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")},function(a){pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")})}};var b=$(".js-ajax-list-wrap.js-tags-wrap");nodeExists(b)&&a(b).init()}(),function(){var a=function(b){return this instanceof a?(this.currentPage=1,this.maxPages=1,this.sortBy="newest",this.expanded=!1,this.search=!1,this.haveItems=!1,this.commentClass=!1,this.node_list_listwrap=b,this.node_list_list=$(".tab-panel.active.js-ajax-list",this.node_list_listwrap),this.node_list_tabClickers=$All(".js-tabs-wrap ul > li > a",this.node_list_listwrap),this.node_list_itemApproves=[],this.node_list_itemSpams=[],this.node_list_itemDeletes=[],this.node_list_itemSearchIp=[],this.node_list_powersWrap=$(".js-list-powers",this.node_list_listwrap),this.node_list_powers_checkAll=$(".js-check-all",this.node_list_powersWrap),this.node_list_powers_searchInput=$(".js-search-input",this.node_list_powersWrap),this.node_list_powers_cancelSearch=$(".js-cancel-search",this.node_list_powersWrap),this.node_list_powers_expandList=$(".js-expand-list",this.node_list_powersWrap),this.node_list_powers_sortOptions=$All(".js-sort-list .drop a",this.node_list_powersWrap),this.node_list_powers_approve=$(".js-approve",this.node_list_powersWrap),this.node_list_powers_delete=$(".js-delete",this.node_list_powersWrap),this.node_list_powers_spam=$(".js-spam",this.node_list_powersWrap),this.node_list_nav_navWrap=$(".js-list-nav",this.node_list_listwrap),this.node_list_nav_pageInput=$(".js-current-page",this.node_list_nav_navWrap),this.node_list_nav_maxPages=$(".js-max-pages",this.node_list_nav_navWrap),this.node_list_nav_nextPage=$(".js-next",this.node_list_nav_navWrap),this.node_list_nav_prevPage=$(".js-prev",this.node_list_nav_navWrap),this.node_list_items=[],this.have_items=!empty(this.node_list_items),this.node_list_expandItem=[],this.node_list_collapseItems=[],this.node_sidebar_wrap=$(".js-comment-extras"),this.node_sidebar_infoWrap=$(".js-comment-extras .js-comment-info"),this.node_sidebar_closeInfo=$(".js-close-comment-info",this.node_sidebar_infoWrap),this.node_sidebar_content=$(".js-comment-content",this.node_sidebar_infoWrap),this.node_sidebar_commentStatus=$(".js-comment-status",this.node_sidebar_infoWrap),this.node_sidebar_searchUser=$(".js-search-user",this.node_sidebar_infoWrap),this.node_sidebar_searchEmail=$(".js-search-email",this.node_sidebar_infoWrap),this.node_sidebar_searchIp=$(".js-search-ip",this.node_sidebar_infoWrap),this.node_sidebar_blacklist=$(".js-blacklist",this.node_sidebar_infoWrap).children[0],this.node_sidebar_whitelist=$(".js-whitelist",this.node_sidebar_infoWrap).children[0],this.node_sidebar_avatar=$(".js-avatar",this.node_sidebar_infoWrap),this.node_sidebr_name=$(".js-name",this.node_sidebar_infoWrap),this.node_sidebar_email=$(".js-email",this.node_sidebar_infoWrap),this.node_sidebar_repIcon=$(".js-rep-icon",this.node_sidebar_infoWrap),this.node_sidebar_reputation=$(".js-reputation",this.node_sidebar_infoWrap),this.node_sidebar_fCommentUnit=$(".js-first-comment-unit ",this.node_sidebar_infoWrap),this.node_sidebar_fCommentTime=$(".js-first-comment-time",this.node_sidebar_infoWrap),this.node_sidebar_ipAddress=$(".js-ip-address",this.node_sidebar_infoWrap),this.node_sidebar_commentCount=$(".js-comment-count",this.node_sidebar_infoWrap),this.node_sidebar_spamCount=$(".js-spam-count",this.node_sidebar_infoWrap),this.node_sidebar_commentLink=$(".js-link-to-comment",this.node_sidebar_infoWrap),this.node_sidebar_replyEditWrap=$(".js-comment-edit-reply-wrap",this.node_sidebar_infoWrap),this.node_sidebar_replyEditInput=$(".js-edit-reply-input",this.node_sidebar_infoWrap),this.node_sidebar_open_reply=$(".js-reply",this.node_sidebar_infoWrap),this.node_sidebar_open_save=$(".js-edit",this.node_sidebar_infoWrap),this.node_sidebar_cancelEdit=$(".js-cancel-edit",this.node_sidebar_infoWrap),this.node_sidebar_saveReply=$(".js-save-reply",this.node_sidebar_infoWrap),this.node_sibebar_saveEdit=$(".js-save-edit",this.node_sidebar_infoWrap),this):new a(b)};a.prototype={init:function(){var a=this,b=this.getListForm();makeLoading(this.node_list_list,!0,300),queueAjax(GLOBAL_AJAX_URL,"POST",b,function(b){a.dispatchList(b),a.addDynamicListeners()},function(b){a.handleError()}),this.initializeListeners()},getListForm:function(){return this.currentPage=parseInt(this.node_list_nav_pageInput.value.trim()),this.search=""===this.node_list_powers_searchInput.value.trim()?!1:this.node_list_powers_searchInput.value.trim(),{search:this.search,page:this.currentPage,sortBy:this.sortBy,ajaxRequest:this.node_list_list.dataset.listName,public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href}},getItemActionForm:function(a,b){return{comment_ids:b,ajaxRequest:a,public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href}},getCheckedItems:function(){var a=[];if(this.have_items)for(var b=$All(".js-item-check",this.node_list_list),c=0;c<b.length;c++){var d=b[c];1==d.checked&&a.push(parentUntillClass(d,"js-item").dataset.commentId)}return a},initializeListeners:function(){var a=this;VMasker(this.node_list_nav_pageInput).maskNumber(),this.node_list_nav_pageInput.addEventListener("keyup",function(b){a.skipToPage(b)}),this.node_list_powers_checkAll.addEventListener("change",function(){var b=event.target.checked;b&&a.haveItems?a.checkAll():a.uncheckAll()}),this.node_list_powers_searchInput.addEventListener("keyup",function(b){a.initSearch(b)}),this.node_list_powers_searchInput.addEventListener("blur",function(b){""===a.node_list_powers_searchInput.value.trim()&&a.search!==!1&&a.clearSearch()}),this.node_list_powers_cancelSearch.addEventListener("click",function(b){b.preventDefault(),a.node_list_powers_searchInput.value="",a.search!==!1&&a.clearSearch()});for(var b=0;b<this.node_list_powers_sortOptions.length;b++){var c=this.node_list_powers_sortOptions[b];c.addEventListener("click",function(){var b=event.target.dataset.sort;b!==a.sortBy&&(a.sortBy=b,a.refreshList())})}this.node_list_powers_expandList.addEventListener("click",function(b){b.preventDefault();var c=$All(".js-item",a.node_list_list);empty(c)||(a.expanded===!1?(a.expandList(c),a.expanded=!0,a.node_list_powers_expandList.innerText="Collapse"):(a.collapseList(c),a.expanded=!1,a.node_list_powers_expandList.innerText="Expand"))});for(var d=0;d<this.node_list_tabClickers.length;d++)this.node_list_tabClickers[d].addEventListener("click",function(){a.node_list_list=$("#"+event.target.dataset.tab,a.node_list_listwrap),a.currentPage=1,a.maxPages=1,a.node_list_nav_pageInput.value=1,a.refreshList()});this.node_sidebar_closeInfo.addEventListener("click",function(){event.preventDefault(),removeClass(a.node_sidebar_wrap,"active")}),this.node_sidebar_open_reply.addEventListener("click",function(){event.preventDefault(),addClass(a.node_sidebar_replyEditWrap,"reply"),removeClass(a.node_sidebar_replyEditWrap,"edit"),a.node_sidebar_replyEditInput.value="",a.node_sidebar_replyEditInput.focus()}),this.node_sidebar_open_save.addEventListener("click",function(){event.preventDefault(),addClass(a.node_sidebar_replyEditWrap,"edit"),removeClass(a.node_sidebar_replyEditWrap,"reply"),a.node_sidebar_replyEditInput.value=a.node_sidebar_content.dataset.content,a.node_sidebar_replyEditInput.focus()}),this.node_sidebar_cancelEdit.addEventListener("click",function(){event.preventDefault(),removeClass(a.node_sidebar_replyEditWrap,"edit"),removeClass(a.node_sidebar_replyEditWrap,"reply")}),this.node_sidebar_saveReply.addEventListener("click",function(){a.saveReply()}),this.node_sibebar_saveEdit.addEventListener("click",function(){a.saveEdit()}),this.node_list_powers_approve.addEventListener("click",function(){event.preventDefault();var b=a.getCheckedItems();if(!empty(b)){var c=a.getItemActionForm("admin_approve_comments",b);a.confirmItemAction(c,"approve")}}),this.node_list_powers_delete.addEventListener("click",function(){event.preventDefault();var b=a.getCheckedItems();if(!empty(b)){var c=a.getItemActionForm("admin_delete_comments",b);a.confirmItemAction(c,"delete")}}),this.node_list_powers_spam.addEventListener("click",function(){event.preventDefault();var b=a.getCheckedItems();if(!empty(b)){var c=a.getItemActionForm("admin_spam_comments",b);a.confirmItemAction(c,"spam")}}),this.node_sidebar_searchUser.addEventListener("click",function(){a.initSearch("user:"+a.node_sidebar_searchUser.dataset.search)}),this.node_sidebar_searchIp.addEventListener("click",function(){a.initSearch("ip:"+a.node_sidebar_searchIp.dataset.search)}),this.node_sidebar_searchEmail.addEventListener("click",function(){a.initSearch("email:"+a.node_sidebar_searchEmail.dataset.search)}),this.node_sidebar_blacklist.addEventListener("click",function(){event.preventDefault(),hasClass(a.node_sidebar_blacklist,"active")?a.confirmModerateIpAddress("nolist"):a.confirmModerateIpAddress("blacklist")}),this.node_sidebar_whitelist.addEventListener("click",function(){event.preventDefault(),hasClass(a.node_sidebar_whitelist,"active")?a.confirmModerateIpAddress("nolist"):a.confirmModerateIpAddress("whitelist")}),this.node_list_nav_nextPage.addEventListener("click",function(){event.preventDefault(),a.skipToPage(a.currentPage+1)}),this.node_list_nav_prevPage.addEventListener("click",function(){event.preventDefault(),a.skipToPage(a.currentPage-1)})},addDynamicListeners:function(){var a=this;if(this.node_list_items=$All(".js-item",this.node_list_listwrap),this.have_items=!empty(this.node_list_items),this.node_list_expandItem=$All(".js-expand-item",this.node_list_listwrap),this.node_list_collapseItems=$All(".js-collapse-item",this.node_list_listwrap),this.node_list_itemApproves=$All(".js-item-approve",this.node_list_listwrap),this.node_list_itemSpams=$All(".js-item-spam",this.node_list_listwrap),this.node_list_itemDeletes=$All(".js-item-delete",this.node_list_listwrap),this.node_list_itemSearchIp=$All(".js-item-search-ip",this.node_list_listwrap),this.have_items)for(var b=0;b<this.node_list_items.length;b++){var c=this.node_list_items[b];c.addEventListener("click",function(){a.requestInfo(event.target)})}if(this.have_items)for(var d=0;d<this.node_list_expandItem.length;d++){var e=this.node_list_expandItem[d];e.addEventListener("click",function(){event.preventDefault();var a=parentUntillClass(event.target,"js-item");addClass(a,"expanded")})}if(this.have_items)for(var f=0;f<this.node_list_collapseItems.length;f++){var g=this.node_list_collapseItems[f];g.addEventListener("click",function(){event.preventDefault();var a=parentUntillClass(event.target,"js-item");removeClass(a,"expanded")})}if(this.have_items)for(var h=0;h<this.node_list_itemApproves.length;h++){var i=this.node_list_itemApproves[h];i.addEventListener("click",function(){event.preventDefault();var b=closest(event.target,"a"),c=parentUntillClass(event.target,"js-item"),d=a.getItemActionForm("admin_approve_comments",[c.dataset.commentId]);hasClass(b.parentNode,"disabled")||a.confirmItemAction(d,"approve")})}if(this.have_items)for(var j=0;j<this.node_list_itemSpams.length;j++){var i=this.node_list_itemSpams[j];i.addEventListener("click",function(){event.preventDefault();var b=closest(event.target,"a"),c=parentUntillClass(event.target,"js-item"),d=a.getItemActionForm("admin_spam_comments",[c.dataset.commentId]);hasClass(b.parentNode,"disabled")||a.confirmItemAction(d,"spam")})}if(this.have_items)for(var k=0;k<this.node_list_itemDeletes.length;k++){var i=this.node_list_itemDeletes[k];i.addEventListener("click",function(){event.preventDefault();var b=closest(event.target,"a"),c=parentUntillClass(event.target,"js-item"),d=a.getItemActionForm("admin_delete_comments",[c.dataset.commentId]);hasClass(b.parentNode,"disabled")||a.confirmItemAction(d,"delete")})}if(this.have_items)for(var l=0;l<this.node_list_itemSearchIp.length;l++){var i=this.node_list_itemSearchIp[l];i.addEventListener("click",function(){event.preventDefault();var b=closest(event.target,"a");a.initSearch("ip:"+b.innerHTML.trim())})}},checkAll:function(){var a=$All(".js-item-select input[type='checkbox']",this.node_list_list);if(!empty(a))for(var b=0;b<a.length;b++)a[b].checked=!0},uncheckAll:function(){var a=$All(".js-item-select input[type='checkbox']",this.node_list_list);if(!empty(a)&&this.haveItems)for(var b=0;b<a.length;b++)a[b].checked=!1;this.node_list_powers_checkAll.checked=!1},expandList:function(a){for(var b=0;b<a.length;b++)addClass(a[b],"expanded")},collapseList:function(a){for(var b=0;b<a.length;b++)removeClass(a[b],"expanded")},initSearch:function(a){if("string"==typeof a){var b=a;return this.node_list_powers_searchInput.value=b,addClass(this.node_list_powers_searchInput.parentNode,"active"),this.search=b,this.currentPage=1,this.maxPages=1,this.node_list_nav_pageInput.value=1,void triggerEvent(this.node_list_tabClickers[0],"click")}var b=this.node_list_powers_searchInput.value.trim();return""===b&&13==a.keyCode&&this.search!==!1?void this.clearSearch():(addClass(this.node_list_powers_searchInput.parentNode,"active"),void(13==a.keyCode&&(this.search=b,this.refreshList())))},clearSearch:function(){removeClass(this.node_list_powers_searchInput.parentNode,"active"),this.search=!1,this.refreshList()},skipToPage:function(a){var b=!1;"number"==typeof a?b=a:a.keyCode&&13==a.keyCode&&(b=this.node_list_nav_pageInput.value.trim(),b=""===b?0:b,b=parseInt(b)),b!==!1&&(b>this.maxPages||1>b||b===this.currentPage?this.node_list_nav_pageInput.value=this.currentPage:(this.currentPage=b,this.node_list_nav_pageInput.value=b,this.refreshList()))},updateNav:function(a){var b=this.currentPage;this.maxPages=count(a),this.node_list_nav_maxPages.innerHTML="of "+this.maxPages,b>=this.maxPages?addClass(this.node_list_nav_nextPage,"disabled"):removeClass(this.node_list_nav_nextPage,"disabled"),b>1?removeClass(this.node_list_nav_prevPage,"disabled"):addClass(this.node_list_nav_prevPage,"disabled")},dispatchList:function(a){a=isJSON(a),a&&isset(a.details[this.currentPage-1])&&!empty(a.details[this.currentPage-1])?(this.updateNav(a.details),this.uncheckAll(),this.haveItems=!0,this.insertComments(a.details[this.currentPage-1])):this.noList()},handleError:function(){this.haveItems=!1,this.noList()},insertComments:function(a){var b=this.node_list_list,c="<tbody>",d=this.expanded===!0?"expanded":"";undoLoading(b,!0);for(var e=0;e<a.length;e++){var f=a[e],g=f.content.length>200,h=g?'<a href="#" class="more js-expand-item">more</a>':"",i=g?'<a href="#" class="less js-collapse-item">less</a>':"",j="approved"===f.status?"disabled":"",k="spam"===f.status?"disabled":"",l="deleted"===f.status?"disabled":"";c+=cleanInnerHTML(['<tr class="comment list-item js-item '+f.status+" "+d+'" data-comment-id="'+f.id+'">',"<td>",'<h5 class="title">','<a href="'+f.permalink+"#comment-"+f.id+'" target="_blank">'+f.title+"</a>","</h5>",'<div class="avatar">','<img src="'+f.avatar+'" width="42" height="42" />',"</div>",'<div class="comment-body">','<div class="comment-meta">','<span class="comment-name">',f.name,"</span>",'<span class="bullet">•</span>','<a href="'+f.permalink+"#comment-"+f.id+'" target="_blank">','<abbr class="time-ago">',timeAgo(f.date)," ago","</abbr>","</a>",'<span class="right">','<span class="comment-author-info">'+f.email+"</span>",'<span class="bullet">•</span>','<span><a class="js-item-search-ip" href="#">'+f.ip_address+"</a></span>","</span>","</div>",'<div class="check-wrap js-item-select">','<input class="js-item-check" id="comment-select-'+f.id+'" type="checkbox" name="comment-select-'+f.id+'">','<label class="checkbox small mini" for="comment-select-'+f.id+'"></label>',"</div>",'<div class="item-preview">',strReduce(f.html_content,200,"..."),h,"</div>",'<div class="item-full">',f.html_content,i,"</div>",'<ul class="comment-actions js-comment-actions">','<li class="js-item-approve approve '+j+'">','<a href="#">','<svg viewBox="0 0 512 512"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#checkmark"></use></svg>',"Approve","</a>","</li>",'<li class="js-item-spam spam '+k+'">','<a href="#">','<svg viewBox="0 0 512 512"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#blocked"></use></svg>',"Spam","</a>","</li>",'<li class="js-item-delete delete '+l+'">','<a href="#">','<svg viewBox="0 0 100 100"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#trash"></use></svg>',"Delete","</a>","</li>","</ul>","</div>","</td>","</tr>"])}c+="</tbody>",newNode("table","horizontal comments-table",null,c,b)},noList:function(){var a="No comments to display. There are no comments that match this status or search.";undoLoading(this.node_list_list,!0),addClass(this.node_list_nav_nextPage,"disabled"),addClass(this.node_list_nav_prevPage,"disabled"),insertMessage("plain",a,this.node_list_list,"small",!0)},refreshList:function(){var a=this.getListForm(),b=this;a.ajaxRequest=this.node_list_list.dataset.listName,makeLoading(this.node_list_list,!0,300),GLOBAL_AJAX_ENABLED?Ajax.post(GLOBAL_AJAX_URL,a,function(a){b.dispatchList(a),b.addDynamicListeners()},function(a){b.handleError()}):this.handleError()},saveReply:function(){var a=this;if(GLOBAL_AJAX_ENABLED){var b={comment_id:this.node_sidebar_content.dataset.commentId,content:this.node_sidebar_replyEditInput.value,ajaxRequest:"admin_reply_comment",public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href};showGlobalSpinner(),Ajax.post(GLOBAL_AJAX_URL,b,function(b){xhr=isJSON(b),xhr?(a.refreshList(),pushNotification("success","Your comment was successfully posted."),removeClass(a.node_sidebar_replyEditWrap,"edit"),removeClass(a.node_sidebar_replyEditWrap,"reply")):pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page."),hideGlobalSpinner()},function(a){hideGlobalSpinner(),pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")})}else pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")},saveEdit:function(){var a=this;if(GLOBAL_AJAX_ENABLED){var b={comment_id:this.node_sidebar_content.dataset.commentId,content:this.node_sidebar_replyEditInput.value,ajaxRequest:"admin_edit_comment",public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href};showGlobalSpinner(),Ajax.post(GLOBAL_AJAX_URL,b,function(b){xhr=isJSON(b),xhr?(a.updateComment(xhr.details,a),pushNotification("success","Edit was successfully saved."),removeClass(a.node_sidebar_replyEditWrap,"edit"),removeClass(a.node_sidebar_replyEditWrap,"reply")):pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page."),hideGlobalSpinner()},function(a){hideGlobalSpinner(),pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")})}else pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")},updateComment:function(a,b){b.node_sidebar_content.innerHTML=a,b.node_sidebar_content.dataset.content=b.node_sidebar_replyEditInput.value,b.refreshList()},requestInfo:function(a){if(!isNodeType(a,"a")){var b=parentUntillClass(a,"js-item"),c=this;if(GLOBAL_AJAX_ENABLED){var d=this.getInfoForm(b);Ajax.post(GLOBAL_AJAX_URL,d,function(a){xhr=isJSON(a),xhr&&c.displayCommentInfo(xhr.details,b)},function(a){})}}},displayCommentInfo:function(a,b){var c=b.dataset.commentId,d=$(".title a",b).getAttribute("href"),e=timeAgo(a.first_date,!0);this.node_sidebar_content.innerHTML=a.html_content,this.node_sidebar_content.dataset.content=a.content,this.node_sidebar_replyEditInput.value=a.content,this.node_sidebar_content.dataset.commentId=c,this.node_sidebar_commentStatus.innerHTML="This comment is "+a.status,this.node_sidebar_searchUser.innerHTML="View all from "+a.name,this.node_sidebar_searchEmail.innerHTML="View all from "+a.email,this.node_sidebar_searchIp.innerHTML="View all from "+a.ip_address,this.node_sidebar_avatar.innerHTML='<img src="'+a.avatar+'" width="32" height="32" />',this.node_sidebr_name.innerHTML=a.name,this.node_sidebar_email.innerHTML=a.email,this.node_sidebar_fCommentUnit.innerHTML=e.unit+" ago",this.node_sidebar_fCommentTime.innerHTML=e.time,this.node_sidebar_ipAddress.innerHTML=a.ip_address,this.node_sidebar_commentCount.innerHTML=a.posted_count,this.node_sidebar_spamCount.innerHTML=a.spam_count,this.node_sidebar_commentLink.setAttribute("href",d),this.node_sidebar_searchEmail.dataset.search=a.email,this.node_sidebar_searchIp.dataset.search=a.ip_address,this.node_sidebar_searchUser.dataset.search=a.name,bool(a.blacklisted)===!0?addClass(this.node_sidebar_blacklist,"active"):removeClass(this.node_sidebar_blacklist,"active"),bool(a.whitelisted)===!0?addClass(this.node_sidebar_whitelist,"active"):removeClass(this.node_sidebar_whitelist,"active");var f=a.reputation;removeClass(this.node_sidebar_repIcon,["bad","good","average"]),removeClass(this.node_sidebar_commentStatus,["deleted","approved","pending","spam"]),0>f?(addClass(this.node_sidebar_repIcon,"bad"),this.node_sidebar_reputation.innerHTML="Low"):f>0&&2>f?(addClass(this.node_sidebar_repIcon,"average"),this.node_sidebar_reputation.innerHTML="Average"):f>2&&(addClass(this.node_sidebar_repIcon,"good"),this.node_sidebar_reputation.innerHTML="Good"),addClass(this.node_sidebar_commentStatus,a.status),addClass(this.node_sidebar_wrap,"active")},getInfoForm:function(a){return{comment_id:a.dataset.commentId,ajaxRequest:"admin_comment_info",public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href}},confirmModerateIpAddress:function(a){if(GLOBAL_AJAX_ENABLED){var b,c=this,d={ip_address:this.node_sidebar_ipAddress.innerHTML.trim(),action:a,ajaxRequest:"admin_black_whitelist_ip",public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href};"nolist"===a?(a="remove",b="Are you POSITIVE you want to remove users commenting from the IP address "+d.ip_address+" from all lists?"):b="Are you POSITIVE you want to "+a+" users commenting from the IP address "+d.ip_address+" ?",pushCallBackNotification("info",b,ucfirst(a)+" IP",c.moderateIpAddress,[d,c],null,null)}else pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")},moderateIpAddress:function(){var a=arguments[0][0],b=arguments[0][1];Ajax.post(GLOBAL_AJAX_URL,a,function(c){xhr=isJSON(c),xhr?(pushNotification("success","The IP address "+a.ip_address+" was successfully "+a.action+"ed."),"whitelist"===a.action?(addClass(b.node_sidebar_whitelist,"active"),removeClass(b.node_sidebar_blacklist,"active")):"blacklist"===a.action?(removeClass(b.node_sidebar_whitelist,"active"),addClass(b.node_sidebar_blacklist,"active")):"nolist"===a.action&&(removeClass(b.node_sidebar_whitelist,"active"),removeClass(b.node_sidebar_blacklist,"active"))):pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")},function(a){pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")})},confirmItemAction:function(a,b){if(GLOBAL_AJAX_ENABLED){var c=this,d=count(a.comment_ids);pushCallBackNotification("info","Are you POSITIVE you want to "+b+" "+d+" "+pluralize("comment",d)+"?",ucfirst(b)+" "+pluralize("Comment",d),c.actionComment,[a,b,c],null,null)}else pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")},actionComment:function(){var a=arguments[0][0],b=arguments[0][1],c=arguments[0][2],d=count(a.comment_ids);Ajax.post(GLOBAL_AJAX_URL,a,function(a){xhr=isJSON(a),"approve"===b&&(b="approved"),"delete"===b&&(b="deleted"),xhr?(pushNotification("success",d+" "+pluralize("comment",d)+" "+pluralize("was",d)+" successfully marked as "+b),c.refreshList(),triggerEvent(c.node_sidebar_closeInfo,"click")):pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")},function(a){pushNotification("error","There was an error processing your request. Try again in a few moments or try refreshing the page.")})}};var b=$(".js-ajax-list-wrap.js-comments-wrap");nodeExists(b)&&a(b).init()}(),function(){function a(){event.preventDefault(),hasClass(c.parentNode,"active")?removeClass(c.parentNode,"active"):addClass(c.parentNode,"active")}function b(){event.target!==c&&c!==closest(event.target,"a")&&removeClass(c.parentNode,"active")}var c=$(".header .drop-down > a");nodeExists(c)&&(c.addEventListener("click",a),document.addEventListener("click",b))}(),function(){function a(){for(var a=0;a<f.length;a++)f[a].addEventListener("click",d),b(f[a])}function b(a){var b=$(".drop div",a.parentNode);b.addEventListener("click",c)}function c(){event.preventDefault();var a=closest(event.target,"a"),b=parentUntillClass(a,"js-button-down"),c=$(".button",b),d=$("svg",c);d="undefined"==typeof d?null:d,c.innerHTML=a.textContent,d&&c.appendChild(d)}function d(){event.preventDefault();var a=closest(event.target,"a"),b=a.parentNode;hasClass(b,"active")?(a.blur(),removeClass(b,"active")):(a.blur(),addClass(b,"active"))}function e(){var a=closest(event.target,"a");if(!a||!hasClass(a.parentNode,"js-button-down"))for(var b=0;b<f.length;b++)f[b].blur(),removeClass(f[b].parentNode,"active")}var f=$All(".js-button-down .button");nodeExists($(".js-button-down .button"))&&(a(),document.addEventListener("click",e))}();var activeNotifs=[];!function(){function a(){event.preventDefault();var a=event.target;if(!hasClass(a,"active")){var c=parentUntillClass(a,"js-tabs-wrap"),d=$("a.active",c),e=$("#"+d.dataset.tab),f=$("#"+a.dataset.tab);if(nodeExists(e)&&removeClass(e,"active"),nodeExists(f)&&addClass(f,"active"),removeClass(d,"active"),addClass(a,"active"),hasClass(c,"js-url-tabs")){var g=a.dataset.tabTitle,h=a.dataset.tabUrl;b(g,h)}}}function b(a,b){var c=rtrim(window.location.href,"/");if(c=c.split("/"),c.pop(),c=c.join("/"),window.history.replaceState){var d=a;window.history.replaceState(d,a,c+"/"+b+"/")}document.title=a}var c=$All(".js-tabs-wrap a");if(nodeExists($(".js-tabs-wrap a")))for(var d=0;d<c.length;d++)c[d].addEventListener("click",a)}(),function(){function a(){if(!hasClass(b,"active")){clearAjaxInputErrors(d);var a=formValidator(c).validateForm();return a.formAppend("ajaxRequest","admin_login"),a.validForm?void(GLOBAL_AJAX_ENABLED?Ajax.post(GLOBAL_AJAX_URL,a.getForm(),function(a){var b=isJSON(a);return b&&"valid"===b.details?void(window.location.href=GLOBAL_AJAX_URL+"articles/"):void showAjaxFormResult(d,"error")},function(a){showAjaxFormResult(d,"error")}):showAjaxFormResult(d,"error")):void showAjaxInputErrors(c,d)}}var b,c,d=$(".login.setup-panel form");nodeExists(d)&&(c=$All("input",d),b=$(".submit",d),b.addEventListener("click",a))}(),function(){function a(){if(!hasClass(b,"active")){clearAjaxInputErrors(d);var a=formValidator(c).validateForm();return a.formAppend("ajaxRequest","admin_forgot_password"),a.validForm?void(GLOBAL_AJAX_ENABLED?Ajax.post(GLOBAL_AJAX_URL,a.getForm(),function(a){showAjaxFormResult(d,"info")},function(a){showAjaxFormResult(d,"info")}):showAjaxFormResult(d,"info")):void showAjaxInputErrors(c,d)}}var b,c,d=$(".forgot-password.setup-panel form");nodeExists(d)&&(c=$All("input",d),b=$(".submit",d),b.addEventListener("click",a))}(),function(){function a(){if(!hasClass(b,"active")){clearAjaxInputErrors(d);var a=formValidator(c).validateForm();return a.formAppend("ajaxRequest","admin_forgot_username"),a.validForm?void(GLOBAL_AJAX_ENABLED?Ajax.post(GLOBAL_AJAX_URL,a.getForm(),function(a){showAjaxFormResult(d,"info")},function(a){showAjaxFormResult(d,"info")}):showAjaxFormResult(d,"info")):void showAjaxInputErrors(c,d)}}var b,c,d=$(".forgot-username.setup-panel form");nodeExists(d)&&(c=$All("input",d),b=$(".submit",d),b.addEventListener("click",a))}(),function(){function a(){if(!hasClass(b,"active")){clearAjaxInputErrors(d);var a=formValidator(c).validateForm();return a.formAppend("ajaxRequest","admin_reset_password"),a.validForm?void(GLOBAL_AJAX_ENABLED?Ajax.post(GLOBAL_AJAX_URL,a.getForm(),function(a){var b=isJSON(a);return b&&"valid"===b.details?void showAjaxFormResult(d,"success"):void showAjaxFormResult(d,"error")},function(a){showAjaxFormResult(d,"error")}):showAjaxFormResult(d,"error")):void showAjaxInputErrors(c,d)}}var b,c,d=$(".reset-password.setup-panel form");nodeExists(d)&&(c=$All("input",d),b=$(".submit",d),b.addEventListener("click",a))}(),function(){function a(){for(var a=0;a<c.length;a++)c[a].addEventListener("change",b)}function b(){for(var a=event.target,b=a.checked,c=a.parentNode.nextSibling;c&&"DIV"!==c.tagName;)c=c.nextSibling;b?addClass(c,"active"):removeClass(c,"active")}var c=$All(".admin-settings input[type=checkbox");nodeExists($(".admin-settings input[type=checkbox"))&&a()}(),function(){var a=$All(".js-input-mask-number");if(nodeExists($(".js-input-mask-number")))for(var b=0;b<a.length;b++)VMasker(a[b]).maskNumber()}(),function(){function a(){if(!hasClass(b,"active")){clearAjaxInputErrors(d);var a=formValidator(c).validateForm();return a.formAppend("ajaxRequest","admin_update_settings"),a.validForm?void(GLOBAL_AJAX_ENABLED?Ajax.post(GLOBAL_AJAX_URL,a.getForm(),function(a){var c=isJSON(a);return c&&"valid"===c.details?(removeClass(b,"active"),void pushNotification("success","Your settings were successfully updated!")):(removeClass(b,"active"),void pushNotification("error","There was an error updating your settings!"))},function(a){removeClass(b,"active"),pushNotification("error","There was an error updating your settings!")}):(removeClass(b,"active"),pushNotification("error","There was an error updating your settings!"))):void showAjaxInputErrors(a.invalids,d)}}var b,c,d=$("form.js-update-admin-form");nodeExists(d)&&(c=$All("input",d),b=$(".submit",d),b.addEventListener("click",a))}(),function(){function a(){if(!hasClass(b,"active")){clearAjaxInputErrors(d);
var a=formValidator(c).validateForm();return a.formAppend("ajaxRequest","admin_update_author"),a.validForm?void(GLOBAL_AJAX_ENABLED?Ajax.post(GLOBAL_AJAX_URL,a.getForm(),function(a){var c=isJSON(a);return c&&"valid"===c.details?(removeClass(b,"active"),void pushNotification("success","Your settings were successfully updated!")):(removeClass(b,"active"),void pushNotification("error","There was an error updating your settings!"))},function(a){removeClass(b,"active"),pushNotification("error","There was an error updating your settings!")}):(removeClass(b,"active"),pushNotification("error","There was an error updating your settings!"))):void showAjaxInputErrors(a.invalids,d)}}var b,c,d=$("form.js-author-settings-form");nodeExists(d)&&(c=$All("input, textarea",d),b=$(".submit",d),b.addEventListener("click",a))}(),function(){function a(a){var b=a.width,c=a.height,d=ImageResizer(b,c,!0),e=d.crop(150,150);return{srcX:e.source_x,srcY:e.source_y,srcWidth:e.source_w,srcHeight:e.source_h,trgX:e.dest_x,trgY:e.dest_y,trgWidth:150,trgHeight:150}}function b(){var a=g;a.on("uploadprogress",function(a,b){k.style.width=b+"%"}),a.on("sending",function(a,b,c){c.append("ajaxRequest","admin_author_image"),c.append("public_key",GLOBAL_PUBLIC_KEY)}),a.on("drop",function(a){e()}),a.on("error",function(a,b,c){e(),f(a,b,c)}),a.on("addedfile",function(a){m++,m>1?(e(),l=!1,clearTimeout(h),i=setTimeout(c,300)):1===m&&(h=setTimeout(d,300))}),a.on("success",function(a,b){return"object"!=typeof b&&(b=isJSON(b)),"object"==typeof b&&b&&b.response&&"processed"===b.response&&b.details.indexOf("http://")>-1?void pushNotification("success","Your file was successfully uploaded!"):void pushNotification("error","There was an error processing the request. Try again in a few moments.")}),a.on("complete",function(a){l=!0,m=0,k.style.width="0%"})}function c(){clearTimeout(i),pushNotification("error","Error! Too many uploads at once. Upload limit is 1 file per drop."),l=!0,m=0}function d(){clearTimeout(h),l===!0&&g.processQueue(),l=!0,m=0}function e(){removeClass(j,"dz-started");var a=$(".js-author-hero-drop .dz-preview"),b=$All(".js-author-hero-drop .dz-preview");if(nodeExists(a))for(var c=0;c<b.length;c++)removeFromDOM(b[c])}function f(a,b,c){pushNotification("alert",b)}var g,h,i,j=$(".js-author-hero-drop"),k=$(".js-author-hero-drop .upload-bar .progress"),l=!0,m=0;if(nodeExists(j)){var n={url:window.location.href.replace(/admin(.+)/,"admin/"),maxFilesize:5,parallelUploads:1,uploadMultiple:!1,clickable:!0,createImageThumbnails:!0,maxFiles:null,acceptedFiles:".jpg,.png",autoProcessQueue:!1,maxThumbnailFilesize:5,thumbnailWidth:150,thumbnailHeight:150,resize:a,dictInvalidFileType:"Error! Unsupported file or files. You can't upload files of that type.",dictFileTooBig:"Error! File or files are too lare. Max upload size is 5mb per file.",dictResponseError:"There was an error processing the request. Try again in a few moments.",dictMaxFilesExceeded:"Error! Too many uploads at once. Upload limit is 1 file per drop."};g=new Dropzone(j,n),b()}}(),function(){function a(){if(!hasClass(b,"active")){clearAjaxInputErrors(d);var a=formValidator(c).validateForm();if(a.formAppend("ajaxRequest","admin_update_kanso"),!a.validForm)return void showAjaxInputErrors(a.invalids,d);var e=a.getForm();return e["use-cache"]===!0&&""===e["cache-life"]?void showAjaxInputErrors([a.getInput("cache-life")],d):e["use-CDN"]===!0&&""===e["CDN-url"]?void showAjaxInputErrors([a.getInput("CDN-url")],d):void(GLOBAL_AJAX_ENABLED?Ajax.post(GLOBAL_AJAX_URL,e,function(a){var c=isJSON(a);return c&&"valid"===c.details?(removeClass(b,"active"),void pushNotification("success","Your settings were successfully updated!")):c&&"theme_no_exist"===c.details?(removeClass(b,"active"),void pushNotification("error","The theme you specified does not exists.")):c&&"invalid_permalinks"===c.details?(removeClass(b,"active"),void pushNotification("error","Your permalinks structure is invalid. Please enter a valid permalinks wildcard.")):c&&"invalid_img_quality"===c.details?(removeClass(b,"active"),void pushNotification("error","The thumbnail quality you entered is invalid. Thumbnail quality needs to be between 1-100")):c&&"invalid_cdn_url"===c.details?(removeClass(b,"active"),void pushNotification("error","The CDN url you intered is not a valid url. Please enter a valid url.")):c&&"invalid_cache_life"===c.details?(removeClass(b,"active"),void pushNotification("error","The cache-life you entered is invalid. Please enter a vailid cache-life")):void 0},function(a){removeClass(b,"active"),pushNotification("error","There was an error updating your settings!")}):(removeClass(b,"active"),pushNotification("error","There was an error updating your settings!")))}}var b,c,d=$("form.js-kanso-settings-form");nodeExists(d)&&(c=getFormInputs(d),b=$("button.submit",d),b.addEventListener("click",a))}(),function(){function a(){if(!hasClass(b,"active")){clearAjaxInputErrors(d);var a=formValidator(c).validateForm();return a.formAppend("ajaxRequest","admin_invite_user"),a.validForm?GLOBAL_AJAX_ENABLED?void Ajax.post(GLOBAL_AJAX_URL,a.getForm(),function(a){var c=isJSON(a);return c&&"valid"===c.details&&(removeClass(b,"active"),pushNotification("success","The user was successfully sent an invitation to join your website!")),c&&"already_member"===c.details?(removeClass(b,"active"),void pushNotification("alert","Another user is already singed up under that email address.")):c&&"no_send"===c.details?(removeClass(b,"active"),void pushNotification("error","There was an error inviting that user. You need to be running Kanso on a live server, with PHP's mail() function to send emails.")):void 0},function(a){removeClass(b,"active"),pushNotification("error","There was an error inviting that user.")}):(removeClass(b,"active"),void pushNotification("error","There was an error inviting that user.")):void showAjaxInputErrors(a.invalids,d)}}var b,c,d=$("form.js-invite-user-form");nodeExists(d)&&(c=$All("input, select",d),b=$(".submit",d),b.addEventListener("click",a))}(),function(){function a(){event.preventDefault();var a=closest(event.target,"a");hasClass(a,"active")||pushCallBackNotification("info","Are you POSITIVE you want to permanently delete this user?","Delete",b,a)}function b(a){addClass(a,"active");var b=closest(a,"tr"),c={ajaxRequest:"admin_delete_user",id:parseInt(a.dataset.authorId),public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href};return GLOBAL_AJAX_ENABLED?void Ajax.post(GLOBAL_AJAX_URL,c,function(c){var d=isJSON(c);return d&&"valid"===d.details?(removeClass(a,"active"),pushNotification("success","The user was successfully deleted. Their authorship articles have been transferred to you."),removeFromDOM(b),void 0):(removeClass(a,"active"),void pushNotification("error","There was an error deleting that user."))},function(b){removeClass(a,"active"),pushNotification("error","There was an error deleting that user.")}):(removeClass(a,"active"),void pushNotification("error","There was an error deleting that user."))}var c=$All(".js-delete-author");if(nodeExists($(".js-delete-author")))for(var d=0;d<c.length;d++)c[d].addEventListener("click",a)}(),function(){function a(){var a=closest(event.target,"select"),d=a.options[a.selectedIndex].value,e={ajaxRequest:"admin_change_user_role",role:d,id:a.dataset.authorId,public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href};pushCallBackNotification("info","Are you POSITIVE you want to change this this user's account role?","Change Role",b,[e,a],c,a)}function b(a){var b=a[0],d=a[1];return GLOBAL_AJAX_ENABLED?void Ajax.post(GLOBAL_AJAX_URL,b,function(a){var b=isJSON(a);return b&&"valid"===b.details?void pushNotification("success","The user's account role was successfully changed."):(c(d),void pushNotification("error","There was an error changing that user's account role."))},function(a){c(d),pushNotification("error","There was an error changing that user's account role.")}):(c(d),void pushNotification("error","There was an error changing that user's account role."))}function c(a){var b=count(a.options),c=a.selectedIndex,d=c===b?c-1:c+1;a.value=a.options[d].value}var d=$All(".js-change-role");if(nodeExists($(".js-change-role")))for(var e=0;e<d.length;e++)d[e].addEventListener("change",a)}(),function(){function a(){event.preventDefault();var a=closest(event.target,"a");if(!hasClass(a,"active")){var b={ajaxRequest:"admin_clear_cache",public_key:GLOBAL_PUBLIC_KEY,referer:window.location.href};return addClass(a,"active"),GLOBAL_AJAX_ENABLED?void Ajax.post(GLOBAL_AJAX_URL,b,function(b){var c=isJSON(b);return c&&"valid"===c.details?(removeClass(a,"active"),void pushNotification("success","Kanso's cache was successfully cleared!")):(removeClass(a,"active"),void pushNotification("error","There server encountered an error while clearing the cache."))},function(b){removeClass(a,"active"),pushNotification("error","There server encountered an error while clearing the cache.")}):(removeClass(a,"active"),void pushNotification("error","There server encountered an error while clearing the cache."))}}var b=$(".js-clear-kanso-cache");nodeExists(b)&&b.addEventListener("click",a)}(),function(){function a(){if(!hasClass(b.parentNode,"active")){addClass(b.parentNode,"active");var a=Uploader(b,["application/json"],1).init();if(!a.validateMime())return b.value="",GLOBAL_PROGRESS.style.width="0px",removeClass(b.parentNode,"active"),void pushNotification("error","Unsupported file type. You need to upload a valid JSON file.");if(!a.validateFileSizes())return b.value="",GLOBAL_PROGRESS.style.width="0px",removeClass(b.parentNode,"active"),void pushNotification("error","File is too large. Max file size is 5mb.");if(!a.validateMaxFiles())return b.value="",GLOBAL_PROGRESS.style.width="0px",removeClass(b.parentNode,"active"),void pushNotification("error","Too many files uploading at once. You can only upload a single file at a time.");a.append("ajaxRequest","admin_import_articles"),a.append("public_key",GLOBAL_PUBLIC_KEY),a.append("referer",window.location.href),GLOBAL_AJAX_ENABLED?a.upload(GLOBAL_AJAX_URL,function(a){b.value="",GLOBAL_PROGRESS.style.width="0px",removeClass(b.parentNode,"active");var c=isJSON(a);c&&"valid"===c.details?pushNotification("success","Your articles were successfully imported!"):pushNotification("error","Your articles could not be imported. The JSON file you uploaded is invalid for import.")},function(a){pushNotification("error","The server encoutered an error while processing your request."),b.value="",GLOBAL_PROGRESS.style.width="0px",removeClass(b.parentNode,"active")},function(a){GLOBAL_PROGRESS.style.width=a+"%"}):(b.value="",GLOBAL_PROGRESS.style.width="0px",removeClass(b.parentNode,"active"))}}var b=$(".js-batch-import input");nodeExists(b)&&b.addEventListener("change",a)}(),function(){function a(){if(!hasClass(b.parentNode,"active")){addClass(b.parentNode,"active");var a=Uploader(b,["image/jpeg","image/png","image/gif"],50).init();if(!a.validateMime())return b.value="",GLOBAL_PROGRESS.style.width="0px",removeClass(b.parentNode,"active"),void pushNotification("error","Unsupported file types were found. You can only upload GIF, PNG and JPG images.");if(!a.validateFileSizes())return b.value="",GLOBAL_PROGRESS.style.width="0px",removeClass(b.parentNode,"active"),void pushNotification("error","One of the files is too large. Max file size is 5mb.");if(!a.validateMaxFiles())return b.value="",GLOBAL_PROGRESS.style.width="0px",removeClass(b.parentNode,"active"),void pushNotification("error","Too many files uploading at once. You can upload a maximum of 50 files at a time.");a.append("ajaxRequest","admin_batch_image"),a.append("public_key",GLOBAL_PUBLIC_KEY),a.append("referer",window.location.href),GLOBAL_AJAX_ENABLED?a.upload(GLOBAL_AJAX_URL,function(a){b.value="",GLOBAL_PROGRESS.style.width="0px",removeClass(b.parentNode,"active");var c=isJSON(a);c&&"valid"===c.details?pushNotification("success","Your images were successfully uploaded!"):c&&"server_error"===c.details?pushNotification("error","The server encoutered an error while processing your request."):c&&"invalid_size"===c.details?pushNotification("error","One or more of the files are too large. Max file size is 5mb."):c&&"invalid_mime"===c.details&&pushNotification("error","Unsupported file types were found. You can only upload GIF, PNG and JPG images.")},function(a){b.value="",GLOBAL_PROGRESS.style.width="0px",removeClass(b.parentNode,"active"),pushNotification("error","The server encoutered an error while processing your request.")},function(a){GLOBAL_PROGRESS.style.width=a+"%"}):(b.value="",GLOBAL_PROGRESS.style.width="0px",removeClass(b.parentNode,"active"),pushNotification("error","The server encoutered an error while processing your request."))}}var b=$(".js-batch-images input");nodeExists(b)&&b.addEventListener("change",a)}(),function(){function a(){event.preventDefault(),pushCallBackNotification("info","Are you POSITIVE you want to restor Kanso to its origional settings?","Restore Kanso",b)}function b(){addClass(c,"active");var a={};return a.ajaxRequest="admin_restore_kanso",a.public_key=GLOBAL_PUBLIC_KEY,a.referer=window.location.href,GLOBAL_AJAX_ENABLED?void Ajax.post(GLOBAL_AJAX_URL,a,function(a){var b=isJSON(a);return b&&"valid"===b.details?void(window.location.href=window.location.href=GLOBAL_AJAX_URL+"login/"):(removeClass(c,"active"),void pushNotification("error","There was an error restoring Kanso's settings."))},function(a){removeClass(c,"active"),pushNotification("error","The server encoutered an error while processing your request.")}):(removeClass(c,"active"),void pushNotification("error","The server encoutered an error while processing your request."))}var c=$(".js-clear-kanso-database");nodeExists(c)&&c.addEventListener("click",a)}();